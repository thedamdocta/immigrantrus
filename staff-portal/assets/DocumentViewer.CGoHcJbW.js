const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-4HENfCPg.B-f1kC98.js","assets/url-DQYFKQ_E.HgWvZVPM.js","assets/index.Dg3lKJeg.js","assets/index.DMD_3Uv7.css","assets/index-BepDdkdq.DVZIymEt.js"])))=>i.map(i=>d[i]);
import{dW as B1,r as q,k as W,Y as zs,aF as Rl,p as U1,dX as H1,i as cv,j as Ml,Z as $1,n as z1,dY as V1}from"./index.Dg3lKJeg.js";var rh={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var G1=rh.exports,uv;function q1(){return uv||(uv=1,function(i,e){((t,n)=>{i.exports=n()})(G1,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,r=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,l={},h=0,u={};function c(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var C=F(b);C.chunkSize=parseInt(C.chunkSize),b.step||b.chunk||(C.chunkSize=null),this._handle=new E(C),(this._handle.streamer=this)._config=C}).call(this,w),this.parseChunk=function(b,C){var T=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<T){let B=this._config.newline;B||(D=this._config.quoteChar||'"',B=this._handle.guessLineEndings(b,D)),b=[...b.split(B).slice(T)].join(B)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(b))!==void 0&&(b=D),this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+b,D=(this._partialLine="",this._handle.parse(T,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=D.meta.cursor,T=(this._finished||(this._partialLine=T.substring(b-this._baseIndex),this._baseIndex=b),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:D,workerId:u.WORKER_ID,finished:T});else if(L(this._config.chunk)&&!C){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!T||!L(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),T||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(b){L(this._config.error)?this._config.error(b):a&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:b,finished:!1})}}function f(w){var b;(w=w||{}).chunkSize||(w.chunkSize=u.RemoteChunkSize),c.call(this,w),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(C){this._input=C,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),r||(b.onload=j(this._chunkLoaded,this),b.onerror=j(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var C,T=this._config.downloadRequestHeaders;for(C in T)b.setRequestHeader(C,T[C])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+D));try{b.send(this._config.downloadRequestBody)}catch(B){this._chunkError(B.message)}r&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(C=>(C=C.getResponseHeader("Content-Range"))!==null?parseInt(C.substring(C.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(C){C=b.statusText||C,this._sendError(new Error(C))}}function g(w){(w=w||{}).chunkSize||(w.chunkSize=u.LocalChunkSize),c.call(this,w);var b,C,T=typeof FileReader<"u";this.stream=function(D){this._input=D,C=D.slice||D.webkitSlice||D.mozSlice,T?((b=new FileReader).onload=j(this._chunkLoaded,this),b.onerror=j(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,B=(this._config.chunkSize&&(B=Math.min(this._start+this._config.chunkSize,this._input.size),D=C.call(D,this._start,B)),b.readAsText(D,this._config.encoding));T||this._chunkLoaded({target:{result:B}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(b.error)}}function y(w){var b;c.call(this,w=w||{}),this.stream=function(C){return b=C,this._nextChunk()},this._nextChunk=function(){var C,T;if(!this._finished)return C=this._config.chunkSize,b=C?(T=b.substring(0,C),b.substring(C)):(T=b,""),this._finished=!b,this.parseChunk(T)}}function A(w){c.call(this,w=w||{});var b=[],C=!0,T=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):C=!0},this._streamData=j(function(D){try{b.push(typeof D=="string"?D:D.toString(this._config.encoding)),C&&(C=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(B){this._streamError(B)}},this),this._streamError=j(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=j(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=j(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(w){var b,C,T,D,B=Math.pow(2,53),K=-B,ie=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,O=this,re=0,H=0,pe=!1,J=!1,U=[],z={data:[],errors:[],meta:{}};function te(se){return w.skipEmptyLines==="greedy"?se.join("").trim()==="":se.length===1&&se[0].length===0}function ee(){if(z&&T&&(ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),T=!1),w.skipEmptyLines&&(z.data=z.data.filter(function(X){return!te(X)})),le()){let X=function(ce,he){L(w.transformHeader)&&(ce=w.transformHeader(ce,he)),U.push(ce)};if(z)if(Array.isArray(z.data[0])){for(var se=0;le()&&se<z.data.length;se++)z.data[se].forEach(X);z.data.splice(0,1)}else z.data.forEach(X)}function G(X,ce){for(var he=w.header?{}:[],ue=0;ue<X.length;ue++){var ne=ue,Y=X[ue],Y=((ve,oe)=>(ye=>(w.dynamicTypingFunction&&w.dynamicTyping[ye]===void 0&&(w.dynamicTyping[ye]=w.dynamicTypingFunction(ye)),(w.dynamicTyping[ye]||w.dynamicTyping)===!0))(ve)?oe==="true"||oe==="TRUE"||oe!=="false"&&oe!=="FALSE"&&((ye=>{if(ie.test(ye)&&(ye=parseFloat(ye),K<ye&&ye<B))return 1})(oe)?parseFloat(oe):V.test(oe)?new Date(oe):oe===""?null:oe):oe)(ne=w.header?ue>=U.length?"__parsed_extra":U[ue]:ne,Y=w.transform?w.transform(Y,ne):Y);ne==="__parsed_extra"?(he[ne]=he[ne]||[],he[ne].push(Y)):he[ne]=Y}return w.header&&(ue>U.length?ae("FieldMismatch","TooManyFields","Too many fields: expected "+U.length+" fields but parsed "+ue,H+ce):ue<U.length&&ae("FieldMismatch","TooFewFields","Too few fields: expected "+U.length+" fields but parsed "+ue,H+ce)),he}var Z;z&&(w.header||w.dynamicTyping||w.transform)&&(Z=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(G),Z=z.data.length):z.data=G(z.data,0),w.header&&z.meta&&(z.meta.fields=U),H+=Z)}function le(){return w.header&&U.length===0}function ae(se,G,Z,X){se={type:se,code:G,message:Z},X!==void 0&&(se.row=X),z.errors.push(se)}L(w.step)&&(D=w.step,w.step=function(se){z=se,le()?ee():(ee(),z.data.length!==0&&(re+=se.data.length,w.preview&&re>w.preview?C.abort():(z.data=z.data[0],D(z,O))))}),this.parse=function(se,G,Z){var X=w.quoteChar||'"',X=(w.newline||(w.newline=this.guessLineEndings(se,X)),T=!1,w.delimiter?L(w.delimiter)&&(w.delimiter=w.delimiter(se),z.meta.delimiter=w.delimiter):((X=((ce,he,ue,ne,Y)=>{var ve,oe,ye,je;Y=Y||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var De=0;De<Y.length;De++){for(var _e,Ce=Y[De],Ee=0,fe=0,Re=0,Le=(ye=void 0,new k({comments:ne,delimiter:Ce,newline:he,preview:10}).parse(ce)),Oe=0;Oe<Le.data.length;Oe++)ue&&te(Le.data[Oe])?Re++:(_e=Le.data[Oe].length,fe+=_e,ye===void 0?ye=_e:0<_e&&(Ee+=Math.abs(_e-ye),ye=_e));0<Le.data.length&&(fe/=Le.data.length-Re),(oe===void 0||Ee<=oe)&&(je===void 0||je<fe)&&1.99<fe&&(oe=Ee,ve=Ce,je=fe)}return{successful:!!(w.delimiter=ve),bestDelimiter:ve}})(se,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess)).successful?w.delimiter=X.bestDelimiter:(T=!0,w.delimiter=u.DefaultDelimiter),z.meta.delimiter=w.delimiter),F(w));return w.preview&&w.header&&X.preview++,b=se,C=new k(X),z=C.parse(b,G,Z),ee(),pe?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return pe},this.pause=function(){pe=!0,C.abort(),b=L(w.chunk)?"":b.substring(C.getCharIndex())},this.resume=function(){O.streamer._halted?(pe=!1,O.streamer.parseChunk(b,!0)):setTimeout(O.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,C.abort(),z.meta.aborted=!0,L(w.complete)&&w.complete(z),b=""},this.guessLineEndings=function(ce,X){ce=ce.substring(0,1048576);var X=new RegExp(S(X)+"([^]*?)"+S(X),"gm"),Z=(ce=ce.replace(X,"")).split("\r"),X=ce.split(`
`),ce=1<X.length&&X[0].length<Z[0].length;if(Z.length===1||ce)return`
`;for(var he=0,ue=0;ue<Z.length;ue++)Z[ue][0]===`
`&&he++;return he>=Z.length/2?`\r
`:"\r"}}function S(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(w){var b=(w=w||{}).delimiter,C=w.newline,T=w.comments,D=w.step,B=w.preview,K=w.fastMode,ie=null,V=!1,O=w.quoteChar==null?'"':w.quoteChar,re=O;if(w.escapeChar!==void 0&&(re=w.escapeChar),(typeof b!="string"||-1<u.BAD_DELIMITERS.indexOf(b))&&(b=","),T===b)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<u.BAD_DELIMITERS.indexOf(T))&&(T=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var H=0,pe=!1;this.parse=function(J,U,z){if(typeof J!="string")throw new Error("Input must be a string");var te=J.length,ee=b.length,le=C.length,ae=T.length,se=L(D),G=[],Z=[],X=[],ce=H=0;if(!J)return Ee();if(K||K!==!1&&J.indexOf(O)===-1){for(var he=J.split(C),ue=0;ue<he.length;ue++){if(X=he[ue],H+=X.length,ue!==he.length-1)H+=C.length;else if(z)return Ee();if(!T||X.substring(0,ae)!==T){if(se){if(G=[],je(X.split(b)),fe(),pe)return Ee()}else je(X.split(b));if(B&&B<=ue)return G=G.slice(0,B),Ee(!0)}}return Ee()}for(var ne=J.indexOf(b,H),Y=J.indexOf(C,H),ve=new RegExp(S(re)+S(O),"g"),oe=J.indexOf(O,H);;)if(J[H]===O)for(oe=H,H++;;){if((oe=J.indexOf(O,oe+1))===-1)return z||Z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:G.length,index:H}),_e();if(oe===te-1)return _e(J.substring(H,oe).replace(ve,O));if(O===re&&J[oe+1]===re)oe++;else if(O===re||oe===0||J[oe-1]!==re){ne!==-1&&ne<oe+1&&(ne=J.indexOf(b,oe+1));var ye=De((Y=Y!==-1&&Y<oe+1?J.indexOf(C,oe+1):Y)===-1?ne:Math.min(ne,Y));if(J.substr(oe+1+ye,ee)===b){X.push(J.substring(H,oe).replace(ve,O)),J[H=oe+1+ye+ee]!==O&&(oe=J.indexOf(O,H)),ne=J.indexOf(b,H),Y=J.indexOf(C,H);break}if(ye=De(Y),J.substring(oe+1+ye,oe+1+ye+le)===C){if(X.push(J.substring(H,oe).replace(ve,O)),Ce(oe+1+ye+le),ne=J.indexOf(b,H),oe=J.indexOf(O,H),se&&(fe(),pe))return Ee();if(B&&G.length>=B)return Ee(!0);break}Z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:G.length,index:H}),oe++}}else if(T&&X.length===0&&J.substring(H,H+ae)===T){if(Y===-1)return Ee();H=Y+le,Y=J.indexOf(C,H),ne=J.indexOf(b,H)}else if(ne!==-1&&(ne<Y||Y===-1))X.push(J.substring(H,ne)),H=ne+ee,ne=J.indexOf(b,H);else{if(Y===-1)break;if(X.push(J.substring(H,Y)),Ce(Y+le),se&&(fe(),pe))return Ee();if(B&&G.length>=B)return Ee(!0)}return _e();function je(Re){G.push(Re),ce=H}function De(Re){var Le=0;return Le=Re!==-1&&(Re=J.substring(oe+1,Re))&&Re.trim()===""?Re.length:Le}function _e(Re){return z||(Re===void 0&&(Re=J.substring(H)),X.push(Re),H=te,je(X),se&&fe()),Ee()}function Ce(Re){H=Re,je(X),X=[],Y=J.indexOf(C,H)}function Ee(Re){if(w.header&&!U&&G.length&&!V){var Le=G[0],Oe={},gt=new Set(Le);let d=!1;for(let p=0;p<Le.length;p++){let v=Le[p];if(Oe[v=L(w.transformHeader)?w.transformHeader(v,p):v]){let M,I=Oe[v];for(;M=v+"_"+I,I++,gt.has(M););gt.add(M),Le[p]=M,Oe[v]++,d=!0,(ie=ie===null?{}:ie)[M]=v}else Oe[v]=1,Le[p]=v;gt.add(v)}d&&console.warn("Duplicate headers found and renamed."),V=!0}return{data:G,errors:Z,meta:{delimiter:b,linebreak:C,aborted:pe,truncated:!!Re,cursor:ce+(U||0),renamedHeaders:ie}}}function fe(){D(Ee()),G=[],Z=[]}},this.abort=function(){pe=!0},this.getCharIndex=function(){return H}}function R(w){var b=w.data,C=l[b.workerId],T=!1;if(b.error)C.userError(b.error,b.file);else if(b.results&&b.results.data){var D={abort:function(){T=!0,P(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:N,resume:N};if(L(C.userStep)){for(var B=0;B<b.results.data.length&&(C.userStep({data:b.results.data[B],errors:b.results.errors,meta:b.results.meta},D),!T);B++);delete b.results}else L(C.userChunk)&&(C.userChunk(b.results,D,b.file),delete b.results)}b.finished&&!T&&P(b.workerId,b.results)}function P(w,b){var C=l[w];L(C.userComplete)&&C.userComplete(b),C.terminate(),delete l[w]}function N(){throw new Error("Not implemented.")}function F(w){if(typeof w!="object"||w===null)return w;var b,C=Array.isArray(w)?[]:{};for(b in w)C[b]=F(w[b]);return C}function j(w,b){return function(){w.apply(b,arguments)}}function L(w){return typeof w=="function"}return u.parse=function(w,b){var C=(b=b||{}).dynamicTyping||!1;if(L(C)&&(b.dynamicTypingFunction=C,C={}),b.dynamicTyping=C,b.transform=!!L(b.transform)&&b.transform,!b.worker||!u.WORKERS_SUPPORTED)return C=null,u.NODE_STREAM_INPUT,typeof w=="string"?(w=(T=>T.charCodeAt(0)!==65279?T:T.slice(1))(w),C=new(b.download?f:y)(b)):w.readable===!0&&L(w.read)&&L(w.on)?C=new A(b):(n.File&&w instanceof File||w instanceof Object)&&(C=new g(b)),C.stream(w);(C=(()=>{var T;return!!u.WORKERS_SUPPORTED&&(T=(()=>{var D=n.URL||n.webkitURL||null,B=t.toString();return u.BLOB_URL||(u.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",B,")();"],{type:"text/javascript"})))})(),(T=new n.Worker(T)).onmessage=R,T.id=h++,l[T.id]=T)})()).userStep=b.step,C.userChunk=b.chunk,C.userComplete=b.complete,C.userError=b.error,b.step=L(b.step),b.chunk=L(b.chunk),b.complete=L(b.complete),b.error=L(b.error),delete b.worker,C.postMessage({input:w,config:b,workerId:C.id})},u.unparse=function(w,b){var C=!1,T=!0,D=",",B=`\r
`,K='"',ie=K+K,V=!1,O=null,re=!1,H=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||u.BAD_DELIMITERS.filter(function(U){return b.delimiter.indexOf(U)!==-1}).length||(D=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(C=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(V=b.skipEmptyLines),typeof b.newline=="string"&&(B=b.newline),typeof b.quoteChar=="string"&&(K=b.quoteChar),typeof b.header=="boolean"&&(T=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");O=b.columns}b.escapeChar!==void 0&&(ie=b.escapeChar+K),b.escapeFormulae instanceof RegExp?re=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(re=/^[=+\-@\t\r].*$/)}})(),new RegExp(S(K),"g"));if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return pe(null,w,V);if(typeof w[0]=="object")return pe(O||Object.keys(w[0]),w,V)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||O),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),pe(w.fields||[],w.data||[],V);throw new Error("Unable to serialize unrecognized input");function pe(U,z,te){var ee="",le=(typeof U=="string"&&(U=JSON.parse(U)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(U)&&0<U.length),ae=!Array.isArray(z[0]);if(le&&T){for(var se=0;se<U.length;se++)0<se&&(ee+=D),ee+=J(U[se],se);0<z.length&&(ee+=B)}for(var G=0;G<z.length;G++){var Z=(le?U:z[G]).length,X=!1,ce=le?Object.keys(z[G]).length===0:z[G].length===0;if(te&&!le&&(X=te==="greedy"?z[G].join("").trim()==="":z[G].length===1&&z[G][0].length===0),te==="greedy"&&le){for(var he=[],ue=0;ue<Z;ue++){var ne=ae?U[ue]:ue;he.push(z[G][ne])}X=he.join("").trim()===""}if(!X){for(var Y=0;Y<Z;Y++){0<Y&&!ce&&(ee+=D);var ve=le&&ae?U[Y]:Y;ee+=J(z[G][ve],Y)}G<z.length-1&&(!te||0<Z&&!ce)&&(ee+=B)}}return ee}function J(U,z){var te,ee;return U==null?"":U.constructor===Date?JSON.stringify(U).slice(1,25):(ee=!1,re&&typeof U=="string"&&re.test(U)&&(U="'"+U,ee=!0),te=U.toString().replace(H,ie),(ee=ee||C===!0||typeof C=="function"&&C(U,z)||Array.isArray(C)&&C[z]||((le,ae)=>{for(var se=0;se<ae.length;se++)if(-1<le.indexOf(ae[se]))return!0;return!1})(te,u.BAD_DELIMITERS)||-1<te.indexOf(D)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?K+te+K:te)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!r&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=k,u.ParserHandle=E,u.NetworkStreamer=f,u.FileStreamer=g,u.StringStreamer=y,u.ReadableStreamStreamer=A,n.jQuery&&((s=n.jQuery).fn.parse=function(w){var b=w.config||{},C=[];return this.each(function(B){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)C.push({file:this.files[K],inputElem:this,instanceConfig:s.extend({},b)})}),T(),this;function T(){if(C.length===0)L(w.complete)&&w.complete();else{var B,K,ie,V,O=C[0];if(L(w.before)){var re=w.before(O.file,O.inputElem);if(typeof re=="object"){if(re.action==="abort")return B="AbortError",K=O.file,ie=O.inputElem,V=re.reason,void(L(w.error)&&w.error({name:B},K,ie,V));if(re.action==="skip")return void D();typeof re.config=="object"&&(O.instanceConfig=s.extend(O.instanceConfig,re.config))}else if(re==="skip")return void D()}var H=O.instanceConfig.complete;O.instanceConfig.complete=function(pe){L(H)&&H(pe,O.file,O.inputElem),D()},u.parse(O.file,O.instanceConfig)}}function D(){C.splice(0,1),T()}}),a&&(n.onmessage=function(w){w=w.data,u.WORKER_ID===void 0&&w&&(u.WORKER_ID=w.workerId),typeof w.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(w.input,w.config),finished:!0}):(n.File&&w.input instanceof File||w.input instanceof Object)&&(w=u.parse(w.input,w.config))&&n.postMessage({workerId:u.WORKER_ID,results:w,finished:!0})}),(f.prototype=Object.create(c.prototype)).constructor=f,(g.prototype=Object.create(c.prototype)).constructor=g,(y.prototype=Object.create(y.prototype)).constructor=y,(A.prototype=Object.create(c.prototype)).constructor=A,u})}(rh)),rh.exports}var Y1=q1();const dv=B1(Y1),K1=50,X1=async i=>{const t=await(await fetch(i)).text(),s=dv.parse(t,{preview:K1,skipEmptyLines:!0,header:!0}).data;return dv.unparse(s,{header:!0})};var Q1=Object.defineProperty,Z1=(i,e,t)=>e in i?Q1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ae=(i,e,t)=>(Z1(i,typeof e!="symbol"?e+"":e,t),t),Cm=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},o=(i,e,t)=>(Cm(i,e,"read from private field"),t?t.call(i):e.get(i)),m=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},x=(i,e,t,n)=>(Cm(i,e,"write to private field"),e.set(i,t),t),ai=(i,e,t,n)=>({set _(s){x(i,e,s)},get _(){return o(i,e,n)}}),_=(i,e,t)=>(Cm(i,e,"access private method"),t),Ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ty(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function lI(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var Pa=function(i){return i&&i.Math===Math&&i},Oi=Pa(typeof globalThis=="object"&&globalThis)||Pa(typeof window=="object"&&window)||Pa(typeof self=="object"&&self)||Pa(typeof Ga=="object"&&Ga)||Pa(typeof Ga=="object"&&Ga)||function(){return this}()||Function("return this")(),Rm={},Qn=function(i){try{return!!i()}catch{return!0}},J1=Qn,Qs=!J1(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),eA=Qn,iy=!eA(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")}),tA=iy,Tl=Function.prototype.call,Mm=tA?Tl.bind(Tl):function(){return Tl.apply(Tl,arguments)},ny={},sy={}.propertyIsEnumerable,ry=Object.getOwnPropertyDescriptor,iA=ry&&!sy.call({1:2},1);ny.f=iA?function(i){var e=ry(this,i);return!!e&&e.enumerable}:sy;var ay=function(i,e){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:e}},oy=iy,ly=Function.prototype,Mf=ly.call,nA=oy&&ly.bind.bind(Mf,Mf),gn=oy?nA:function(i){return function(){return Mf.apply(i,arguments)}},hy=gn,sA=hy({}.toString),rA=hy("".slice),aA=function(i){return rA(sA(i),8,-1)},oA=gn,lA=Qn,hA=aA,jd=Object,cA=oA("".split),uA=lA(function(){return!jd("z").propertyIsEnumerable(0)})?function(i){return hA(i)==="String"?cA(i,""):jd(i)}:jd,cy=function(i){return i==null},dA=cy,fA=TypeError,uy=function(i){if(dA(i))throw new fA("Can't call method on "+i);return i},pA=uA,gA=uy,Tm=function(i){return pA(gA(i))},Wd=typeof document=="object"&&document.all,Ni=typeof Wd>"u"&&Wd!==void 0?function(i){return typeof i=="function"||i===Wd}:function(i){return typeof i=="function"},mA=Ni,od=function(i){return typeof i=="object"?i!==null:mA(i)},Bd=Oi,vA=Ni,yA=function(i){return vA(i)?i:void 0},dy=function(i,e){return arguments.length<2?yA(Bd[i]):Bd[i]&&Bd[i][e]},wA=gn,bA=wA({}.isPrototypeOf),AA=typeof navigator<"u"&&String(navigator.userAgent)||"",fy=Oi,Ud=AA,fv=fy.process,pv=fy.Deno,gv=fv&&fv.versions||pv&&pv.version,mv=gv&&gv.v8,fi,hu;mv&&(fi=mv.split("."),hu=fi[0]>0&&fi[0]<4?1:+(fi[0]+fi[1]));!hu&&Ud&&(fi=Ud.match(/Edge\/(\d+)/),(!fi||fi[1]>=74)&&(fi=Ud.match(/Chrome\/(\d+)/),fi&&(hu=+fi[1])));var _A=hu,vv=_A,xA=Qn,EA=Oi,SA=EA.String,py=!!Object.getOwnPropertySymbols&&!xA(function(){var i=Symbol("symbol detection");return!SA(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&vv&&vv<41}),kA=py,gy=kA&&!Symbol.sham&&typeof Symbol.iterator=="symbol",CA=dy,RA=Ni,MA=bA,TA=gy,PA=Object,my=TA?function(i){return typeof i=="symbol"}:function(i){var e=CA("Symbol");return RA(e)&&MA(e.prototype,PA(i))},LA=String,IA=function(i){try{return LA(i)}catch{return"Object"}},DA=Ni,OA=IA,NA=TypeError,vy=function(i){if(DA(i))return i;throw new NA(OA(i)+" is not a function")},FA=vy,jA=cy,WA=function(i,e){var t=i[e];return jA(t)?void 0:FA(t)},Hd=Mm,$d=Ni,zd=od,BA=TypeError,UA=function(i,e){var t,n;if(e==="string"&&$d(t=i.toString)&&!zd(n=Hd(t,i))||$d(t=i.valueOf)&&!zd(n=Hd(t,i))||e!=="string"&&$d(t=i.toString)&&!zd(n=Hd(t,i)))return n;throw new BA("Can't convert object to primitive value")},yy={exports:{}},yv=Oi,HA=Object.defineProperty,Pm=function(i,e){try{HA(yv,i,{value:e,configurable:!0,writable:!0})}catch{yv[i]=e}return e},$A=Oi,zA=Pm,wv="__core-js_shared__",bv=yy.exports=$A[wv]||zA(wv,{});(bv.versions||(bv.versions=[])).push({version:"3.37.1",mode:"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Lm=yy.exports,Av=Lm,wy=function(i,e){return Av[i]||(Av[i]=e||{})},VA=uy,GA=Object,qA=function(i){return GA(VA(i))},YA=gn,KA=qA,XA=YA({}.hasOwnProperty),Zs=Object.hasOwn||function(i,e){return XA(KA(i),e)},QA=gn,ZA=0,JA=Math.random(),e_=QA(1 .toString),by=function(i){return"Symbol("+(i===void 0?"":i)+")_"+e_(++ZA+JA,36)},t_=Oi,i_=wy,_v=Zs,n_=by,s_=py,r_=gy,Vr=t_.Symbol,Vd=i_("wks"),a_=r_?Vr.for||Vr:Vr&&Vr.withoutSetter||n_,o_=function(i){return _v(Vd,i)||(Vd[i]=s_&&_v(Vr,i)?Vr[i]:a_("Symbol."+i)),Vd[i]},l_=Mm,xv=od,Ev=my,h_=WA,c_=UA,u_=o_,d_=TypeError,f_=u_("toPrimitive"),p_=function(i,e){if(!xv(i)||Ev(i))return i;var t=h_(i,f_),n;if(t){if(e===void 0&&(e="default"),n=l_(t,i,e),!xv(n)||Ev(n))return n;throw new d_("Can't convert object to primitive value")}return e===void 0&&(e="number"),c_(i,e)},g_=p_,m_=my,Ay=function(i){var e=g_(i,"string");return m_(e)?e:e+""},v_=Oi,Sv=od,Tf=v_.document,y_=Sv(Tf)&&Sv(Tf.createElement),w_=function(i){return y_?Tf.createElement(i):{}},b_=Qs,A_=Qn,__=w_,_y=!b_&&!A_(function(){return Object.defineProperty(__("div"),"a",{get:function(){return 7}}).a!==7}),x_=Qs,E_=Mm,S_=ny,k_=ay,C_=Tm,R_=Ay,M_=Zs,T_=_y,kv=Object.getOwnPropertyDescriptor;Rm.f=x_?kv:function(i,e){if(i=C_(i),e=R_(e),T_)try{return kv(i,e)}catch{}if(M_(i,e))return k_(!E_(S_.f,i,e),i[e])};var ld={},P_=Qs,L_=Qn,I_=P_&&L_(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),D_=od,O_=String,N_=TypeError,xy=function(i){if(D_(i))return i;throw new N_(O_(i)+" is not an object")},F_=Qs,j_=_y,W_=I_,Pl=xy,Cv=Ay,B_=TypeError,Gd=Object.defineProperty,U_=Object.getOwnPropertyDescriptor,qd="enumerable",Yd="configurable",Kd="writable";ld.f=F_?W_?function(i,e,t){if(Pl(i),e=Cv(e),Pl(t),typeof i=="function"&&e==="prototype"&&"value"in t&&Kd in t&&!t[Kd]){var n=U_(i,e);n&&n[Kd]&&(i[e]=t.value,t={configurable:Yd in t?t[Yd]:n[Yd],enumerable:qd in t?t[qd]:n[qd],writable:!1})}return Gd(i,e,t)}:Gd:function(i,e,t){if(Pl(i),e=Cv(e),Pl(t),j_)try{return Gd(i,e,t)}catch{}if("get"in t||"set"in t)throw new B_("Accessors not supported");return"value"in t&&(i[e]=t.value),i};var H_=Qs,$_=ld,z_=ay,Ey=H_?function(i,e,t){return $_.f(i,e,z_(1,t))}:function(i,e,t){return i[e]=t,i},Sy={exports:{}},Pf=Qs,V_=Zs,ky=Function.prototype,G_=Pf&&Object.getOwnPropertyDescriptor,q_=V_(ky,"name"),Y_=q_&&(!Pf||Pf&&G_(ky,"name").configurable),K_={CONFIGURABLE:Y_},X_=gn,Q_=Ni,Lf=Lm,Z_=X_(Function.toString);Q_(Lf.inspectSource)||(Lf.inspectSource=function(i){return Z_(i)});var J_=Lf.inspectSource,ex=Oi,tx=Ni,Rv=ex.WeakMap,ix=tx(Rv)&&/native code/.test(String(Rv)),nx=wy,sx=by,Mv=nx("keys"),rx=function(i){return Mv[i]||(Mv[i]=sx(i))},Cy={},ax=ix,Ry=Oi,ox=Ey,Xd=Zs,Qd=Lm,lx=rx,hx=Cy,Tv="Object already initialized",Pv=Ry.TypeError,cx=Ry.WeakMap,If,cu,Df,ux=function(i){return Df(i)?cu(i):If(i,{})};if(ax||Qd.state){var gi=Qd.state||(Qd.state=new cx);gi.get=gi.get,gi.has=gi.has,gi.set=gi.set,If=function(i,e){if(gi.has(i))throw new Pv(Tv);return e.facade=i,gi.set(i,e),e},cu=function(i){return gi.get(i)||{}},Df=function(i){return gi.has(i)}}else{var nr=lx("state");hx[nr]=!0,If=function(i,e){if(Xd(i,nr))throw new Pv(Tv);return e.facade=i,ox(i,nr,e),e},cu=function(i){return Xd(i,nr)?i[nr]:{}},Df=function(i){return Xd(i,nr)}}var dx={get:cu,enforce:ux},Im=gn,fx=Qn,px=Ni,Ll=Zs,Of=Qs,gx=K_.CONFIGURABLE,mx=J_,My=dx,vx=My.enforce,yx=My.get,Lv=String,ah=Object.defineProperty,wx=Im("".slice),bx=Im("".replace),Ax=Im([].join),_x=Of&&!fx(function(){return ah(function(){},"length",{value:8}).length!==8}),xx=String(String).split("String"),Ex=Sy.exports=function(i,e,t){wx(Lv(e),0,7)==="Symbol("&&(e="["+bx(Lv(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!Ll(i,"name")||gx&&i.name!==e)&&(Of?ah(i,"name",{value:e,configurable:!0}):i.name=e),_x&&t&&Ll(t,"arity")&&i.length!==t.arity&&ah(i,"length",{value:t.arity});try{t&&Ll(t,"constructor")&&t.constructor?Of&&ah(i,"prototype",{writable:!1}):i.prototype&&(i.prototype=void 0)}catch{}var n=vx(i);return Ll(n,"source")||(n.source=Ax(xx,typeof e=="string"?e:"")),i};Function.prototype.toString=Ex(function(){return px(this)&&yx(this).source||mx(this)},"toString");var Sx=Sy.exports,kx=Ni,Cx=ld,Rx=Sx,Mx=Pm,Tx=function(i,e,t,n){n||(n={});var s=n.enumerable,r=n.name!==void 0?n.name:e;if(kx(t)&&Rx(t,r,n),n.global)s?i[e]=t:Mx(e,t);else{try{n.unsafe?i[e]&&(s=!0):delete i[e]}catch{}s?i[e]=t:Cx.f(i,e,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return i},Ty={},Px=Math.ceil,Lx=Math.floor,Ix=Math.trunc||function(i){var e=+i;return(e>0?Lx:Px)(e)},Dx=Ix,Py=function(i){var e=+i;return e!==e||e===0?0:Dx(e)},Ox=Py,Nx=Math.max,Fx=Math.min,jx=function(i,e){var t=Ox(i);return t<0?Nx(t+e,0):Fx(t,e)},Wx=Py,Bx=Math.min,Ux=function(i){var e=Wx(i);return e>0?Bx(e,9007199254740991):0},Hx=Ux,$x=function(i){return Hx(i.length)},zx=Tm,Vx=jx,Gx=$x,qx=function(i){return function(e,t,n){var s=zx(e),r=Gx(s);if(r===0)return!i&&-1;var a=Vx(n,r),l;if(i&&t!==t){for(;r>a;)if(l=s[a++],l!==l)return!0}else for(;r>a;a++)if((i||a in s)&&s[a]===t)return i||a||0;return!i&&-1}},Yx={indexOf:qx(!1)},Kx=gn,Zd=Zs,Xx=Tm,Qx=Yx.indexOf,Zx=Cy,Iv=Kx([].push),Jx=function(i,e){var t=Xx(i),n=0,s=[],r;for(r in t)!Zd(Zx,r)&&Zd(t,r)&&Iv(s,r);for(;e.length>n;)Zd(t,r=e[n++])&&(~Qx(s,r)||Iv(s,r));return s},eE=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],tE=Jx,iE=eE,nE=iE.concat("length","prototype");Ty.f=Object.getOwnPropertyNames||function(i){return tE(i,nE)};var Ly={};Ly.f=Object.getOwnPropertySymbols;var sE=dy,rE=gn,aE=Ty,oE=Ly,lE=xy,hE=rE([].concat),cE=sE("Reflect","ownKeys")||function(i){var e=aE.f(lE(i)),t=oE.f;return t?hE(e,t(i)):e},Dv=Zs,uE=cE,dE=Rm,fE=ld,pE=function(i,e,t){for(var n=uE(e),s=fE.f,r=dE.f,a=0;a<n.length;a++){var l=n[a];!Dv(i,l)&&!(t&&Dv(t,l))&&s(i,l,r(e,l))}},gE=Qn,mE=Ni,vE=/#|\.prototype\./,Al=function(i,e){var t=wE[yE(i)];return t===AE?!0:t===bE?!1:mE(e)?gE(e):!!e},yE=Al.normalize=function(i){return String(i).replace(vE,".").toLowerCase()},wE=Al.data={},bE=Al.NATIVE="N",AE=Al.POLYFILL="P",_E=Al,Il=Oi,xE=Rm.f,EE=Ey,SE=Tx,kE=Pm,CE=pE,RE=_E,ME=function(i,e){var t=i.target,n=i.global,s=i.stat,r,a,l,h,u,c;if(n?a=Il:s?a=Il[t]||kE(t,{}):a=Il[t]&&Il[t].prototype,a)for(l in e){if(u=e[l],i.dontCallGetSet?(c=xE(a,l),h=c&&c.value):h=a[l],r=RE(n?l:t+(s?".":"#")+l,i.forced),!r&&h!==void 0){if(typeof u==typeof h)continue;CE(u,h)}(i.sham||h&&h.sham)&&EE(u,"sham",!0),SE(a,l,u,i)}},Iy={},Ov=vy,TE=TypeError,PE=function(i){var e,t;this.promise=new i(function(n,s){if(e!==void 0||t!==void 0)throw new TE("Bad Promise constructor");e=n,t=s}),this.resolve=Ov(e),this.reject=Ov(t)};Iy.f=function(i){return new PE(i)};var LE=ME,IE=Iy;LE({target:"Promise",stat:!0},{withResolvers:function(){var i=IE.f(this);return{promise:i.promise,resolve:i.resolve,reject:i.reject}}});function DE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Dy={exports:{}},Ye=Dy.exports={},Si,ki;function Nf(){throw new Error("setTimeout has not been defined")}function Ff(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Si=setTimeout:Si=Nf}catch{Si=Nf}try{typeof clearTimeout=="function"?ki=clearTimeout:ki=Ff}catch{ki=Ff}})();function Oy(i){if(Si===setTimeout)return setTimeout(i,0);if((Si===Nf||!Si)&&setTimeout)return Si=setTimeout,setTimeout(i,0);try{return Si(i,0)}catch{try{return Si.call(null,i,0)}catch{return Si.call(this,i,0)}}}function OE(i){if(ki===clearTimeout)return clearTimeout(i);if((ki===Ff||!ki)&&clearTimeout)return ki=clearTimeout,clearTimeout(i);try{return ki(i)}catch{try{return ki.call(null,i)}catch{return ki.call(this,i)}}}var cn=[],la=!1,Ls,oh=-1;function NE(){!la||!Ls||(la=!1,Ls.length?cn=Ls.concat(cn):oh=-1,cn.length&&Ny())}function Ny(){if(!la){var i=Oy(NE);la=!0;for(var e=cn.length;e;){for(Ls=cn,cn=[];++oh<e;)Ls&&Ls[oh].run();oh=-1,e=cn.length}Ls=null,la=!1,OE(i)}}Ye.nextTick=function(i){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];cn.push(new Fy(i,e)),cn.length===1&&!la&&Oy(Ny)};function Fy(i,e){this.fun=i,this.array=e}Fy.prototype.run=function(){this.fun.apply(null,this.array)};Ye.title="browser";Ye.browser=!0;Ye.env={};Ye.argv=[];Ye.version="";Ye.versions={};function mn(){}Ye.on=mn;Ye.addListener=mn;Ye.once=mn;Ye.off=mn;Ye.removeListener=mn;Ye.removeAllListeners=mn;Ye.emit=mn;Ye.prependListener=mn;Ye.prependOnceListener=mn;Ye.listeners=function(i){return[]};Ye.binding=function(i){throw new Error("process.binding is not supported")};Ye.cwd=function(){return"/"};Ye.chdir=function(i){throw new Error("process.chdir is not supported")};Ye.umask=function(){return 0};var FE=Dy.exports;const be=DE(FE);var Rt=function(){return Rt=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s])}return i},Rt.apply(this,arguments)};function Vs(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}function jE(i){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=i(t)),e[t]}}var WE=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,BE=jE(function(i){return WE.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),ze="-ms-",Vo="-moz-",Ie="-webkit-",jy="comm",hd="rule",Dm="decl",UE="@import",Wy="@keyframes",HE="@layer",By=Math.abs,Om=String.fromCharCode,jf=Object.assign;function $E(i,e){return ht(i,0)^45?(((e<<2^ht(i,0))<<2^ht(i,1))<<2^ht(i,2))<<2^ht(i,3):0}function Uy(i){return i.trim()}function Qi(i,e){return(i=e.exec(i))?i[0]:i}function xe(i,e,t){return i.replace(e,t)}function lh(i,e,t){return i.indexOf(e,t)}function ht(i,e){return i.charCodeAt(e)|0}function Aa(i,e,t){return i.slice(e,t)}function Ti(i){return i.length}function Hy(i){return i.length}function qa(i,e){return e.push(i),i}function zE(i,e){return i.map(e).join("")}function Nv(i,e){return i.filter(function(t){return!Qi(t,e)})}var cd=1,_a=1,$y=0,oi=0,Ze=0,Ra="";function ud(i,e,t,n,s,r,a,l){return{value:i,root:e,parent:t,type:n,props:s,children:r,line:cd,column:_a,length:a,return:"",siblings:l}}function yn(i,e){return jf(ud("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},e)}function sr(i){for(;i.root;)i=yn(i.root,{children:[i]});qa(i,i.siblings)}function VE(){return Ze}function GE(){return Ze=oi>0?ht(Ra,--oi):0,_a--,Ze===10&&(_a=1,cd--),Ze}function pi(){return Ze=oi<$y?ht(Ra,oi++):0,_a++,Ze===10&&(_a=1,cd++),Ze}function Hs(){return ht(Ra,oi)}function hh(){return oi}function dd(i,e){return Aa(Ra,i,e)}function Wf(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qE(i){return cd=_a=1,$y=Ti(Ra=i),oi=0,[]}function YE(i){return Ra="",i}function Jd(i){return Uy(dd(oi-1,Bf(i===91?i+2:i===40?i+1:i)))}function KE(i){for(;(Ze=Hs())&&Ze<33;)pi();return Wf(i)>2||Wf(Ze)>3?"":" "}function XE(i,e){for(;--e&&pi()&&!(Ze<48||Ze>102||Ze>57&&Ze<65||Ze>70&&Ze<97););return dd(i,hh()+(e<6&&Hs()==32&&pi()==32))}function Bf(i){for(;pi();)switch(Ze){case i:return oi;case 34:case 39:i!==34&&i!==39&&Bf(Ze);break;case 40:i===41&&Bf(i);break;case 92:pi();break}return oi}function QE(i,e){for(;pi()&&i+Ze!==57&&!(i+Ze===84&&Hs()===47););return"/*"+dd(e,oi-1)+"*"+Om(i===47?i:pi())}function ZE(i){for(;!Wf(Hs());)pi();return dd(i,oi)}function JE(i){return YE(ch("",null,null,null,[""],i=qE(i),0,[0],i))}function ch(i,e,t,n,s,r,a,l,h){for(var u=0,c=0,f=a,g=0,y=0,A=0,E=1,S=1,k=1,R=0,P="",N=s,F=r,j=n,L=P;S;)switch(A=R,R=pi()){case 40:if(A!=108&&ht(L,f-1)==58){lh(L+=xe(Jd(R),"&","&\f"),"&\f",By(u?l[u-1]:0))!=-1&&(k=-1);break}case 34:case 39:case 91:L+=Jd(R);break;case 9:case 10:case 13:case 32:L+=KE(A);break;case 92:L+=XE(hh()-1,7);continue;case 47:switch(Hs()){case 42:case 47:qa(eS(QE(pi(),hh()),e,t,h),h);break;default:L+="/"}break;case 123*E:l[u++]=Ti(L)*k;case 125*E:case 59:case 0:switch(R){case 0:case 125:S=0;case 59+c:k==-1&&(L=xe(L,/\f/g,"")),y>0&&Ti(L)-f&&qa(y>32?jv(L+";",n,t,f-1,h):jv(xe(L," ","")+";",n,t,f-2,h),h);break;case 59:L+=";";default:if(qa(j=Fv(L,e,t,u,c,s,l,P,N=[],F=[],f,r),r),R===123)if(c===0)ch(L,e,j,j,N,r,f,l,F);else switch(g===99&&ht(L,3)===110?100:g){case 100:case 108:case 109:case 115:ch(i,j,j,n&&qa(Fv(i,j,j,0,0,s,l,P,s,N=[],f,F),F),s,F,f,l,n?N:F);break;default:ch(L,j,j,j,[""],F,0,l,F)}}u=c=y=0,E=k=1,P=L="",f=a;break;case 58:f=1+Ti(L),y=A;default:if(E<1){if(R==123)--E;else if(R==125&&E++==0&&GE()==125)continue}switch(L+=Om(R),R*E){case 38:k=c>0?1:(L+="\f",-1);break;case 44:l[u++]=(Ti(L)-1)*k,k=1;break;case 64:Hs()===45&&(L+=Jd(pi())),g=Hs(),c=f=Ti(P=L+=ZE(hh())),R++;break;case 45:A===45&&Ti(L)==2&&(E=0)}}return r}function Fv(i,e,t,n,s,r,a,l,h,u,c,f){for(var g=s-1,y=s===0?r:[""],A=Hy(y),E=0,S=0,k=0;E<n;++E)for(var R=0,P=Aa(i,g+1,g=By(S=a[E])),N=i;R<A;++R)(N=Uy(S>0?y[R]+" "+P:xe(P,/&\f/g,y[R])))&&(h[k++]=N);return ud(i,e,t,s===0?hd:l,h,u,c,f)}function eS(i,e,t,n){return ud(i,e,t,jy,Om(VE()),Aa(i,2,-2),0,n)}function jv(i,e,t,n,s){return ud(i,e,t,Dm,Aa(i,0,n),Aa(i,n+1,-1),n,s)}function zy(i,e,t){switch($E(i,e)){case 5103:return Ie+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ie+i+i;case 4789:return Vo+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return Ie+i+Vo+i+ze+i+i;case 5936:switch(ht(i,e+11)){case 114:return Ie+i+ze+xe(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return Ie+i+ze+xe(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return Ie+i+ze+xe(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return Ie+i+ze+i+i;case 6165:return Ie+i+ze+"flex-"+i+i;case 5187:return Ie+i+xe(i,/(\w+).+(:[^]+)/,Ie+"box-$1$2"+ze+"flex-$1$2")+i;case 5443:return Ie+i+ze+"flex-item-"+xe(i,/flex-|-self/g,"")+(Qi(i,/flex-|baseline/)?"":ze+"grid-row-"+xe(i,/flex-|-self/g,""))+i;case 4675:return Ie+i+ze+"flex-line-pack"+xe(i,/align-content|flex-|-self/g,"")+i;case 5548:return Ie+i+ze+xe(i,"shrink","negative")+i;case 5292:return Ie+i+ze+xe(i,"basis","preferred-size")+i;case 6060:return Ie+"box-"+xe(i,"-grow","")+Ie+i+ze+xe(i,"grow","positive")+i;case 4554:return Ie+xe(i,/([^-])(transform)/g,"$1"+Ie+"$2")+i;case 6187:return xe(xe(xe(i,/(zoom-|grab)/,Ie+"$1"),/(image-set)/,Ie+"$1"),i,"")+i;case 5495:case 3959:return xe(i,/(image-set\([^]*)/,Ie+"$1$`$1");case 4968:return xe(xe(i,/(.+:)(flex-)?(.*)/,Ie+"box-pack:$3"+ze+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ie+i+i;case 4200:if(!Qi(i,/flex-|baseline/))return ze+"grid-column-align"+Aa(i,e)+i;break;case 2592:case 3360:return ze+xe(i,"template-","")+i;case 4384:case 3616:return t&&t.some(function(n,s){return e=s,Qi(n.props,/grid-\w+-end/)})?~lh(i+(t=t[e].value),"span",0)?i:ze+xe(i,"-start","")+i+ze+"grid-row-span:"+(~lh(t,"span",0)?Qi(t,/\d+/):+Qi(t,/\d+/)-+Qi(i,/\d+/))+";":ze+xe(i,"-start","")+i;case 4896:case 4128:return t&&t.some(function(n){return Qi(n.props,/grid-\w+-start/)})?i:ze+xe(xe(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return xe(i,/(.+)-inline(.+)/,Ie+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ti(i)-1-e>6)switch(ht(i,e+1)){case 109:if(ht(i,e+4)!==45)break;case 102:return xe(i,/(.+:)(.+)-([^]+)/,"$1"+Ie+"$2-$3$1"+Vo+(ht(i,e+3)==108?"$3":"$2-$3"))+i;case 115:return~lh(i,"stretch",0)?zy(xe(i,"stretch","fill-available"),e,t)+i:i}break;case 5152:case 5920:return xe(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,a,l,h,u){return ze+s+":"+r+u+(a?ze+s+"-span:"+(l?h:+h-+r)+u:"")+i});case 4949:if(ht(i,e+6)===121)return xe(i,":",":"+Ie)+i;break;case 6444:switch(ht(i,ht(i,14)===45?18:11)){case 120:return xe(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ie+(ht(i,14)===45?"inline-":"")+"box$3$1"+Ie+"$2$3$1"+ze+"$2box$3")+i;case 100:return xe(i,":",":"+ze)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return xe(i,"scroll-","scroll-snap-")+i}return i}function uu(i,e){for(var t="",n=0;n<i.length;n++)t+=e(i[n],n,i,e)||"";return t}function tS(i,e,t,n){switch(i.type){case HE:if(i.children.length)break;case UE:case Dm:return i.return=i.return||i.value;case jy:return"";case Wy:return i.return=i.value+"{"+uu(i.children,n)+"}";case hd:if(!Ti(i.value=i.props.join(",")))return""}return Ti(t=uu(i.children,n))?i.return=i.value+"{"+t+"}":""}function iS(i){var e=Hy(i);return function(t,n,s,r){for(var a="",l=0;l<e;l++)a+=i[l](t,n,s,r)||"";return a}}function nS(i){return function(e){e.root||(e=e.return)&&i(e)}}function sS(i,e,t,n){if(i.length>-1&&!i.return)switch(i.type){case Dm:i.return=zy(i.value,i.length,t);return;case Wy:return uu([yn(i,{value:xe(i.value,"@","@"+Ie)})],n);case hd:if(i.length)return zE(t=i.props,function(s){switch(Qi(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":sr(yn(i,{props:[xe(s,/:(read-\w+)/,":"+Vo+"$1")]})),sr(yn(i,{props:[s]})),jf(i,{props:Nv(t,n)});break;case"::placeholder":sr(yn(i,{props:[xe(s,/:(plac\w+)/,":"+Ie+"input-$1")]})),sr(yn(i,{props:[xe(s,/:(plac\w+)/,":"+Vo+"$1")]})),sr(yn(i,{props:[xe(s,/:(plac\w+)/,ze+"input-$1")]})),sr(yn(i,{props:[s]})),jf(i,{props:Nv(t,n)});break}return""})}}var rS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gs=typeof be<"u"&&be.env!==void 0&&(be.env.REACT_APP_SC_ATTR||be.env.SC_ATTR)||"data-styled",Vy="active",Gy="data-styled-version",fd="6.1.11",Nm=`/*!sc*/
`,Fm=typeof window<"u"&&"HTMLElement"in window,aS=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof be<"u"&&be.env!==void 0&&be.env.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&be.env.REACT_APP_SC_DISABLE_SPEEDY!==""?be.env.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&be.env.REACT_APP_SC_DISABLE_SPEEDY:typeof be<"u"&&be.env!==void 0&&be.env.SC_DISABLE_SPEEDY!==void 0&&be.env.SC_DISABLE_SPEEDY!==""?be.env.SC_DISABLE_SPEEDY!=="false"&&be.env.SC_DISABLE_SPEEDY:be.env.NODE_ENV!=="production"),Wv=/invalid hook call/i,Dl=new Set,oS=function(i,e){if(be.env.NODE_ENV!=="production"){var t=e?' with the id of "'.concat(e,'"'):"",n="The component ".concat(i).concat(t,` has been created dynamically.
`)+`You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,s=console.error;try{var r=!0;console.error=function(a){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];Wv.test(a)?(r=!1,Dl.delete(n)):s.apply(void 0,Vs([a],l,!1))},q.useRef(),r&&!Dl.has(n)&&(console.warn(n),Dl.add(n))}catch(a){Wv.test(a.message)&&Dl.delete(n)}finally{console.error=s}}},pd=Object.freeze([]),xa=Object.freeze({});function lS(i,e,t){return t===void 0&&(t=xa),i.theme!==t.theme&&i.theme||e||t.theme}var Uf=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),hS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,cS=/(^-|-$)/g;function Bv(i){return i.replace(hS,"-").replace(cS,"")}var uS=/(a)(d)/gi,Ol=52,Uv=function(i){return String.fromCharCode(i+(i>25?39:97))};function Hf(i){var e,t="";for(e=Math.abs(i);e>Ol;e=e/Ol|0)t=Uv(e%Ol)+t;return(Uv(e%Ol)+t).replace(uS,"$1-$2")}var ef,qy=5381,xs=function(i,e){for(var t=e.length;t;)i=33*i^e.charCodeAt(--t);return i},Yy=function(i){return xs(qy,i)};function Ky(i){return Hf(Yy(i)>>>0)}function Xy(i){return be.env.NODE_ENV!=="production"&&typeof i=="string"&&i||i.displayName||i.name||"Component"}function tf(i){return typeof i=="string"&&(be.env.NODE_ENV==="production"||i.charAt(0)===i.charAt(0).toLowerCase())}var Qy=typeof Symbol=="function"&&Symbol.for,Zy=Qy?Symbol.for("react.memo"):60115,dS=Qy?Symbol.for("react.forward_ref"):60112,fS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Jy={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gS=((ef={})[dS]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ef[Zy]=Jy,ef);function Hv(i){return("type"in(e=i)&&e.type.$$typeof)===Zy?Jy:"$$typeof"in i?gS[i.$$typeof]:fS;var e}var mS=Object.defineProperty,vS=Object.getOwnPropertyNames,$v=Object.getOwnPropertySymbols,yS=Object.getOwnPropertyDescriptor,wS=Object.getPrototypeOf,zv=Object.prototype;function ew(i,e,t){if(typeof e!="string"){if(zv){var n=wS(e);n&&n!==zv&&ew(i,n,t)}var s=vS(e);$v&&(s=s.concat($v(e)));for(var r=Hv(i),a=Hv(e),l=0;l<s.length;++l){var h=s[l];if(!(h in pS||t&&t[h]||a&&h in a||r&&h in r)){var u=yS(e,h);try{mS(i,h,u)}catch{}}}}return i}function qs(i){return typeof i=="function"}function jm(i){return typeof i=="object"&&"styledComponentId"in i}function Is(i,e){return i&&e?"".concat(i," ").concat(e):i||e||""}function $f(i,e){if(i.length===0)return"";for(var t=i[0],n=1;n<i.length;n++)t+=i[n];return t}function Ea(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function zf(i,e,t){if(t===void 0&&(t=!1),!t&&!Ea(i)&&!Array.isArray(i))return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)i[n]=zf(i[n],e[n]);else if(Ea(e))for(var n in e)i[n]=zf(i[n],e[n]);return i}function Wm(i,e){Object.defineProperty(i,"toString",{value:e})}var bS=be.env.NODE_ENV!=="production"?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`,18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function AS(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var t=i[0],n=[],s=1,r=i.length;s<r;s+=1)n.push(i[s]);return n.forEach(function(a){t=t.replace(/%[a-z]/,a)}),t}function dn(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return be.env.NODE_ENV==="production"?new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):"")):new Error(AS.apply(void 0,Vs([bS[i]],e,!1)).trim())}var _S=function(){function i(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return i.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},i.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;e>=r;)if((r<<=1)<0)throw dn(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=s;a<r;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(e+1),h=(a=0,t.length);a<h;a++)this.tag.insertRule(l,t[a])&&(this.groupSizes[e]++,l++)},i.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),s=n+t;this.groupSizes[e]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var n=this.groupSizes[e],s=this.indexOfGroup(e),r=s+n,a=s;a<r;a++)t+="".concat(this.tag.getRule(a)).concat(Nm);return t},i}(),xS=1<<30,uh=new Map,du=new Map,dh=1,Nl=function(i){if(uh.has(i))return uh.get(i);for(;du.has(dh);)dh++;var e=dh++;if(be.env.NODE_ENV!=="production"&&((0|e)<0||e>xS))throw dn(16,"".concat(e));return uh.set(i,e),du.set(e,i),e},ES=function(i,e){dh=e+1,uh.set(i,e),du.set(e,i)},SS="style[".concat(Gs,"][").concat(Gy,'="').concat(fd,'"]'),kS=new RegExp("^".concat(Gs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),CS=function(i,e,t){for(var n,s=t.split(","),r=0,a=s.length;r<a;r++)(n=s[r])&&i.registerName(e,n)},RS=function(i,e){for(var t,n=((t=e.textContent)!==null&&t!==void 0?t:"").split(Nm),s=[],r=0,a=n.length;r<a;r++){var l=n[r].trim();if(l){var h=l.match(kS);if(h){var u=0|parseInt(h[1],10),c=h[2];u!==0&&(ES(c,u),CS(i,c,h[3]),i.getTag().insertRules(u,s)),s.length=0}else s.push(l)}}};function MS(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var tw=function(i){var e=document.head,t=i||e,n=document.createElement("style"),s=function(l){var h=Array.from(l.querySelectorAll("style[".concat(Gs,"]")));return h[h.length-1]}(t),r=s!==void 0?s.nextSibling:null;n.setAttribute(Gs,Vy),n.setAttribute(Gy,fd);var a=MS();return a&&n.setAttribute("nonce",a),t.insertBefore(n,r),n},TS=function(){function i(e){this.element=tw(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var a=n[s];if(a.ownerNode===t)return a}throw dn(17)}(this.element),this.length=0}return i.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},i.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},i}(),PS=function(){function i(e){this.element=tw(e),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},i.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},i}(),LS=function(){function i(e){this.rules=[],this.length=0}return i.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},i.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},i.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},i}(),Vv=Fm,IS={isServer:!Fm,useCSSOMInjection:!aS},iw=function(){function i(e,t,n){e===void 0&&(e=xa),t===void 0&&(t={});var s=this;this.options=Rt(Rt({},IS),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Fm&&Vv&&(Vv=!1,function(r){for(var a=document.querySelectorAll(SS),l=0,h=a.length;l<h;l++){var u=a[l];u&&u.getAttribute(Gs)!==Vy&&(RS(r,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),Wm(this,function(){return function(r){for(var a=r.getTag(),l=a.length,h="",u=function(f){var g=function(k){return du.get(k)}(f);if(g===void 0)return"continue";var y=r.names.get(g),A=a.getGroup(f);if(y===void 0||A.length===0)return"continue";var E="".concat(Gs,".g").concat(f,'[id="').concat(g,'"]'),S="";y!==void 0&&y.forEach(function(k){k.length>0&&(S+="".concat(k,","))}),h+="".concat(A).concat(E,'{content:"').concat(S,'"}').concat(Nm)},c=0;c<l;c++)u(c);return h}(s)})}return i.registerId=function(e){return Nl(e)},i.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new i(Rt(Rt({},this.options),e),this.gs,t&&this.names||void 0)},i.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var n=t.useCSSOMInjection,s=t.target;return t.isServer?new LS(s):n?new TS(s):new PS(s)}(this.options),new _S(e)));var e},i.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},i.prototype.registerName=function(e,t){if(Nl(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},i.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Nl(e),n)},i.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},i.prototype.clearRules=function(e){this.getTag().clearGroup(Nl(e)),this.clearNames(e)},i.prototype.clearTag=function(){this.tag=void 0},i}(),DS=/&/g,OS=/^\s*\/\/.*$/gm;function nw(i,e){return i.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(n){return"".concat(e," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=nw(t.children,e)),t})}function NS(i){var e,t,n,s=xa,r=s.options,a=r===void 0?xa:r,l=s.plugins,h=l===void 0?pd:l,u=function(g,y,A){return A.startsWith(t)&&A.endsWith(t)&&A.replaceAll(t,"").length>0?".".concat(e):g},c=h.slice();c.push(function(g){g.type===hd&&g.value.includes("&")&&(g.props[0]=g.props[0].replace(DS,t).replace(n,u))}),a.prefix&&c.push(sS),c.push(tS);var f=function(g,y,A,E){y===void 0&&(y=""),A===void 0&&(A=""),E===void 0&&(E="&"),e=E,t=y,n=new RegExp("\\".concat(t,"\\b"),"g");var S=g.replace(OS,""),k=JE(A||y?"".concat(A," ").concat(y," { ").concat(S," }"):S);a.namespace&&(k=nw(k,a.namespace));var R=[];return uu(k,iS(c.concat(nS(function(P){return R.push(P)})))),R};return f.hash=h.length?h.reduce(function(g,y){return y.name||dn(15),xs(g,y.name)},qy).toString():"",f}var FS=new iw,Vf=NS(),sw=zs.createContext({shouldForwardProp:void 0,styleSheet:FS,stylis:Vf});sw.Consumer;zs.createContext(void 0);function Gv(){return q.useContext(sw)}var Gf=function(){function i(e,t){var n=this;this.inject=function(s,r){r===void 0&&(r=Vf);var a=n.name+r.hash;s.hasNameForId(n.id,a)||s.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Wm(this,function(){throw dn(12,String(n.name))})}return i.prototype.getName=function(e){return e===void 0&&(e=Vf),this.name+e.hash},i}(),jS=function(i){return i>="A"&&i<="Z"};function qv(i){for(var e="",t=0;t<i.length;t++){var n=i[t];if(t===1&&n==="-"&&i[0]==="-")return i;jS(n)?e+="-"+n.toLowerCase():e+=n}return e.startsWith("ms-")?"-"+e:e}var rw=function(i){return i==null||i===!1||i===""},aw=function(i){var e,t,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!rw(r)&&(Array.isArray(r)&&r.isCss||qs(r)?n.push("".concat(qv(s),":"),r,";"):Ea(r)?n.push.apply(n,Vs(Vs(["".concat(s," {")],aw(r),!1),["}"],!1)):n.push("".concat(qv(s),": ").concat((e=s,(t=r)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in rS||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function $s(i,e,t,n){if(rw(i))return[];if(jm(i))return[".".concat(i.styledComponentId)];if(qs(i)){if(!qs(r=i)||r.prototype&&r.prototype.isReactComponent||!e)return[i];var s=i(e);return be.env.NODE_ENV==="production"||typeof s!="object"||Array.isArray(s)||s instanceof Gf||Ea(s)||s===null||console.error("".concat(Xy(i)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),$s(s,e,t,n)}var r;return i instanceof Gf?t?(i.inject(t,n),[i.getName(n)]):[i]:Ea(i)?aw(i):Array.isArray(i)?Array.prototype.concat.apply(pd,i.map(function(a){return $s(a,e,t,n)})):[i.toString()]}function WS(i){for(var e=0;e<i.length;e+=1){var t=i[e];if(qs(t)&&!jm(t))return!1}return!0}var BS=Yy(fd),US=function(){function i(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=be.env.NODE_ENV==="production"&&(n===void 0||n.isStatic)&&WS(e),this.componentId=t,this.baseHash=xs(BS,t),this.baseStyle=n,iw.registerId(t)}return i.prototype.generateAndInjectStyles=function(e,t,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))s=Is(s,this.staticRulesId);else{var r=$f($s(this.rules,e,t,n)),a=Hf(xs(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,a)){var l=n(r,".".concat(a),void 0,this.componentId);t.insertRules(this.componentId,a,l)}s=Is(s,a),this.staticRulesId=a}else{for(var h=xs(this.baseHash,n.hash),u="",c=0;c<this.rules.length;c++){var f=this.rules[c];if(typeof f=="string")u+=f,be.env.NODE_ENV!=="production"&&(h=xs(h,f));else if(f){var g=$f($s(f,e,t,n));h=xs(h,g+c),u+=g}}if(u){var y=Hf(h>>>0);t.hasNameForId(this.componentId,y)||t.insertRules(this.componentId,y,n(u,".".concat(y),void 0,this.componentId)),s=Is(s,y)}}return s},i}(),fu=zs.createContext(void 0);fu.Consumer;function HS(i){var e=zs.useContext(fu),t=q.useMemo(function(){return function(n,s){if(!n)throw dn(14);if(qs(n)){var r=n(s);if(be.env.NODE_ENV!=="production"&&(r===null||Array.isArray(r)||typeof r!="object"))throw dn(7);return r}if(Array.isArray(n)||typeof n!="object")throw dn(8);return s?Rt(Rt({},s),n):n}(i.theme,e)},[i.theme,e]);return i.children?zs.createElement(fu.Provider,{value:t},i.children):null}var nf={},Yv=new Set;function $S(i,e,t){var n=jm(i),s=i,r=!tf(i),a=e.attrs,l=a===void 0?pd:a,h=e.componentId,u=h===void 0?function(N,F){var j=typeof N!="string"?"sc":Bv(N);nf[j]=(nf[j]||0)+1;var L="".concat(j,"-").concat(Ky(fd+j+nf[j]));return F?"".concat(F,"-").concat(L):L}(e.displayName,e.parentComponentId):h,c=e.displayName,f=c===void 0?function(N){return tf(N)?"styled.".concat(N):"Styled(".concat(Xy(N),")")}(i):c,g=e.displayName&&e.componentId?"".concat(Bv(e.displayName),"-").concat(e.componentId):e.componentId||u,y=n&&s.attrs?s.attrs.concat(l).filter(Boolean):l,A=e.shouldForwardProp;if(n&&s.shouldForwardProp){var E=s.shouldForwardProp;if(e.shouldForwardProp){var S=e.shouldForwardProp;A=function(N,F){return E(N,F)&&S(N,F)}}else A=E}var k=new US(t,g,n?s.componentStyle:void 0);function R(N,F){return function(j,L,w){var b=j.attrs,C=j.componentStyle,T=j.defaultProps,D=j.foldedComponentIds,B=j.styledComponentId,K=j.target,ie=zs.useContext(fu),V=Gv(),O=j.shouldForwardProp||V.shouldForwardProp;be.env.NODE_ENV!=="production"&&q.useDebugValue(B);var re=lS(L,ie,T)||xa,H=function(ee,le,ae){for(var se,G=Rt(Rt({},le),{className:void 0,theme:ae}),Z=0;Z<ee.length;Z+=1){var X=qs(se=ee[Z])?se(G):se;for(var ce in X)G[ce]=ce==="className"?Is(G[ce],X[ce]):ce==="style"?Rt(Rt({},G[ce]),X[ce]):X[ce]}return le.className&&(G.className=Is(G.className,le.className)),G}(b,L,re),pe=H.as||K,J={};for(var U in H)H[U]===void 0||U[0]==="$"||U==="as"||U==="theme"&&H.theme===re||(U==="forwardedAs"?J.as=H.forwardedAs:O&&!O(U,pe)||(J[U]=H[U],O||be.env.NODE_ENV!=="development"||BE(U)||Yv.has(U)||!Uf.has(pe)||(Yv.add(U),console.warn('styled-components: it looks like an unknown prop "'.concat(U,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var z=function(ee,le){var ae=Gv(),se=ee.generateAndInjectStyles(le,ae.styleSheet,ae.stylis);return be.env.NODE_ENV!=="production"&&q.useDebugValue(se),se}(C,H);be.env.NODE_ENV!=="production"&&j.warnTooManyClasses&&j.warnTooManyClasses(z);var te=Is(D,B);return z&&(te+=" "+z),H.className&&(te+=" "+H.className),J[tf(pe)&&!Uf.has(pe)?"class":"className"]=te,J.ref=w,q.createElement(pe,J)}(P,N,F)}R.displayName=f;var P=zs.forwardRef(R);return P.attrs=y,P.componentStyle=k,P.displayName=f,P.shouldForwardProp=A,P.foldedComponentIds=n?Is(s.foldedComponentIds,s.styledComponentId):"",P.styledComponentId=g,P.target=n?s.target:i,Object.defineProperty(P,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(N){this._foldedDefaultProps=n?function(F){for(var j=[],L=1;L<arguments.length;L++)j[L-1]=arguments[L];for(var w=0,b=j;w<b.length;w++)zf(F,b[w],!0);return F}({},s.defaultProps,N):N}}),be.env.NODE_ENV!=="production"&&(oS(f,g),P.warnTooManyClasses=function(N,F){var j={},L=!1;return function(w){if(!L&&(j[w]=!0,Object.keys(j).length>=200)){var b=F?' with the id of "'.concat(F,'"'):"";console.warn("Over ".concat(200," classes were generated for component ").concat(N).concat(b,`.
`)+`Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),L=!0,j={}}}}(f,g)),Wm(P,function(){return".".concat(P.styledComponentId)}),r&&ew(P,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),P}function Kv(i,e){for(var t=[i[0]],n=0,s=e.length;n<s;n+=1)t.push(e[n],i[n+1]);return t}var Xv=function(i){return Object.assign(i,{isCss:!0})};function gd(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(qs(i)||Ea(i))return Xv($s(Kv(pd,Vs([i],e,!0))));var n=i;return e.length===0&&n.length===1&&typeof n[0]=="string"?$s(n):Xv($s(Kv(n,e)))}function qf(i,e,t){if(t===void 0&&(t=xa),!e)throw dn(1,e);var n=function(s){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return i(e,t,gd.apply(void 0,Vs([s],r,!1)))};return n.attrs=function(s){return qf(i,e,Rt(Rt({},t),{attrs:Array.prototype.concat(t.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return qf(i,e,Rt(Rt({},t),s))},n}var ow=function(i){return qf($S,i)},ke=ow;Uf.forEach(function(i){ke[i]=ow(i)});function zS(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];be.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn("`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.");var n=$f(gd.apply(void 0,Vs([i],e,!1))),s=Ky(n);return new Gf(s,n)}be.env.NODE_ENV!=="production"&&typeof navigator<"u"&&navigator.product==="ReactNative"&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`);var Fl="__sc-".concat(Gs,"__");be.env.NODE_ENV!=="production"&&be.env.NODE_ENV!=="test"&&typeof window<"u"&&(window[Fl]||(window[Fl]=0),window[Fl]===1&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window[Fl]+=1);const VS="Document {{ currentFileNo }} of {{ allFilesCount }}",GS="No renderer for file type: {{{ fileType }}}",qS="Download file",YS="Your file is broken. Please check it on your machine.",KS="Recipients",XS="Sender",QS="Loading...",ZS="Page {{ currentPage }}/{{ allPagesCount }}",JS={documentNavInfo:VS,noRendererMessage:GS,downloadButtonLabel:qS,brokenFile:YS,msgPluginRecipients:KS,msgPluginSender:XS,pdfPluginLoading:QS,pdfPluginPageNumber:ZS},ek="Dokument {{ currentFileNo }} z {{ allFilesCount }}",tk="Brak funckji renderujÄcej dla: {{{ fileType }}}",ik="Pobierz plik",nk="TwÃ³j plik jest uszkodzony. SprawdÅº go na swoim komputerze.",sk="Odbiorcy",rk="Nadawca",ak="Wczytywanie...",ok="Strona {{ currentPage }}/{{ allPagesCount }}",lk={documentNavInfo:ek,noRendererMessage:tk,downloadButtonLabel:ik,brokenFile:nk,msgPluginRecipients:sk,msgPluginSender:rk,pdfPluginLoading:ak,pdfPluginPageNumber:ok},hk="Documento {{ currentFileNo }} de {{ allFilesCount }}",ck="No hay procesador para el tipo de archivo: {{{ fileType }}}",uk="Descargar archivo",dk="Tu archivo estÃ¡ roto. CompruÃ©balo en tu mÃ¡quina.",fk="Destinatarios",pk="Remitente",gk="Cargando...",mk="PÃ¡gina {{ currentPage }}/{{ allPagesCount }}",vk={documentNavInfo:hk,noRendererMessage:ck,downloadButtonLabel:uk,brokenFile:dk,msgPluginRecipients:fk,msgPluginSender:pk,pdfPluginLoading:gk,pdfPluginPageNumber:mk},yk="Dokument {{ currentFileNo }} von {{ allFilesCount }}",wk="Kein Renderer fÃ¼r Dateityp: {{{ fileType }}}",bk="Datei herunterladen",Ak="Ihre Datei ist defekt. Bitte Ã¼berprÃ¼fen Sie sie auf Ihrem Rechner.",_k="EmpfÃ¤nger",xk="Absender",Ek="Wird geladen...",Sk="Seite {{ currentPage }}/{{ allPagesCount }}",kk={documentNavInfo:yk,noRendererMessage:wk,downloadButtonLabel:bk,brokenFile:Ak,msgPluginRecipients:_k,msgPluginSender:xk,pdfPluginLoading:Ek,pdfPluginPageNumber:Sk},Ck="Documento {{ currentFileNo }} di {{ allFilesCount }}",Rk="Nessun renderer per il tipo di file: {{{ fileType }}}",Mk="Scarica file",Tk="Il tuo file Ã¨ danneggiato. Controllalo sul tuo computer.",Pk="Destinatari",Lk="Mittente",Ik="Caricamento in corso...",Dk="Pagina {{ currentPage }}/{{ allPagesCount }}",Ok={documentNavInfo:Ck,noRendererMessage:Rk,downloadButtonLabel:Mk,brokenFile:Tk,msgPluginRecipients:Pk,msgPluginSender:Lk,pdfPluginLoading:Ik,pdfPluginPageNumber:Dk},Nk="Documento {{ currentFileNo }} de {{ allFilesCount }}",Fk="Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",jk="Baixar arquivo",Wk="Seu arquivo estÃ¡ quebrado. Por favor, verifique-o em sua mÃ¡quina.",Bk="DestinatÃ¡rios",Uk="Remetente",Hk="Carregando...",$k="PÃ¡gina {{ currentPage }}/{{ allPagesCount }}",zk={documentNavInfo:Nk,noRendererMessage:Fk,downloadButtonLabel:jk,brokenFile:Wk,msgPluginRecipients:Bk,msgPluginSender:Uk,pdfPluginLoading:Hk,pdfPluginPageNumber:$k},Vk="Document {{ currentFileNo }} de {{ allFilesCount }}",Gk="Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",qk="TÃ©lÃ©charger le fichier",Yk="Votre fichier est cassÃ©. Veuillez le vÃ©rifier sur votre machine.",Kk="Destinataires",Xk="ExpÃ©diteur",Qk="Chargement...",Zk="Page {{ currentPage }}/{{ allPagesCount }}",Jk={documentNavInfo:Vk,noRendererMessage:Gk,downloadButtonLabel:qk,brokenFile:Yk,msgPluginRecipients:Kk,msgPluginSender:Xk,pdfPluginLoading:Qk,pdfPluginPageNumber:Zk},eC="ÙØ³ØªÙØ¯ {{ currentFileNo }} ÙÙ {{ allFilesCount }}",tC="{{{ fileType }}} : ÙØ§ ÙÙÙÙÙØ§ Ø¹Ø±Ø¶ ÙØ°Ø§ Ø§ÙÙÙØ¹ ÙÙ Ø§ÙÙÙÙØ§Øª",iC="ØªØ­ÙÙÙ Ø§ÙÙÙÙ",nC="Ø§ÙÙÙÙ ØªØ§ÙÙØ ÙØ±Ø¬Ù Ø§ÙØªØ­ÙÙ ÙÙÙ Ø¹ÙÙ Ø¬ÙØ§Ø²Ù Ø§ÙØ®Ø§Øµ.",sC="Ø§ÙÙØ³ØªÙÙÙÙ",rC="Ø§ÙÙØ±Ø³Ù",aC="ØªØ­ÙÙÙ ...",oC=" {{ allPagesCount }} \\ {{ currentPage }} ØµÙØ­Ø© ",lC={documentNavInfo:eC,noRendererMessage:tC,downloadButtonLabel:iC,brokenFile:nC,msgPluginRecipients:sC,msgPluginSender:rC,pdfPluginLoading:aC,pdfPluginPageNumber:oC},hC="Dokument {{ currentFileNo }} od {{ allFilesCount }}",cC="Ne postoji pregledaÄ za tip fajla: {{ fileType }}",uC="Preuzimanje fajla",dC="VaÅ¡ fajl nije dobar. Molimo Vas da probate da ga otvorite na vaÅ¡em raÄunaru.",fC="Primaoci",pC="PoÅ¡iljalac",gC="UÄitavanje...",mC="Strana {{ currentPage }}/{{ allPagesCount }}",vC={documentNavInfo:hC,noRendererMessage:cC,downloadButtonLabel:uC,brokenFile:dC,msgPluginRecipients:fC,msgPluginSender:pC,pdfPluginLoading:gC,pdfPluginPageNumber:mC},yC="ÐÐ¾ÐºÑÐ¼ÐµÐ½Ñ {{ currentFileNo }} od {{ allFilesCount }}",wC="ÐÐµ Ð¿Ð¾ÑÑÐ¾ÑÐ¸ Ð¿ÑÐµÐ³Ð»ÐµÐ´Ð°Ñ Ð·Ð° ÑÐ¸Ð¿ ÑÐ°ÑÐ»Ð°: {{ fileType }}",bC="ÐÑÐµÑÐ·Ð¸Ð¼Ð°ÑÐµ ÑÐ°ÑÐ»Ð°",AC="ÐÐ°Ñ ÑÐ°ÑÐ» Ð½Ð¸ÑÐµ Ð´Ð¾Ð±Ð°Ñ. ÐÐ¾Ð»Ð¸Ð¼Ð¾ ÐÐ°Ñ Ð´Ð° Ð¿ÑÐ¾Ð±Ð°ÑÐµ Ð´Ð° Ð³Ð° Ð¾ÑÐ²Ð¾ÑÐ¸ÑÐµ Ð½Ð° Ð²Ð°ÑÐµÐ¼ ÑÐ°ÑÑÐ½Ð°ÑÑ.",_C="ÐÑÐ¸Ð¼Ð°Ð¾ÑÐ¸",xC="ÐÐ¾ÑÐ¸ÑÐ°Ð»Ð°Ñ",EC="Ð£ÑÐ¸ÑÐ°Ð²Ð°ÑÐµ...",SC="Ð¡ÑÑÐ°Ð½Ð° {{ currentPage }}/{{ allPagesCount }}",kC={documentNavInfo:yC,noRendererMessage:wC,downloadButtonLabel:bC,brokenFile:AC,msgPluginRecipients:_C,msgPluginSender:xC,pdfPluginLoading:EC,pdfPluginPageNumber:SC},CC="ãã¡ã¤ã« {{ currentFileNo }} / {{ allFilesCount }}",RC="ãã¡ã¤ã«ã¿ã¤ãã«å¯¾å¿ããã¬ã³ãã©ã¼ã¯ããã¾ãã: {{ fileType }}",MC="ãã¦ã³ã­ã¼ã",TC="ãã¡ã¤ã«ãå£ãã¦ãã¾ããããªãã®ãã·ã³ã§ãã¡ã¤ã«ãç¢ºèªãã¦ãã ããã",PC="åä¿¡è",LC="éä¿¡è",IC="ã­ã¼ãã£ã³ã°ä¸­...",DC="ãã¼ã¸ {{ currentPage }}/{{ allPagesCount }}",OC={documentNavInfo:CC,noRendererMessage:RC,downloadButtonLabel:MC,brokenFile:TC,msgPluginRecipients:PC,msgPluginSender:LC,pdfPluginLoading:IC,pdfPluginPageNumber:DC},NC="ÐÐ¾ÐºÑÐ¼ÐµÐ½Ñ {{ currentFileNo }} Ð¸Ð· {{ allFilesCount }}",FC="ÐÐ°Ð½Ð½ÑÐ¹ ÑÐ¸Ð¿ ÑÐ°Ð¹Ð»Ð° Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÑÑÑ ÑÐµÐ½Ð´ÐµÑÐ¾Ð¼: {{{ fileType }}}",jC="Ð¡ÐºÐ°ÑÐ°ÑÑ ÑÐ°Ð¹Ð»",WC="ÐÐ°Ñ ÑÐ°Ð¹Ð» ÑÐ»Ð¾Ð¼Ð°Ð½. ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ°, Ð¿ÑÐ¾Ð²ÐµÑÑÑÐµ ÐµÐ³Ð¾ Ð½Ð° ÑÐ²Ð¾ÑÐ¼ ÐºÐ¾Ð¼ÑÑÑÐµÑÐµ.",BC="ÐÐ¾Ð»ÑÑÐ°ÑÐµÐ»Ð¸",UC="ÐÑÐ¿ÑÐ°Ð²Ð¸ÑÐµÐ»Ñ",HC="ÐÐ°Ð³ÑÑÐ·ÐºÐ°...",$C="Ð¡ÑÑÐ°Ð½Ð¸ÑÐ° {{ currentPage }}/{{ allPagesCount }}",zC={documentNavInfo:NC,noRendererMessage:FC,downloadButtonLabel:jC,brokenFile:WC,msgPluginRecipients:BC,msgPluginSender:UC,pdfPluginLoading:HC,pdfPluginPageNumber:$C},VC="Dokument {{ currentFileNo }} av {{ allFilesCount }}",GC="Ingen renderare fÃ¶r filtypen: {{{ fileType }}}",qC="Ladda ner",YC="Filen Ã¤r trasig. Var vÃ¤nlig kontrollera den pÃ¥ din maskin.",KC="Mottagare",XC="AvsÃ¤ndare",QC="Laddar...",ZC="Sida {{ currentPage }}/{{ allPagesCount }}",JC={documentNavInfo:VC,noRendererMessage:GC,downloadButtonLabel:qC,brokenFile:YC,msgPluginRecipients:KC,msgPluginSender:XC,pdfPluginLoading:QC,pdfPluginPageNumber:ZC},Yf={en:JS,pl:lk,es:vk,de:kk,it:Ok,pt:zk,fr:Jk,ar:lC,sr:vC,sr_cyr:kC,ja:OC,ru:zC,se:JC},Bm="en",lw="SET_ALL_DOCUMENTS",hw="SET_DOCUMENT_LOADING",cw="NEXT_DOCUMENT",uw="PREVIOUS_DOCUMENT",dw="UPDATE_CURRENT_DOCUMENT",fw="SET_RENDERER_RECT",pw="SET_MAIN_CONFIG",eR=(i,e)=>({type:lw,documents:i,initialActiveDocument:e}),sf=i=>({type:hw,value:i}),Um=()=>({type:cw}),Hm=()=>({type:uw}),Kf=i=>({type:dw,document:i}),tR=i=>({type:fw,rect:i}),iR=i=>({type:pw,config:i}),pu={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:Bm},nR=(i=pu,e)=>{switch(e.type){case lw:{const{documents:t,initialActiveDocument:n}=e;return{...i,documents:t,currentDocument:n||t[0]||null,currentFileNo:n&&t.includes(n)?t.indexOf(n):pu.currentFileNo}}case hw:{const{value:t}=e;return{...i,documentLoading:t}}case cw:{if(i.currentFileNo>=i.documents.length-1)return i;const t=i.currentFileNo+1;return i.onDocumentChange&&i.onDocumentChange(i.documents[t]),{...i,currentFileNo:t,currentDocument:i.documents[t],documentLoading:!0}}case uw:{if(i.currentFileNo<=0)return i;const t=i.currentFileNo-1;return i.onDocumentChange&&i.onDocumentChange(i.documents[t]),{...i,currentFileNo:i.currentFileNo-1,currentDocument:i.documents[t],documentLoading:!0}}case dw:{const{document:t}=e;return{...i,currentDocument:t,currentFileNo:i.documents.findIndex(n=>n.uri===t.uri)}}case fw:{const{rect:t}=e;return{...i,rendererRect:t}}case pw:{const{config:t}=e;return{...i,config:t}}default:return i}},Zn=q.createContext({state:pu,dispatch:()=>null}),sR=q.forwardRef((i,e)=>{const{children:t,documents:n,config:s,pluginRenderers:r,prefetchMethod:a,requestHeaders:l,initialActiveDocument:h,language:u,activeDocument:c,onDocumentChange:f}=i,[g,y]=q.useReducer(nR,{...pu,documents:n||[],currentDocument:n&&n.length?h||n[0]:void 0,config:s,pluginRenderers:r,prefetchMethod:a,requestHeaders:l,currentFileNo:h?n.findIndex(A=>A===h)??0:0,language:u&&Yf[u]?u:Bm,activeDocument:c,onDocumentChange:f});return q.useEffect(()=>{y(eR(n,h)),s&&y(iR(s))},[n,s,h]),q.useEffect(()=>{c&&y(Kf(c))},[c]),q.useImperativeHandle(e,()=>({prev(){y(Hm())},next(){y(Um())}}),[y]),W.jsx(Zn.Provider,{value:{state:g,dispatch:y},children:t})}),rR=gd`
  background-color: ${i=>i.theme.primary};
  color: ${i=>i.theme.textPrimary};
`,aR=gd`
  background-color: ${i=>i.theme.secondary};
  color: ${i=>i.theme.textSecondary};
`,md=ke.button`
  ${rR}
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: ${i=>i.disabled?.4:1};
  pointer-events: ${i=>i.disabled?"none":"all"};
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`,gw=ke.a`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: ${i=>i.theme.primary};
  color: ${i=>i.theme.textPrimary};
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`;ke(md)``;const oR=ke(md)`
  ${aR}
`,lR=i=>W.jsx(mw,{...i}),hR=i=>W.jsx(mw,{...i,reverse:!0}),mw=({color:i,size:e,reverse:t})=>W.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${t?"rotate(180deg)":""}`},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:W.jsx("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:i||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})}),cR=i=>{const{color:e,size:t}=i;return W.jsx("svg",{width:t||"100%",height:t||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:W.jsxs("g",{children:[W.jsx("path",{fill:e||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),W.jsx("path",{fill:e||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),W.jsx("path",{fill:e||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),W.jsx("path",{fill:e||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),W.jsx("path",{fill:e||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),W.jsx("path",{fill:e||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),W.jsx("path",{fill:e||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),W.jsx("path",{fill:e||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})]})})};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var uR=Object.prototype.toString,Ma=Array.isArray||function(i){return uR.call(i)==="[object Array]"};function $m(i){return typeof i=="function"}function dR(i){return Ma(i)?"array":typeof i}function rf(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Qv(i,e){return i!=null&&typeof i=="object"&&e in i}function fR(i,e){return i!=null&&typeof i!="object"&&i.hasOwnProperty&&i.hasOwnProperty(e)}var pR=RegExp.prototype.test;function gR(i,e){return pR.call(i,e)}var mR=/\S/;function vR(i){return!gR(mR,i)}var yR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function wR(i){return String(i).replace(/[&<>"'`=\/]/g,function(e){return yR[e]})}var bR=/\s*/,AR=/\s+/,Zv=/\s*=/,_R=/\s*\}/,xR=/#|\^|\/|>|\{|&|=|!/;function ER(i,e){if(!i)return[];var t=!1,n=[],s=[],r=[],a=!1,l=!1,h="",u=0;function c(){if(a&&!l)for(;r.length;)delete s[r.pop()];else r=[];a=!1,l=!1}var f,g,y;function A(w){if(typeof w=="string"&&(w=w.split(AR,2)),!Ma(w)||w.length!==2)throw new Error("Invalid tags: "+w);f=new RegExp(rf(w[0])+"\\s*"),g=new RegExp("\\s*"+rf(w[1])),y=new RegExp("\\s*"+rf("}"+w[1]))}A(e||Yt.tags);for(var E=new _l(i),S,k,R,P,N,F;!E.eos();){if(S=E.pos,R=E.scanUntil(f),R)for(var j=0,L=R.length;j<L;++j)P=R.charAt(j),vR(P)?(r.push(s.length),h+=P):(l=!0,t=!0,h+=" "),s.push(["text",P,S,S+1]),S+=1,P===`
`&&(c(),h="",u=0,t=!1);if(!E.scan(f))break;if(a=!0,k=E.scan(xR)||"name",E.scan(bR),k==="="?(R=E.scanUntil(Zv),E.scan(Zv),E.scanUntil(g)):k==="{"?(R=E.scanUntil(y),E.scan(_R),E.scanUntil(g),k="&"):R=E.scanUntil(g),!E.scan(g))throw new Error("Unclosed tag at "+E.pos);if(k==">"?N=[k,R,S,E.pos,h,u,t]:N=[k,R,S,E.pos],u++,s.push(N),k==="#"||k==="^")n.push(N);else if(k==="/"){if(F=n.pop(),!F)throw new Error('Unopened section "'+R+'" at '+S);if(F[1]!==R)throw new Error('Unclosed section "'+F[1]+'" at '+S)}else k==="name"||k==="{"||k==="&"?l=!0:k==="="&&A(R)}if(c(),F=n.pop(),F)throw new Error('Unclosed section "'+F[1]+'" at '+E.pos);return kR(SR(s))}function SR(i){for(var e=[],t,n,s=0,r=i.length;s<r;++s)t=i[s],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function kR(i){for(var e=[],t=e,n=[],s,r,a=0,l=i.length;a<l;++a)switch(s=i[a],s[0]){case"#":case"^":t.push(s),n.push(s),t=s[4]=[];break;case"/":r=n.pop(),r[5]=s[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(s)}return e}function _l(i){this.string=i,this.tail=i,this.pos=0}_l.prototype.eos=function(){return this.tail===""};_l.prototype.scan=function(i){var e=this.tail.match(i);if(!e||e.index!==0)return"";var t=e[0];return this.tail=this.tail.substring(t.length),this.pos+=t.length,t};_l.prototype.scanUntil=function(i){var e=this.tail.search(i),t;switch(e){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=t.length,t};function Sa(i,e){this.view=i,this.cache={".":this.view},this.parent=e}Sa.prototype.push=function(i){return new Sa(i,this)};Sa.prototype.lookup=function(i){var e=this.cache,t;if(e.hasOwnProperty(i))t=e[i];else{for(var n=this,s,r,a,l=!1;n;){if(i.indexOf(".")>0)for(s=n.view,r=i.split("."),a=0;s!=null&&a<r.length;)a===r.length-1&&(l=Qv(s,r[a])||fR(s,r[a])),s=s[r[a++]];else s=n.view[i],l=Qv(n.view,i);if(l){t=s;break}n=n.parent}e[i]=t}return $m(t)&&(t=t.call(this.view)),t};function It(){this.templateCache={_cache:{},set:function(i,e){this._cache[i]=e},get:function(i){return this._cache[i]},clear:function(){this._cache={}}}}It.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};It.prototype.parse=function(i,e){var t=this.templateCache,n=i+":"+(e||Yt.tags).join(":"),s=typeof t<"u",r=s?t.get(n):void 0;return r==null&&(r=ER(i,e),s&&t.set(n,r)),r};It.prototype.render=function(i,e,t,n){var s=this.getConfigTags(n),r=this.parse(i,s),a=e instanceof Sa?e:new Sa(e,void 0);return this.renderTokens(r,a,t,i,n)};It.prototype.renderTokens=function(i,e,t,n,s){for(var r="",a,l,h,u=0,c=i.length;u<c;++u)h=void 0,a=i[u],l=a[0],l==="#"?h=this.renderSection(a,e,t,n,s):l==="^"?h=this.renderInverted(a,e,t,n,s):l===">"?h=this.renderPartial(a,e,t,s):l==="&"?h=this.unescapedValue(a,e):l==="name"?h=this.escapedValue(a,e,s):l==="text"&&(h=this.rawValue(a)),h!==void 0&&(r+=h);return r};It.prototype.renderSection=function(i,e,t,n,s){var r=this,a="",l=e.lookup(i[1]);function h(f){return r.render(f,e,t,s)}if(l){if(Ma(l))for(var u=0,c=l.length;u<c;++u)a+=this.renderTokens(i[4],e.push(l[u]),t,n,s);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")a+=this.renderTokens(i[4],e.push(l),t,n,s);else if($m(l)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(e.view,n.slice(i[3],i[5]),h),l!=null&&(a+=l)}else a+=this.renderTokens(i[4],e,t,n,s);return a}};It.prototype.renderInverted=function(i,e,t,n,s){var r=e.lookup(i[1]);if(!r||Ma(r)&&r.length===0)return this.renderTokens(i[4],e,t,n,s)};It.prototype.indentPartial=function(i,e,t){for(var n=e.replace(/[^ \t]/g,""),s=i.split(`
`),r=0;r<s.length;r++)s[r].length&&(r>0||!t)&&(s[r]=n+s[r]);return s.join(`
`)};It.prototype.renderPartial=function(i,e,t,n){if(t){var s=this.getConfigTags(n),r=$m(t)?t(i[1]):t[i[1]];if(r!=null){var a=i[6],l=i[5],h=i[4],u=r;l==0&&h&&(u=this.indentPartial(r,h,a));var c=this.parse(u,s);return this.renderTokens(c,e,t,u,n)}}};It.prototype.unescapedValue=function(i,e){var t=e.lookup(i[1]);if(t!=null)return t};It.prototype.escapedValue=function(i,e,t){var n=this.getConfigEscape(t)||Yt.escape,s=e.lookup(i[1]);if(s!=null)return typeof s=="number"&&n===Yt.escape?String(s):n(s)};It.prototype.rawValue=function(i){return i[1]};It.prototype.getConfigTags=function(i){return Ma(i)?i:i&&typeof i=="object"?i.tags:void 0};It.prototype.getConfigEscape=function(i){if(i&&typeof i=="object"&&!Ma(i))return i.escape};var Yt={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(i){yl.templateCache=i},get templateCache(){return yl.templateCache}},yl=new It;Yt.clearCache=function(){return yl.clearCache()};Yt.parse=function(i,e){return yl.parse(i,e)};Yt.render=function(i,e,t,n){if(typeof i!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+dR(i)+'" was given as the first argument for mustache#render(template, view, partials)');return yl.render(i,e,t,n)};Yt.escape=wR;Yt.Scanner=_l;Yt.Context=Sa;Yt.Writer=It;const Js=()=>{const{state:{language:i}}=q.useContext(Zn),e=Yf[Bm];return{t:q.useCallback((t,n)=>{const s=Yf[i];return s[t]?Yt.render(s[t],n):e[t]?Yt.render(e[t],n):t},[i,e])}},CR=()=>{const{state:{currentDocument:i,currentFileNo:e,documents:t},dispatch:n}=q.useContext(Zn),{t:s}=Js();if(t.length<=1||!i)return null;let r=i.uri||"";const a=r==null?void 0:r.split("/");return a.length&&(r=a[a.length-1]),W.jsxs(RR,{id:"doc-nav",children:[W.jsx("p",{id:"doc-nav-info",children:s("documentNavInfo",{currentFileNo:e+1,allFilesCount:t.length})}),W.jsx(vw,{id:"doc-nav-prev",onClick:()=>n(Hm()),disabled:e===0,children:W.jsx(lR,{color:"#fff",size:"60%"})}),W.jsx(MR,{id:"doc-nav-next",onClick:()=>n(Um()),disabled:e>=t.length-1,children:W.jsx(hR,{color:"#fff",size:"60%"})})]})},RR=ke.div`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: ${i=>i.theme.textPrimary};
`,vw=ke(oR)`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,MR=ke(vw)`
  margin: 0 5px;
`,yw=(i,e)=>{var t;if(!i)return"";let n="";if(i.fileName)n=i.fileName;else{n=i.uri||"",n=decodeURI(n),e||(n=(t=n==null?void 0:n.split("?"))==null?void 0:t[0]);const s=n==null?void 0:n.split("/");s.length&&(n=s[s.length-1])}return n},TR=()=>{var i,e;const{state:{config:t,currentDocument:n}}=q.useContext(Zn);if(!n||(i=t==null?void 0:t.header)!=null&&i.disableFileName)return null;const s=yw(n,((e=t==null?void 0:t.header)==null?void 0:e.retainURLParams)||!1);return W.jsx(PR,{id:"file-name","data-testid":"file-name",children:s})},PR=ke.div`
  flex: 1;
  text-align: left;
  color: ${i=>i.theme.textPrimary};
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`,LR=()=>{var i,e,t;const{state:n,dispatch:s}=q.useContext(Zn),{config:r}=n;return(i=r==null?void 0:r.header)!=null&&i.disableHeader?null:((t=(e=r==null?void 0:r.header)==null?void 0:e.overrideComponent)==null?void 0:t.call(e,n,()=>s(Hm()),()=>s(Um())))||W.jsxs(IR,{id:"header-bar","data-testid":"header-bar",children:[W.jsx(TR,{}),W.jsx(CR,{})]})},IR=ke.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: ${i=>i.theme.primary};
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`,zm=({documentURI:i,signal:e,fileLoaderComplete:t,readerTypeFunction:n,headers:s})=>fetch(i,{signal:e,headers:s}).then(async r=>{const a=await r.blob(),l=new FileReader;switch(l.addEventListener("loadend",()=>t(l)),n){case"arrayBuffer":l.readAsArrayBuffer(a);break;case"binaryString":l.readAsBinaryString(a);break;case"dataURL":l.readAsDataURL(a);break;case"text":l.readAsText(a);break}}).catch(r=>r),DR=i=>zm({...i,readerTypeFunction:"arrayBuffer"}),ww=i=>zm({...i,readerTypeFunction:"dataURL"}),bw=i=>zm({...i,readerTypeFunction:"text"}),OR=ww,NR=()=>{const{state:{currentDocument:i,pluginRenderers:e}}=q.useContext(Zn),[t,n]=q.useState();return q.useEffect(()=>{if(!i)return;if(!i.fileType){n(void 0);return}const s=[];e==null||e.forEach(a=>{i.fileType!==void 0&&a.fileTypes.indexOf(i.fileType)>=0&&s.push(a)});const[r]=s.sort((a,l)=>l.weight-a.weight);n(r&&r!==void 0?()=>r:null)},[i,e]),{CurrentRenderer:t}},FR=()=>{const{state:i,dispatch:e}=q.useContext(Zn),{currentFileNo:t,currentDocument:n,prefetchMethod:s}=i,{CurrentRenderer:r}=NR(),a=(n==null?void 0:n.uri)||"";return q.useEffect(()=>{if(!n||n.fileType!==void 0)return;const l=new AbortController,{signal:h}=l;return fetch(a,{method:s||a.startsWith("blob:")?"GET":"HEAD",signal:h,headers:i==null?void 0:i.requestHeaders}).then(u=>{const c=u.headers.get("content-type"),f=(c==null?void 0:c.split(";"))||[],g=f.length?f[0]:void 0;e(Kf({...n,fileType:g||void 0}))}).catch(u=>{if((u==null?void 0:u.name)!=="AbortError")throw u}),()=>{l.abort()}},[t,a,n]),q.useEffect(()=>{var l;if(!n||r===void 0)return;const h=new AbortController,{signal:u}=h,c={documentURI:a,signal:u,fileLoaderComplete:f=>{if(!n||!f){e(sf(!1));return}const g={...n};f.result!==null&&(g.fileData=f.result),e(Kf(g)),e(sf(!1))},headers:i==null?void 0:i.requestHeaders};return r===null?e(sf(!1)):r.fileLoader!==void 0?(l=r.fileLoader)==null||l.call(r,c):OR(c),()=>{h.abort()}},[r,t]),{state:i,dispatch:e,CurrentRenderer:r}},jR=()=>{const[i,e]=q.useState({width:void 0,height:void 0});return q.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),i},Jv=({children:i})=>{var e,t;const{state:n}=q.useContext(Zn),{config:s}=n,[r,a]=q.useState(((e=s==null?void 0:s.loadingRenderer)==null?void 0:e.showLoadingTimeout)===!1);return q.useEffect(()=>{var l;setTimeout(()=>{a(!0)},typeof((l=s==null?void 0:s.loadingRenderer)==null?void 0:l.showLoadingTimeout)=="number"?s.loadingRenderer.showLoadingTimeout:500)},[(t=s==null?void 0:s.loadingRenderer)==null?void 0:t.showLoadingTimeout]),r?W.jsx(W.Fragment,{children:i}):null},WR=({documents:i,documentLoading:e,config:t,currentDocument:n,fileName:s,CurrentRenderer:r,state:a,t:l})=>{var h,u;if(i.length)if(e){if(t&&(h=t==null?void 0:t.loadingRenderer)!=null&&h.overrideComponent){const c=t.loadingRenderer.overrideComponent;return W.jsx(Jv,{children:W.jsx(c,{document:n,fileName:s})})}return W.jsx(Jv,{children:W.jsx(UR,{id:"loading-renderer","data-testid":"loading-renderer",children:W.jsx($R,{children:W.jsx(cR,{color:"#444",size:40})})})})}else{if(r)return W.jsx(r,{mainState:a});if(r===void 0)return null;if(t&&(u=t==null?void 0:t.noRenderer)!=null&&u.overrideComponent){const c=t.noRenderer.overrideComponent;return W.jsx(c,{document:n,fileName:s})}return W.jsxs("div",{id:"no-renderer","data-testid":"no-renderer",children:[l("noRendererMessage",{fileType:(n==null?void 0:n.fileType)??""}),W.jsx(zR,{id:"no-renderer-download",href:n==null?void 0:n.uri,download:n==null?void 0:n.uri,children:l("downloadButtonLabel")})]})}else return W.jsx("div",{id:"no-documents"})},BR=()=>{var i;const{state:e,dispatch:t,CurrentRenderer:n}=FR(),{documents:s,documentLoading:r,currentDocument:a,config:l}=e,h=jR(),{t:u}=Js(),c=q.useCallback(g=>{g&&t(tR(g==null?void 0:g.getBoundingClientRect()))},[h,t]),f=yw(a,((i=l==null?void 0:l.header)==null?void 0:i.retainURLParams)||!1);return W.jsx("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:c,children:W.jsx(WR,{state:e,documents:s,documentLoading:r,config:l,currentDocument:a,fileName:f,CurrentRenderer:n,t:u})})},UR=ke.div`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`,HR=zS`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,$R=ke.div`
  animation-name: ${HR};
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`,zR=ke(gw)`
  width: 130px;
  height: 30px;
  background-color: ${i=>i.theme.primary};
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`,e0={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},fn=i=>{const{mainState:{currentDocument:e},children:t}=i;return e?W.jsx(VR,{id:"image-renderer",...i,children:t||W.jsx(GR,{id:"image-img",src:e.fileData})}):null};fn.fileTypes=[];fn.weight=0;const VR=ke.div`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`,GR=ke.img`
  max-width: 95%;
  max-height: 95%;
`,Vm=i=>W.jsx(fn,{...i});Vm.fileTypes=["bmp","image/bmp"];Vm.weight=0;const vd=({mainState:{currentDocument:i}})=>(q.useEffect(()=>{const e=i==null?void 0:i.fileData;let t="";const n=(e==null?void 0:e.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,(h,u)=>(t=u,"")))||"";let s=window.atob(n);if(t){const h=new Uint8Array(s.length);for(let u=0;u<s.length;u++)h[u]=s.charCodeAt(u);s=new TextDecoder(t).decode(h)}const r=document.getElementById("html-body"),a=(r==null?void 0:r.contentWindow)&&r.contentWindow;if(!a)return;const l=a.document;l.open(),l.write(`${s}`),l.close()},[i]),W.jsx(qR,{id:"html-renderer",children:W.jsx(YR,{id:"html-body",sandbox:"allow-same-origin"})}));vd.fileTypes=["htm","html","text/htm","text/html"];vd.weight=0;vd.fileLoader=ww;const qR=ke.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`,YR=ke.iframe`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid ${i=>i.theme.secondary};
`,Gm=i=>W.jsx(fn,{...i});Gm.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"];Gm.weight=0;const yd=({mainState:{currentDocument:i}})=>i?W.jsx(KR,{id:"msdoc-renderer",children:W.jsx(XR,{id:"msdoc-iframe",title:"msdoc-iframe",src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(i.uri)}`,frameBorder:"0"})}):null,es={odt:["odt","application/vnd.oasis.opendocument.text"],doc:["doc","application/msword"],docx:["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]};yd.fileTypes=[...es.odt,...es.doc,...es.docx,...es.xls,...es.xlsx,...es.ppt,...es.pptx];yd.weight=0;yd.fileLoader=({fileLoaderComplete:i})=>i();const KR=ke.div`
  width: 100%;
`,XR=ke.iframe`
  width: 100%;
  height: 100%;
  border: 0;
`;var nt={},wd={};wd.byteLength=JR;wd.toByteArray=tM;wd.fromByteArray=sM;var Li=[],ti=[],QR=typeof Uint8Array<"u"?Uint8Array:Array,af="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var rr=0,ZR=af.length;rr<ZR;++rr)Li[rr]=af[rr],ti[af.charCodeAt(rr)]=rr;ti[45]=62;ti[95]=63;function Aw(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function JR(i){var e=Aw(i),t=e[0],n=e[1];return(t+n)*3/4-n}function eM(i,e,t){return(e+t)*3/4-t}function tM(i){var e,t=Aw(i),n=t[0],s=t[1],r=new QR(eM(i,n,s)),a=0,l=s>0?n-4:n,h;for(h=0;h<l;h+=4)e=ti[i.charCodeAt(h)]<<18|ti[i.charCodeAt(h+1)]<<12|ti[i.charCodeAt(h+2)]<<6|ti[i.charCodeAt(h+3)],r[a++]=e>>16&255,r[a++]=e>>8&255,r[a++]=e&255;return s===2&&(e=ti[i.charCodeAt(h)]<<2|ti[i.charCodeAt(h+1)]>>4,r[a++]=e&255),s===1&&(e=ti[i.charCodeAt(h)]<<10|ti[i.charCodeAt(h+1)]<<4|ti[i.charCodeAt(h+2)]>>2,r[a++]=e>>8&255,r[a++]=e&255),r}function iM(i){return Li[i>>18&63]+Li[i>>12&63]+Li[i>>6&63]+Li[i&63]}function nM(i,e,t){for(var n,s=[],r=e;r<t;r+=3)n=(i[r]<<16&16711680)+(i[r+1]<<8&65280)+(i[r+2]&255),s.push(iM(n));return s.join("")}function sM(i){for(var e,t=i.length,n=t%3,s=[],r=16383,a=0,l=t-n;a<l;a+=r)s.push(nM(i,a,a+r>l?l:a+r));return n===1?(e=i[t-1],s.push(Li[e>>2]+Li[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],s.push(Li[e>>10]+Li[e>>4&63]+Li[e<<2&63]+"=")),s.join("")}var qm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */qm.read=function(i,e,t,n,s){var r,a,l=s*8-n-1,h=(1<<l)-1,u=h>>1,c=-7,f=t?s-1:0,g=t?-1:1,y=i[e+f];for(f+=g,r=y&(1<<-c)-1,y>>=-c,c+=l;c>0;r=r*256+i[e+f],f+=g,c-=8);for(a=r&(1<<-c)-1,r>>=-c,c+=n;c>0;a=a*256+i[e+f],f+=g,c-=8);if(r===0)r=1-u;else{if(r===h)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,n),r=r-u}return(y?-1:1)*a*Math.pow(2,r-n)};qm.write=function(i,e,t,n,s,r){var a,l,h,u=r*8-s-1,c=(1<<u)-1,f=c>>1,g=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:r-1,A=n?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+f>=1?e+=g/h:e+=g*Math.pow(2,1-f),e*h>=2&&(a++,h/=2),a+f>=c?(l=0,a=c):a+f>=1?(l=(e*h-1)*Math.pow(2,s),a=a+f):(l=e*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;i[t+y]=l&255,y+=A,l/=256,s-=8);for(a=a<<s|l,u+=s;u>0;i[t+y]=a&255,y+=A,a/=256,u-=8);i[t+y-A]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=wd,t=qm,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=c,i.SlowBuffer=F,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s;const{Uint8Array:r,ArrayBuffer:a,SharedArrayBuffer:l}=globalThis;c.TYPED_ARRAY_SUPPORT=h(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const d=new r(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,r.prototype),Object.setPrototypeOf(d,p),d.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(d){if(d>s)throw new RangeError('The value "'+d+'" is invalid for option "size"');const p=new r(d);return Object.setPrototypeOf(p,c.prototype),p}function c(d,p,v){if(typeof d=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(d)}return f(d,p,v)}c.poolSize=8192;function f(d,p,v){if(typeof d=="string")return E(d,p);if(a.isView(d))return k(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(fe(d,a)||d&&fe(d.buffer,a)||typeof l<"u"&&(fe(d,l)||d&&fe(d.buffer,l)))return R(d,p,v);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const M=d.valueOf&&d.valueOf();if(M!=null&&M!==d)return c.from(M,p,v);const I=P(d);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return c.from(d[Symbol.toPrimitive]("string"),p,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}c.from=function(d,p,v){return f(d,p,v)},Object.setPrototypeOf(c.prototype,r.prototype),Object.setPrototypeOf(c,r);function g(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function y(d,p,v){return g(d),d<=0?u(d):p!==void 0?typeof v=="string"?u(d).fill(p,v):u(d).fill(p):u(d)}c.alloc=function(d,p,v){return y(d,p,v)};function A(d){return g(d),u(d<0?0:N(d)|0)}c.allocUnsafe=function(d){return A(d)},c.allocUnsafeSlow=function(d){return A(d)};function E(d,p){if((typeof p!="string"||p==="")&&(p="utf8"),!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const v=j(d,p)|0;let M=u(v);const I=M.write(d,p);return I!==v&&(M=M.slice(0,I)),M}function S(d){const p=d.length<0?0:N(d.length)|0,v=u(p);for(let M=0;M<p;M+=1)v[M]=d[M]&255;return v}function k(d){if(fe(d,r)){const p=new r(d);return R(p.buffer,p.byteOffset,p.byteLength)}return S(d)}function R(d,p,v){if(p<0||d.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<p+(v||0))throw new RangeError('"length" is outside of buffer bounds');let M;return p===void 0&&v===void 0?M=new r(d):v===void 0?M=new r(d,p):M=new r(d,p,v),Object.setPrototypeOf(M,c.prototype),M}function P(d){if(c.isBuffer(d)){const p=N(d.length)|0,v=u(p);return v.length===0||d.copy(v,0,0,p),v}if(d.length!==void 0)return typeof d.length!="number"||Re(d.length)?u(0):S(d);if(d.type==="Buffer"&&Array.isArray(d.data))return S(d.data)}function N(d){if(d>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return d|0}function F(d){return+d!=d&&(d=0),c.alloc(+d)}c.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==c.prototype},c.compare=function(d,p){if(fe(d,r)&&(d=c.from(d,d.offset,d.byteLength)),fe(p,r)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(d)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===p)return 0;let v=d.length,M=p.length;for(let I=0,$=Math.min(v,M);I<$;++I)if(d[I]!==p[I]){v=d[I],M=p[I];break}return v<M?-1:M<v?1:0},c.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(d,p){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return c.alloc(0);let v;if(p===void 0)for(p=0,v=0;v<d.length;++v)p+=d[v].length;const M=c.allocUnsafe(p);let I=0;for(v=0;v<d.length;++v){let $=d[v];if(fe($,r))I+$.length>M.length?(c.isBuffer($)||($=c.from($)),$.copy(M,I)):r.prototype.set.call(M,$,I);else if(c.isBuffer($))$.copy(M,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=$.length}return M};function j(d,p){if(c.isBuffer(d))return d.length;if(a.isView(d)||fe(d,a))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const v=d.length,M=arguments.length>2&&arguments[2]===!0;if(!M&&v===0)return 0;let I=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return je(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return Ce(d).length;default:if(I)return M?-1:je(d).length;p=(""+p).toLowerCase(),I=!0}}c.byteLength=j;function L(d,p,v){let M=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,p>>>=0,v<=p))return"";for(d||(d="utf8");;)switch(d){case"hex":return U(this,p,v);case"utf8":case"utf-8":return O(this,p,v);case"ascii":return pe(this,p,v);case"latin1":case"binary":return J(this,p,v);case"base64":return V(this,p,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,p,v);default:if(M)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),M=!0}}c.prototype._isBuffer=!0;function w(d,p,v){const M=d[p];d[p]=d[v],d[v]=M}c.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<d;p+=2)w(this,p,p+1);return this},c.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<d;p+=4)w(this,p,p+3),w(this,p+1,p+2);return this},c.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<d;p+=8)w(this,p,p+7),w(this,p+1,p+6),w(this,p+2,p+5),w(this,p+3,p+4);return this},c.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?O(this,0,d):L.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(d){if(!c.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:c.compare(this,d)===0},c.prototype.inspect=function(){let d="";const p=i.INSPECT_MAX_BYTES;return d=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(d+=" ... "),"<Buffer "+d+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(d,p,v,M,I){if(fe(d,r)&&(d=c.from(d,d.offset,d.byteLength)),!c.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(p===void 0&&(p=0),v===void 0&&(v=d?d.length:0),M===void 0&&(M=0),I===void 0&&(I=this.length),p<0||v>d.length||M<0||I>this.length)throw new RangeError("out of range index");if(M>=I&&p>=v)return 0;if(M>=I)return-1;if(p>=v)return 1;if(p>>>=0,v>>>=0,M>>>=0,I>>>=0,this===d)return 0;let $=I-M,Q=v-p;const $e=Math.min($,Q),ct=this.slice(M,I),Ve=d.slice(p,v);for(let He=0;He<$e;++He)if(ct[He]!==Ve[He]){$=ct[He],Q=Ve[He];break}return $<Q?-1:Q<$?1:0};function b(d,p,v,M,I){if(d.length===0)return-1;if(typeof v=="string"?(M=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,Re(v)&&(v=I?0:d.length-1),v<0&&(v=d.length+v),v>=d.length){if(I)return-1;v=d.length-1}else if(v<0)if(I)v=0;else return-1;if(typeof p=="string"&&(p=c.from(p,M)),c.isBuffer(p))return p.length===0?-1:C(d,p,v,M,I);if(typeof p=="number")return p=p&255,typeof r.prototype.indexOf=="function"?I?r.prototype.indexOf.call(d,p,v):r.prototype.lastIndexOf.call(d,p,v):C(d,[p],v,M,I);throw new TypeError("val must be string, number or Buffer")}function C(d,p,v,M,I){let $=1,Q=d.length,$e=p.length;if(M!==void 0&&(M=String(M).toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(d.length<2||p.length<2)return-1;$=2,Q/=2,$e/=2,v/=2}function ct(He,Ke){return $===1?He[Ke]:He.readUInt16BE(Ke*$)}let Ve;if(I){let He=-1;for(Ve=v;Ve<Q;Ve++)if(ct(d,Ve)===ct(p,He===-1?0:Ve-He)){if(He===-1&&(He=Ve),Ve-He+1===$e)return He*$}else He!==-1&&(Ve-=Ve-He),He=-1}else for(v+$e>Q&&(v=Q-$e),Ve=v;Ve>=0;Ve--){let He=!0;for(let Ke=0;Ke<$e;Ke++)if(ct(d,Ve+Ke)!==ct(p,Ke)){He=!1;break}if(He)return Ve}return-1}c.prototype.includes=function(d,p,v){return this.indexOf(d,p,v)!==-1},c.prototype.indexOf=function(d,p,v){return b(this,d,p,v,!0)},c.prototype.lastIndexOf=function(d,p,v){return b(this,d,p,v,!1)};function T(d,p,v,M){v=Number(v)||0;const I=d.length-v;M?(M=Number(M),M>I&&(M=I)):M=I;const $=p.length;M>$/2&&(M=$/2);let Q;for(Q=0;Q<M;++Q){const $e=parseInt(p.substr(Q*2,2),16);if(Re($e))return Q;d[v+Q]=$e}return Q}function D(d,p,v,M){return Ee(je(p,d.length-v),d,v,M)}function B(d,p,v,M){return Ee(De(p),d,v,M)}function K(d,p,v,M){return Ee(Ce(p),d,v,M)}function ie(d,p,v,M){return Ee(_e(p,d.length-v),d,v,M)}c.prototype.write=function(d,p,v,M){if(p===void 0)M="utf8",v=this.length,p=0;else if(v===void 0&&typeof p=="string")M=p,v=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(v)?(v=v>>>0,M===void 0&&(M="utf8")):(M=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const I=this.length-p;if((v===void 0||v>I)&&(v=I),d.length>0&&(v<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let $=!1;for(;;)switch(M){case"hex":return T(this,d,p,v);case"utf8":case"utf-8":return D(this,d,p,v);case"ascii":case"latin1":case"binary":return B(this,d,p,v);case"base64":return K(this,d,p,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,d,p,v);default:if($)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),$=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(d,p,v){return p===0&&v===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(p,v))}function O(d,p,v){v=Math.min(d.length,v);const M=[];let I=p;for(;I<v;){const $=d[I];let Q=null,$e=$>239?4:$>223?3:$>191?2:1;if(I+$e<=v){let ct,Ve,He,Ke;switch($e){case 1:$<128&&(Q=$);break;case 2:ct=d[I+1],(ct&192)===128&&(Ke=($&31)<<6|ct&63,Ke>127&&(Q=Ke));break;case 3:ct=d[I+1],Ve=d[I+2],(ct&192)===128&&(Ve&192)===128&&(Ke=($&15)<<12|(ct&63)<<6|Ve&63,Ke>2047&&(Ke<55296||Ke>57343)&&(Q=Ke));break;case 4:ct=d[I+1],Ve=d[I+2],He=d[I+3],(ct&192)===128&&(Ve&192)===128&&(He&192)===128&&(Ke=($&15)<<18|(ct&63)<<12|(Ve&63)<<6|He&63,Ke>65535&&Ke<1114112&&(Q=Ke))}}Q===null?(Q=65533,$e=1):Q>65535&&(Q-=65536,M.push(Q>>>10&1023|55296),Q=56320|Q&1023),M.push(Q),I+=$e}return H(M)}const re=4096;function H(d){const p=d.length;if(p<=re)return String.fromCharCode.apply(String,d);let v="",M=0;for(;M<p;)v+=String.fromCharCode.apply(String,d.slice(M,M+=re));return v}function pe(d,p,v){let M="";v=Math.min(d.length,v);for(let I=p;I<v;++I)M+=String.fromCharCode(d[I]&127);return M}function J(d,p,v){let M="";v=Math.min(d.length,v);for(let I=p;I<v;++I)M+=String.fromCharCode(d[I]);return M}function U(d,p,v){const M=d.length;(!p||p<0)&&(p=0),(!v||v<0||v>M)&&(v=M);let I="";for(let $=p;$<v;++$)I+=Le[d[$]];return I}function z(d,p,v){const M=d.slice(p,v);let I="";for(let $=0;$<M.length-1;$+=2)I+=String.fromCharCode(M[$]+M[$+1]*256);return I}c.prototype.slice=function(d,p){const v=this.length;d=~~d,p=p===void 0?v:~~p,d<0?(d+=v,d<0&&(d=0)):d>v&&(d=v),p<0?(p+=v,p<0&&(p=0)):p>v&&(p=v),p<d&&(p=d);const M=this.subarray(d,p);return Object.setPrototypeOf(M,c.prototype),M};function te(d,p,v){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+p>v)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(d,p,v){d=d>>>0,p=p>>>0,v||te(d,p,this.length);let M=this[d],I=1,$=0;for(;++$<p&&(I*=256);)M+=this[d+$]*I;return M},c.prototype.readUintBE=c.prototype.readUIntBE=function(d,p,v){d=d>>>0,p=p>>>0,v||te(d,p,this.length);let M=this[d+--p],I=1;for(;p>0&&(I*=256);)M+=this[d+--p]*I;return M},c.prototype.readUint8=c.prototype.readUInt8=function(d,p){return d=d>>>0,p||te(d,1,this.length),this[d]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(d,p){return d=d>>>0,p||te(d,2,this.length),this[d]|this[d+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(d,p){return d=d>>>0,p||te(d,2,this.length),this[d]<<8|this[d+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(d,p){return d=d>>>0,p||te(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(d,p){return d=d>>>0,p||te(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},c.prototype.readBigUInt64LE=Oe(function(d){d=d>>>0,Y(d,"offset");const p=this[d],v=this[d+7];(p===void 0||v===void 0)&&ve(d,this.length-8);const M=p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,I=this[++d]+this[++d]*2**8+this[++d]*2**16+v*2**24;return BigInt(M)+(BigInt(I)<<BigInt(32))}),c.prototype.readBigUInt64BE=Oe(function(d){d=d>>>0,Y(d,"offset");const p=this[d],v=this[d+7];(p===void 0||v===void 0)&&ve(d,this.length-8);const M=p*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],I=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+v;return(BigInt(M)<<BigInt(32))+BigInt(I)}),c.prototype.readIntLE=function(d,p,v){d=d>>>0,p=p>>>0,v||te(d,p,this.length);let M=this[d],I=1,$=0;for(;++$<p&&(I*=256);)M+=this[d+$]*I;return I*=128,M>=I&&(M-=Math.pow(2,8*p)),M},c.prototype.readIntBE=function(d,p,v){d=d>>>0,p=p>>>0,v||te(d,p,this.length);let M=p,I=1,$=this[d+--M];for(;M>0&&(I*=256);)$+=this[d+--M]*I;return I*=128,$>=I&&($-=Math.pow(2,8*p)),$},c.prototype.readInt8=function(d,p){return d=d>>>0,p||te(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},c.prototype.readInt16LE=function(d,p){d=d>>>0,p||te(d,2,this.length);const v=this[d]|this[d+1]<<8;return v&32768?v|4294901760:v},c.prototype.readInt16BE=function(d,p){d=d>>>0,p||te(d,2,this.length);const v=this[d+1]|this[d]<<8;return v&32768?v|4294901760:v},c.prototype.readInt32LE=function(d,p){return d=d>>>0,p||te(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},c.prototype.readInt32BE=function(d,p){return d=d>>>0,p||te(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},c.prototype.readBigInt64LE=Oe(function(d){d=d>>>0,Y(d,"offset");const p=this[d],v=this[d+7];(p===void 0||v===void 0)&&ve(d,this.length-8);const M=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(v<<24);return(BigInt(M)<<BigInt(32))+BigInt(p+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),c.prototype.readBigInt64BE=Oe(function(d){d=d>>>0,Y(d,"offset");const p=this[d],v=this[d+7];(p===void 0||v===void 0)&&ve(d,this.length-8);const M=(p<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(M)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+v)}),c.prototype.readFloatLE=function(d,p){return d=d>>>0,p||te(d,4,this.length),t.read(this,d,!0,23,4)},c.prototype.readFloatBE=function(d,p){return d=d>>>0,p||te(d,4,this.length),t.read(this,d,!1,23,4)},c.prototype.readDoubleLE=function(d,p){return d=d>>>0,p||te(d,8,this.length),t.read(this,d,!0,52,8)},c.prototype.readDoubleBE=function(d,p){return d=d>>>0,p||te(d,8,this.length),t.read(this,d,!1,52,8)};function ee(d,p,v,M,I,$){if(!c.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>I||p<$)throw new RangeError('"value" argument is out of bounds');if(v+M>d.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(d,p,v,M){if(d=+d,p=p>>>0,v=v>>>0,!M){const Q=Math.pow(2,8*v)-1;ee(this,d,p,v,Q,0)}let I=1,$=0;for(this[p]=d&255;++$<v&&(I*=256);)this[p+$]=d/I&255;return p+v},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(d,p,v,M){if(d=+d,p=p>>>0,v=v>>>0,!M){const Q=Math.pow(2,8*v)-1;ee(this,d,p,v,Q,0)}let I=v-1,$=1;for(this[p+I]=d&255;--I>=0&&($*=256);)this[p+I]=d/$&255;return p+v},c.prototype.writeUint8=c.prototype.writeUInt8=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,1,255,0),this[p]=d&255,p+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,2,65535,0),this[p]=d&255,this[p+1]=d>>>8,p+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,2,65535,0),this[p]=d>>>8,this[p+1]=d&255,p+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,4,4294967295,0),this[p+3]=d>>>24,this[p+2]=d>>>16,this[p+1]=d>>>8,this[p]=d&255,p+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,4,4294967295,0),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4};function le(d,p,v,M,I){ne(p,M,I,d,v,7);let $=Number(p&BigInt(4294967295));d[v++]=$,$=$>>8,d[v++]=$,$=$>>8,d[v++]=$,$=$>>8,d[v++]=$;let Q=Number(p>>BigInt(32)&BigInt(4294967295));return d[v++]=Q,Q=Q>>8,d[v++]=Q,Q=Q>>8,d[v++]=Q,Q=Q>>8,d[v++]=Q,v}function ae(d,p,v,M,I){ne(p,M,I,d,v,7);let $=Number(p&BigInt(4294967295));d[v+7]=$,$=$>>8,d[v+6]=$,$=$>>8,d[v+5]=$,$=$>>8,d[v+4]=$;let Q=Number(p>>BigInt(32)&BigInt(4294967295));return d[v+3]=Q,Q=Q>>8,d[v+2]=Q,Q=Q>>8,d[v+1]=Q,Q=Q>>8,d[v]=Q,v+8}c.prototype.writeBigUInt64LE=Oe(function(d,p=0){return le(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Oe(function(d,p=0){return ae(this,d,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(d,p,v,M){if(d=+d,p=p>>>0,!M){const $e=Math.pow(2,8*v-1);ee(this,d,p,v,$e-1,-$e)}let I=0,$=1,Q=0;for(this[p]=d&255;++I<v&&($*=256);)d<0&&Q===0&&this[p+I-1]!==0&&(Q=1),this[p+I]=(d/$>>0)-Q&255;return p+v},c.prototype.writeIntBE=function(d,p,v,M){if(d=+d,p=p>>>0,!M){const $e=Math.pow(2,8*v-1);ee(this,d,p,v,$e-1,-$e)}let I=v-1,$=1,Q=0;for(this[p+I]=d&255;--I>=0&&($*=256);)d<0&&Q===0&&this[p+I+1]!==0&&(Q=1),this[p+I]=(d/$>>0)-Q&255;return p+v},c.prototype.writeInt8=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,1,127,-128),d<0&&(d=255+d+1),this[p]=d&255,p+1},c.prototype.writeInt16LE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,2,32767,-32768),this[p]=d&255,this[p+1]=d>>>8,p+2},c.prototype.writeInt16BE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,2,32767,-32768),this[p]=d>>>8,this[p+1]=d&255,p+2},c.prototype.writeInt32LE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,4,2147483647,-2147483648),this[p]=d&255,this[p+1]=d>>>8,this[p+2]=d>>>16,this[p+3]=d>>>24,p+4},c.prototype.writeInt32BE=function(d,p,v){return d=+d,p=p>>>0,v||ee(this,d,p,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[p]=d>>>24,this[p+1]=d>>>16,this[p+2]=d>>>8,this[p+3]=d&255,p+4},c.prototype.writeBigInt64LE=Oe(function(d,p=0){return le(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Oe(function(d,p=0){return ae(this,d,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(d,p,v,M,I,$){if(v+M>d.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function G(d,p,v,M,I){return p=+p,v=v>>>0,I||se(d,p,v,4),t.write(d,p,v,M,23,4),v+4}c.prototype.writeFloatLE=function(d,p,v){return G(this,d,p,!0,v)},c.prototype.writeFloatBE=function(d,p,v){return G(this,d,p,!1,v)};function Z(d,p,v,M,I){return p=+p,v=v>>>0,I||se(d,p,v,8),t.write(d,p,v,M,52,8),v+8}c.prototype.writeDoubleLE=function(d,p,v){return Z(this,d,p,!0,v)},c.prototype.writeDoubleBE=function(d,p,v){return Z(this,d,p,!1,v)},c.prototype.copy=function(d,p,v,M){if(!c.isBuffer(d))throw new TypeError("argument should be a Buffer");if(v||(v=0),!M&&M!==0&&(M=this.length),p>=d.length&&(p=d.length),p||(p=0),M>0&&M<v&&(M=v),M===v||d.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),d.length-p<M-v&&(M=d.length-p+v);const I=M-v;return this===d&&typeof r.prototype.copyWithin=="function"?this.copyWithin(p,v,M):r.prototype.set.call(d,this.subarray(v,M),p),I},c.prototype.fill=function(d,p,v,M){if(typeof d=="string"){if(typeof p=="string"?(M=p,p=0,v=this.length):typeof v=="string"&&(M=v,v=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!c.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(d.length===1){const $=d.charCodeAt(0);(M==="utf8"&&$<128||M==="latin1")&&(d=$)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(p<0||this.length<p||this.length<v)throw new RangeError("Out of range index");if(v<=p)return this;p=p>>>0,v=v===void 0?this.length:v>>>0,d||(d=0);let I;if(typeof d=="number")for(I=p;I<v;++I)this[I]=d;else{const $=c.isBuffer(d)?d:c.from(d,M),Q=$.length;if(Q===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(I=0;I<v-p;++I)this[I+p]=$[I%Q]}return this};const X={};function ce(d,p,v){X[d]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}ce("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ce("ERR_INVALID_ARG_TYPE",function(d,p){return`The "${d}" argument must be of type number. Received type ${typeof p}`},TypeError),ce("ERR_OUT_OF_RANGE",function(d,p,v){let M=`The value of "${d}" is out of range.`,I=v;return Number.isInteger(v)&&Math.abs(v)>2**32?I=he(String(v)):typeof v=="bigint"&&(I=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(I=he(I)),I+="n"),M+=` It must be ${p}. Received ${I}`,M},RangeError);function he(d){let p="",v=d.length;const M=d[0]==="-"?1:0;for(;v>=M+4;v-=3)p=`_${d.slice(v-3,v)}${p}`;return`${d.slice(0,v)}${p}`}function ue(d,p,v){Y(p,"offset"),(d[p]===void 0||d[p+v]===void 0)&&ve(p,d.length-(v+1))}function ne(d,p,v,M,I,$){if(d>v||d<p){const Q=typeof p=="bigint"?"n":"";let $e;throw p===0||p===BigInt(0)?$e=`>= 0${Q} and < 2${Q} ** ${($+1)*8}${Q}`:$e=`>= -(2${Q} ** ${($+1)*8-1}${Q}) and < 2 ** ${($+1)*8-1}${Q}`,new X.ERR_OUT_OF_RANGE("value",$e,d)}ue(M,I,$)}function Y(d,p){if(typeof d!="number")throw new X.ERR_INVALID_ARG_TYPE(p,"number",d)}function ve(d,p,v){throw Math.floor(d)!==d?(Y(d,v),new X.ERR_OUT_OF_RANGE("offset","an integer",d)):p<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,d)}const oe=/[^+/0-9A-Za-z-_]/g;function ye(d){if(d=d.split("=")[0],d=d.trim().replace(oe,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function je(d,p){p=p||1/0;let v;const M=d.length;let I=null;const $=[];for(let Q=0;Q<M;++Q){if(v=d.charCodeAt(Q),v>55295&&v<57344){if(!I){if(v>56319){(p-=3)>-1&&$.push(239,191,189);continue}else if(Q+1===M){(p-=3)>-1&&$.push(239,191,189);continue}I=v;continue}if(v<56320){(p-=3)>-1&&$.push(239,191,189),I=v;continue}v=(I-55296<<10|v-56320)+65536}else I&&(p-=3)>-1&&$.push(239,191,189);if(I=null,v<128){if((p-=1)<0)break;$.push(v)}else if(v<2048){if((p-=2)<0)break;$.push(v>>6|192,v&63|128)}else if(v<65536){if((p-=3)<0)break;$.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((p-=4)<0)break;$.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return $}function De(d){const p=[];for(let v=0;v<d.length;++v)p.push(d.charCodeAt(v)&255);return p}function _e(d,p){let v,M,I;const $=[];for(let Q=0;Q<d.length&&!((p-=2)<0);++Q)v=d.charCodeAt(Q),M=v>>8,I=v%256,$.push(I),$.push(M);return $}function Ce(d){return e.toByteArray(ye(d))}function Ee(d,p,v,M){let I;for(I=0;I<M&&!(I+v>=p.length||I>=d.length);++I)p[I+v]=d[I];return I}function fe(d,p){return d instanceof p||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===p.name}function Re(d){return d!==d}const Le=function(){const d="0123456789abcdef",p=new Array(256);for(let v=0;v<16;++v){const M=v*16;for(let I=0;I<16;++I)p[M+I]=d[v]+d[I]}return p}();function Oe(d){return typeof BigInt>"u"?gt:d}function gt(){throw new Error("BigInt not supported")}})(nt);const Xf=nt.Buffer,rM=nt.Blob,aM=nt.BlobOptions,oM=nt.Buffer,lM=nt.File,hM=nt.FileOptions,cM=nt.INSPECT_MAX_BYTES,uM=nt.SlowBuffer,dM=nt.TranscodeEncoding,fM=nt.atob,pM=nt.btoa,gM=nt.constants,mM=nt.isAscii,vM=nt.isUtf8,yM=nt.kMaxLength,wM=nt.kStringMaxLength,bM=nt.resolveObjectURL,AM=nt.transcode,hI=Object.freeze(Object.defineProperty({__proto__:null,Blob:rM,BlobOptions:aM,Buffer:oM,File:lM,FileOptions:hM,INSPECT_MAX_BYTES:cM,SlowBuffer:uM,TranscodeEncoding:dM,atob:fM,btoa:pM,constants:gM,default:Xf,isAscii:mM,isUtf8:vM,kMaxLength:yM,kStringMaxLength:wM,resolveObjectURL:bM,transcode:AM},Symbol.toStringTag,{value:"Module"}));var Go={};Go.d=(i,e)=>{for(var t in e)Go.o(e,t)&&!Go.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};Go.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var me=globalThis.pdfjsLib={};Go.d(me,{AbortException:()=>tr,AnnotationEditorLayer:()=>L2,AnnotationEditorParamsType:()=>we,AnnotationEditorType:()=>Te,AnnotationEditorUIManager:()=>wl,AnnotationLayer:()=>C2,AnnotationMode:()=>Nn,CMapCompressionType:()=>Zf,ColorPicker:()=>Gb,DOMSVGFactory:()=>Xm,DrawLayer:()=>I2,FeatureTest:()=>$t,GlobalWorkerOptions:()=>Xn,ImageKind:()=>fh,InvalidPDFException:()=>xw,MissingPDFException:()=>er,OPS:()=>ui,Outliner:()=>Mg,PDFDataRangeTransport:()=>vb,PDFDateString:()=>Tw,PDFWorker:()=>cc,PasswordResponses:()=>SM,PermissionFlag:()=>EM,PixelsPerInch:()=>ka,RenderingCancelledException:()=>Qm,TextLayer:()=>Lu,UnexpectedResponseException:()=>xd,Util:()=>de,VerbosityLevel:()=>bd,XfaLayer:()=>bb,build:()=>a2,createValidAbsoluteUrl:()=>MM,fetchData:()=>Md,getDocument:()=>KT,getFilenameFromUrl:()=>WM,getPdfFilenameFromUrl:()=>BM,getXfaPageViewport:()=>UM,isDataScheme:()=>Zm,isPdfFile:()=>Jm,noContextMenu:()=>Ht,normalizeUnicode:()=>OM,renderTextLayer:()=>BT,setLayerDimensions:()=>Ys,shadow:()=>Pe,updateTextLayer:()=>UT,version:()=>r2});const Mt=typeof be=="object"&&be+""=="[object process]"&&!be.versions.nw&&!(be.versions.electron&&be.type&&be.type!=="browser"),_w=[1,0,0,1,0,0],Qf=[.001,0,0,.001,0,0],_M=1e7,of=1.35,ii={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Nn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xM="pdfjs_internal_editor_",Te={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},we={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},EM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},mt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},fh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Je={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},La={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bd={ERRORS:0,WARNINGS:1,INFOS:5},Zf={NONE:0,BINARY:1},ui={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},SM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ad=bd.WARNINGS;function kM(i){Number.isInteger(i)&&(Ad=i)}function CM(){return Ad}function _d(i){Ad>=bd.INFOS&&console.log(`Info: ${i}`)}function Se(i){Ad>=bd.WARNINGS&&console.log(`Warning: ${i}`)}function Fe(i){throw new Error(i)}function tt(i,e){i||Fe(e)}function RM(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function MM(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=DM(i)}catch{}}const n=e?new URL(i,e):new URL(i);if(RM(n))return n}catch{}return null}function Pe(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Jn=function(){function i(e,t){this.constructor===i&&Fe("Cannot initialize BaseException."),this.message=e,this.name=t}return i.prototype=new Error,i.constructor=i,i}();class Jf extends Jn{constructor(e,t){super(e,"PasswordException"),this.code=t}}class ep extends Jn{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class xw extends Jn{constructor(e){super(e,"InvalidPDFException")}}class er extends Jn{constructor(e){super(e,"MissingPDFException")}}class xd extends Jn{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class TM extends Jn{constructor(e){super(e,"FormatError")}}class tr extends Jn{constructor(e){super(e,"AbortException")}}function Ew(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Fe("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Ed(i){typeof i!="string"&&Fe("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function PM(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Ym(i){const e=Object.create(null);for(const[t,n]of i)e[t]=n;return e}function LM(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function IM(){try{return new Function(""),!0}catch{return!1}}class $t{static get isLittleEndian(){return Pe(this,"isLittleEndian",LM())}static get isEvalSupported(){return Pe(this,"isEvalSupported",IM())}static get isOffscreenCanvasSupported(){return Pe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Pe(this,"platform",{isMac:navigator.platform.includes("Mac")}):Pe(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Pe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const lf=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Ia,jl,gu,tp;class de{static makeHexColor(e,t,n){return`#${lf[e]}${lf[t]}${lf[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[n,s]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[s,r]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(n+a)/2,h=Math.sqrt((n+a)**2-4*(n*a-r*s))/2,u=l+h||1,c=l-h||1;return[Math.sqrt(u),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[n,r,s,a]}static bezierBoundingBox(e,t,n,s,r,a,l,h,u){return u?(u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],t,h),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],t,h)):u=[Math.min(e,l),Math.min(t,h),Math.max(e,l),Math.max(t,h)],_(this,gu,tp).call(this,e,n,r,l,t,s,a,h,3*(-e+3*(n-r)+l),6*(e-2*n+r),3*(n-e),u),_(this,gu,tp).call(this,e,n,r,l,t,s,a,h,3*(-t+3*(s-a)+h),6*(t-2*s+a),3*(s-t),u),u}}Ia=new WeakSet,jl=function(i,e,t,n,s,r,a,l,h,u){if(h<=0||h>=1)return;const c=1-h,f=h*h,g=f*h,y=c*(c*(c*i+3*h*e)+3*f*t)+g*n,A=c*(c*(c*s+3*h*r)+3*f*a)+g*l;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],A),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],A)},gu=new WeakSet,tp=function(i,e,t,n,s,r,a,l,h,u,c,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&_(this,Ia,jl).call(this,i,e,t,n,s,r,a,l,-c/u,f);return}const g=u**2-4*c*h;if(g<0)return;const y=Math.sqrt(g),A=2*h;_(this,Ia,jl).call(this,i,e,t,n,s,r,a,l,(-u+y)/A,f),_(this,Ia,jl).call(this,i,e,t,n,s,r,a,l,(-u-y)/A,f)},m(de,Ia),m(de,gu);function DM(i){return decodeURIComponent(escape(i))}let hf=null,t0=null;function OM(i){return hf||(hf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,t0=new Map([["ï¬","Å¿t"]])),i.replaceAll(hf,(e,t,n)=>t?t.normalize("NFKC"):t0.get(n))}function NM(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return Ew(i)}const Sw="pdfjs_internal_id_",Fi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Sd{constructor(){this.constructor===Sd&&Fe("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,r){return"none"}destroy(e=!1){}}class kd{constructor(){this.constructor===kd&&Fe("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Fe("Abstract method `_createCanvas` called.")}}class Cd{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===Cd&&Fe("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?Zf.BINARY:Zf.NONE;return this._fetchData(t,n).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){Fe("Abstract method `_fetchData` called.")}}class Rd{constructor({baseUrl:e=null}){this.constructor===Rd&&Fe("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){Fe("Abstract method `_fetchData` called.")}}class Km{constructor(){this.constructor===Km&&Fe("Cannot initialize BaseSVGFactory.")}create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Fe("Abstract method `_createSVG` called.")}}const Wi="http://www.w3.org/2000/svg",ur=class{};Ae(ur,"CSS",96),Ae(ur,"PDF",72),Ae(ur,"PDF_TO_CSS_UNITS",ur.CSS/ur.PDF);let ka=ur;var Ds,sn,wn,Vt,ph,dr,ut,vt,as,fr,Os,Gr,Ya,gh,ip,kw,mh,np,os,pr,gr,Da,mr,Ka,vh,sp,vr,Xa;class FM extends Sd{constructor({docId:e,ownerDocument:t=globalThis.document}={}){super(),m(this,ut),m(this,as),m(this,Os),m(this,Ya),m(this,ip),m(this,mh),m(this,os),m(this,gr),m(this,mr),m(this,vh),m(this,vr),m(this,Ds,void 0),m(this,sn,void 0),m(this,wn,void 0),m(this,Vt,void 0),m(this,ph,void 0),m(this,dr,0),x(this,wn,e),x(this,Vt,t)}addFilter(e){if(!e)return"none";let t=o(this,ut,vt).get(e);if(t)return t;const[n,s,r]=_(this,Ya,gh).call(this,e),a=e.length===1?n:`${n}${s}${r}`;if(t=o(this,ut,vt).get(a),t)return o(this,ut,vt).set(e,t),t;const l=`g_${o(this,wn)}_transfer_map_${ai(this,dr)._++}`,h=`url(#${l})`;o(this,ut,vt).set(e,h),o(this,ut,vt).set(a,h);const u=_(this,os,pr).call(this,l);return _(this,mr,Ka).call(this,n,s,r,u),h}addHCMFilter(e,t){var n;const s=`${e}-${t}`,r="base";let a=o(this,as,fr).get(r);if((a==null?void 0:a.key)===s||(a?((n=a.filter)==null||n.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},o(this,as,fr).set(r,a)),!e||!t))return a.url;const l=_(this,vr,Xa).call(this,e);e=de.makeHexColor(...l);const h=_(this,vr,Xa).call(this,t);if(t=de.makeHexColor(...h),o(this,Os,Gr).style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const u=new Array(256);for(let A=0;A<=255;A++){const E=A/255;u[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const c=u.join(","),f=`g_${o(this,wn)}_hcm_filter`,g=a.filter=_(this,os,pr).call(this,f);_(this,mr,Ka).call(this,c,c,c,g),_(this,mh,np).call(this,g);const y=(A,E)=>{const S=l[A]/255,k=h[A]/255,R=new Array(E+1);for(let P=0;P<=E;P++)R[P]=S+P/E*(k-S);return R.join(",")};return _(this,mr,Ka).call(this,y(0,5),y(1,5),y(2,5),g),a.url=`url(#${f})`,a.url}addAlphaFilter(e){let t=o(this,ut,vt).get(e);if(t)return t;const[n]=_(this,Ya,gh).call(this,[e]),s=`alpha_${n}`;if(t=o(this,ut,vt).get(s),t)return o(this,ut,vt).set(e,t),t;const r=`g_${o(this,wn)}_alpha_map_${ai(this,dr)._++}`,a=`url(#${r})`;o(this,ut,vt).set(e,a),o(this,ut,vt).set(s,a);const l=_(this,os,pr).call(this,r);return _(this,vh,sp).call(this,n,l),a}addLuminosityFilter(e){let t=o(this,ut,vt).get(e||"luminosity");if(t)return t;let n,s;if(e?([n]=_(this,Ya,gh).call(this,[e]),s=`luminosity_${n}`):s="luminosity",t=o(this,ut,vt).get(s),t)return o(this,ut,vt).set(e,t),t;const r=`g_${o(this,wn)}_luminosity_map_${ai(this,dr)._++}`,a=`url(#${r})`;o(this,ut,vt).set(e,a),o(this,ut,vt).set(s,a);const l=_(this,os,pr).call(this,r);return _(this,ip,kw).call(this,l),e&&_(this,vh,sp).call(this,n,l),a}addHighlightHCMFilter(e,t,n,s,r){var a;const l=`${t}-${n}-${s}-${r}`;let h=o(this,as,fr).get(e);if((h==null?void 0:h.key)===l||(h?((a=h.filter)==null||a.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},o(this,as,fr).set(e,h)),!t||!n))return h.url;const[u,c]=[t,n].map(_(this,vr,Xa).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[y,A]=[s,r].map(_(this,vr,Xa).bind(this));g<f&&([f,g,y,A]=[g,f,A,y]),o(this,Os,Gr).style.color="";const E=(R,P,N)=>{const F=new Array(256),j=(g-f)/N,L=R/255,w=(P-R)/(255*N);let b=0;for(let C=0;C<=N;C++){const T=Math.round(f+C*j),D=L+C*w;for(let B=b;B<=T;B++)F[B]=D;b=T+1}for(let C=b;C<256;C++)F[C]=F[b-1];return F.join(",")},S=`g_${o(this,wn)}_hcm_${e}_filter`,k=h.filter=_(this,os,pr).call(this,S);return _(this,mh,np).call(this,k),_(this,mr,Ka).call(this,E(y[0],A[0],5),E(y[1],A[1],5),E(y[2],A[2],5),k),h.url=`url(#${S})`,h.url}destroy(e=!1){e&&o(this,as,fr).size!==0||(o(this,sn)&&(o(this,sn).parentNode.parentNode.remove(),x(this,sn,null)),o(this,Ds)&&(o(this,Ds).clear(),x(this,Ds,null)),x(this,dr,0))}}Ds=new WeakMap,sn=new WeakMap,wn=new WeakMap,Vt=new WeakMap,ph=new WeakMap,dr=new WeakMap,ut=new WeakSet,vt=function(){return o(this,Ds)||x(this,Ds,new Map)},as=new WeakSet,fr=function(){return o(this,ph)||x(this,ph,new Map)},Os=new WeakSet,Gr=function(){if(!o(this,sn)){const i=o(this,Vt).createElement("div"),{style:e}=i;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const t=o(this,Vt).createElementNS(Wi,"svg");t.setAttribute("width",0),t.setAttribute("height",0),x(this,sn,o(this,Vt).createElementNS(Wi,"defs")),i.append(t),t.append(o(this,sn)),o(this,Vt).body.append(i)}return o(this,sn)},Ya=new WeakSet,gh=function(i){if(i.length===1){const l=i[0],h=new Array(256);for(let c=0;c<256;c++)h[c]=l[c]/255;const u=h.join(",");return[u,u,u]}const[e,t,n]=i,s=new Array(256),r=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=e[l]/255,r[l]=t[l]/255,a[l]=n[l]/255;return[s.join(","),r.join(","),a.join(",")]},ip=new WeakSet,kw=function(i){const e=o(this,Vt).createElementNS(Wi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),i.append(e)},mh=new WeakSet,np=function(i){const e=o(this,Vt).createElementNS(Wi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),i.append(e)},os=new WeakSet,pr=function(i){const e=o(this,Vt).createElementNS(Wi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",i),o(this,Os,Gr).append(e),e},gr=new WeakSet,Da=function(i,e,t){const n=o(this,Vt).createElementNS(Wi,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",t),i.append(n)},mr=new WeakSet,Ka=function(i,e,t,n){const s=o(this,Vt).createElementNS(Wi,"feComponentTransfer");n.append(s),_(this,gr,Da).call(this,s,"feFuncR",i),_(this,gr,Da).call(this,s,"feFuncG",e),_(this,gr,Da).call(this,s,"feFuncB",t)},vh=new WeakSet,sp=function(i,e){const t=o(this,Vt).createElementNS(Wi,"feComponentTransfer");e.append(t),_(this,gr,Da).call(this,t,"feFuncA",i)},vr=new WeakSet,Xa=function(i){return o(this,Os,Gr).style.color=i,ev(getComputedStyle(o(this,Os,Gr)).getPropertyValue("color"))};class jM extends kd{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function Md(i,e="text"){if(Qa(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Cw extends Cd{_fetchData(e,t){return Md(e,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):Ed(n),compressionType:t}))}}class Rw extends Rd{_fetchData(e){return Md(e,"arraybuffer").then(t=>new Uint8Array(t))}}class Xm extends Km{_createSVG(e){return document.createElementNS(Wi,e)}}class xl{constructor({viewBox:e,scale:t,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=s,this.offsetY=r;const l=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let u,c,f,g;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,c=0,f=0,g=1;break;case 90:u=0,c=1,f=1,g=0;break;case 270:u=0,c=-1,f=-1,g=0;break;case 0:u=1,c=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,g=-g);let y,A,E,S;u===0?(y=Math.abs(h-e[1])*t+s,A=Math.abs(l-e[0])*t+r,E=(e[3]-e[1])*t,S=(e[2]-e[0])*t):(y=Math.abs(l-e[0])*t+s,A=Math.abs(h-e[1])*t+r,E=(e[2]-e[0])*t,S=(e[3]-e[1])*t),this.transform=[u*t,c*t,f*t,g*t,y-u*t*l-f*t*h,A-c*t*l-g*t*h],this.width=E,this.height=S}get rawDims(){const{viewBox:e}=this;return Pe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new xl({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return de.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=de.applyTransform([e[0],e[1]],this.transform),n=de.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return de.applyInverseTransform([e,t],this.transform)}}class Qm extends Jn{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Zm(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function Jm(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function WM(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function BM(i,e="document.pdf"){if(typeof i!="string")return e;if(Zm(i))return Se('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||e}class i0{constructor(){Ae(this,"started",Object.create(null)),Ae(this,"times",[])}time(e){e in this.started&&Se(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Se(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Qa(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function Ht(i){i.preventDefault()}function Mw(i){console.log("Deprecated API usage: "+i)}let cf;class Tw{static toDateObject(e){if(!e||typeof e!="string")return null;cf||(cf=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=cf.exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(a+=c,l+=f):u==="+"&&(a-=c,l-=f),new Date(Date.UTC(n,s,r,a,l,h))}}function UM(i,{scale:e=1,rotation:t=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new xl({viewBox:r,scale:e,rotation:t})}function ev(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Se(`Not a valid color format: "${i}"`),[0,0,0])}function HM(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,ev(n))}e.remove()}function Ge(i){const{a:e,b:t,c:n,d:s,e:r,f:a}=i.getTransform();return[e,t,n,s,r,a]}function ji(i){const{a:e,b:t,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[e,t,n,s,r,a]}function Ys(i,e,t=!1,n=!0){if(e instanceof xl){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:a}=i,l=$t.isCSSRoundSupported,h=`var(--scale-factor) * ${s}px`,u=`var(--scale-factor) * ${r}px`,c=l?`round(${h}, 1px)`:`calc(${h})`,f=l?`round(${u}, 1px)`:`calc(${u})`;!t||e.rotation%180===0?(a.width=c,a.height=f):(a.width=f,a.height=c)}n&&i.setAttribute("data-main-rotation",e.rotation)}var yr,wr,rn,qr,rp,Pw,ap,n0,op,s0,qo,mu,lp,Lw,yh,hp;const Iw=class Dw{constructor(e){m(this,ap),m(this,op),m(this,qo),m(this,lp),m(this,yh),m(this,yr,null),m(this,wr,null),m(this,rn,void 0),m(this,qr,null),x(this,rn,e)}render(){const e=x(this,yr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ht),e.addEventListener("pointerdown",_(Dw,rp,Pw));const t=x(this,qr,document.createElement("div"));t.className="buttons",e.append(t);const n=o(this,rn).toolbarPosition;if(n){const{style:s}=e,r=o(this,rn)._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return _(this,lp,Lw).call(this),e}hide(){var e;o(this,yr).classList.add("hidden"),(e=o(this,wr))==null||e.hideDropdown()}show(){o(this,yr).classList.remove("hidden")}addAltTextButton(e){_(this,qo,mu).call(this,e),o(this,qr).prepend(e,o(this,yh,hp))}addColorPicker(e){x(this,wr,e);const t=e.renderButton();_(this,qo,mu).call(this,t),o(this,qr).prepend(t,o(this,yh,hp))}remove(){var e;o(this,yr).remove(),(e=o(this,wr))==null||e.destroy(),x(this,wr,null)}};yr=new WeakMap,wr=new WeakMap,rn=new WeakMap,qr=new WeakMap,rp=new WeakSet,Pw=function(i){i.stopPropagation()},ap=new WeakSet,n0=function(i){o(this,rn)._focusEventsAllowed=!1,i.preventDefault(),i.stopPropagation()},op=new WeakSet,s0=function(i){o(this,rn)._focusEventsAllowed=!0,i.preventDefault(),i.stopPropagation()},qo=new WeakSet,mu=function(i){i.addEventListener("focusin",_(this,ap,n0).bind(this),{capture:!0}),i.addEventListener("focusout",_(this,op,s0).bind(this),{capture:!0}),i.addEventListener("contextmenu",Ht)},lp=new WeakSet,Lw=function(){const i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",`pdfjs-editor-remove-${o(this,rn).editorType}-button`),_(this,qo,mu).call(this,i),i.addEventListener("click",e=>{o(this,rn)._uiManager.delete()}),o(this,qr).append(i)},yh=new WeakSet,hp=function(){const i=document.createElement("div");return i.className="divider",i},m(Iw,rp);let $M=Iw;var wh,Es,vu,cp,Ow,up,Nw,dp,r0;class zM{constructor(e){m(this,cp),m(this,up),m(this,dp),m(this,wh,null),m(this,Es,null),m(this,vu,void 0),x(this,vu,e)}show(e,t,n){const[s,r]=_(this,up,Nw).call(this,t,n),{style:a}=o(this,Es)||x(this,Es,_(this,cp,Ow).call(this));e.append(o(this,Es)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Es).remove()}}wh=new WeakMap,Es=new WeakMap,vu=new WeakMap,cp=new WeakSet,Ow=function(){const i=x(this,Es,document.createElement("div"));i.className="editToolbar",i.setAttribute("role","toolbar"),i.addEventListener("contextmenu",Ht);const e=x(this,wh,document.createElement("div"));return e.className="buttons",i.append(e),_(this,dp,r0).call(this),i},up=new WeakSet,Nw=function(i,e){let t=0,n=0;for(const s of i){const r=s.y+s.height;if(r<t)continue;const a=s.x+(e?s.width:0);if(r>t){n=a,t=r;continue}e?a>n&&(n=a):a<n&&(n=a)}return[e?1-n:n,t]},dp=new WeakSet,r0=function(){const i=document.createElement("button");i.className="highlightButton",i.tabIndex=0,i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");i.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),i.addEventListener("contextmenu",Ht),i.addEventListener("click",()=>{o(this,vu).highlightSelection("floating_button")}),o(this,wh).append(i)};function yu(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}function VM(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var fp;class GM{constructor(){m(this,fp,0)}get id(){return`${xM}${ai(this,fp)._++}`}}fp=new WeakMap;var wu,pp,Bt,bh,gp;const Fw=class{constructor(){m(this,bh),m(this,wu,NM()),m(this,pp,0),m(this,Bt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',t=new OffscreenCanvas(1,3).getContext("2d"),n=new Image;n.src=e;const s=n.decode().then(()=>(t.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]===0));return Pe(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:r}=e;return _(this,bh,gp).call(this,`${t}_${n}_${s}_${r}`,e)}async getFromUrl(e){return _(this,bh,gp).call(this,e,e)}async getFromId(e){o(this,Bt)||x(this,Bt,new Map);const t=o(this,Bt).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=o(this,Bt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){o(this,Bt)||x(this,Bt,new Map);const t=o(this,Bt).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${o(this,wu)}_`)}};wu=new WeakMap,pp=new WeakMap,Bt=new WeakMap,bh=new WeakSet,gp=async function(i,e){o(this,Bt)||x(this,Bt,new Map);let t=o(this,Bt).get(i);if(t===null)return null;if(t!=null&&t.bitmap)return t.refCounter+=1,t;try{t||(t={bitmap:null,id:`image_${o(this,wu)}_${ai(this,pp)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(t.url=e,n=await Md(e,"blob")):n=t.file=e,n.type==="image/svg+xml"){const s=Fw._isSVGFittingCanvas,r=new FileReader,a=new Image,l=new Promise((h,u)=>{a.onload=()=>{t.bitmap=a,t.isSvg=!0,h()},r.onload=async()=>{const c=t.svgUrl=r.result;a.src=await s?`${c}#svgView(preserveAspectRatio(none))`:c},a.onerror=r.onerror=u});r.readAsDataURL(n),await l}else t.bitmap=await createImageBitmap(n);t.refCounter=1}catch(n){console.error(n),t=null}return o(this,Bt).set(i,t),t&&o(this,Bt).set(t.id,t),t};let qM=Fw;var dt,ls,Ah,et;class YM{constructor(e=128){m(this,dt,[]),m(this,ls,!1),m(this,Ah,void 0),m(this,et,-1),x(this,Ah,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&e(),o(this,ls))return;const h={cmd:e,undo:t,post:n,type:r};if(o(this,et)===-1){o(this,dt).length>0&&(o(this,dt).length=0),x(this,et,0),o(this,dt).push(h);return}if(a&&o(this,dt)[o(this,et)].type===r){l&&(h.undo=o(this,dt)[o(this,et)].undo),o(this,dt)[o(this,et)]=h;return}const u=o(this,et)+1;u===o(this,Ah)?o(this,dt).splice(0,1):(x(this,et,u),u<o(this,dt).length&&o(this,dt).splice(u)),o(this,dt).push(h)}undo(){if(o(this,et)===-1)return;x(this,ls,!0);const{undo:e,post:t}=o(this,dt)[o(this,et)];e(),t==null||t(),x(this,ls,!1),x(this,et,o(this,et)-1)}redo(){if(o(this,et)<o(this,dt).length-1){x(this,et,o(this,et)+1),x(this,ls,!0);const{cmd:e,post:t}=o(this,dt)[o(this,et)];e(),t==null||t(),x(this,ls,!1)}}hasSomethingToUndo(){return o(this,et)!==-1}hasSomethingToRedo(){return o(this,et)<o(this,dt).length-1}destroy(){x(this,dt,null)}}dt=new WeakMap,ls=new WeakMap,Ah=new WeakMap,et=new WeakMap;var mp,jw;class El{constructor(e){m(this,mp),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=$t.platform;for(const[n,s,r={}]of e)for(const a of n){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(_(this,mp,jw).call(this,t));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(e,t)||(s.bind(e,...a,t)(),r||(t.stopPropagation(),t.preventDefault()))}}mp=new WeakSet,jw=function(i){i.altKey&&this.buffer.push("alt"),i.ctrlKey&&this.buffer.push("ctrl"),i.metaKey&&this.buffer.push("meta"),i.shiftKey&&this.buffer.push("shift"),this.buffer.push(i.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Ww=class Bw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return HM(e),Pe(this,"_colors",e)}convert(e){const t=ev(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((r,a)=>r===t[a]))return Bw._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?de.makeHexColor(...t):e}};Ae(Ww,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let KM=Ww;var Qt,at,At,Za,bn,br,vi,Ja,Ar,Bi,An,_r,bu,_h,Ui,eo,Ss,Ci,vp,ks,xh,xr,Eh,to,St,Ne,_n,Er,io,Sh,kh,Ch,Rh,Mh,Th,Ph,Lh,Ih,Dh,Oh,Nh,Fh,hs,Hi,xn,jh,Yo,Wh,yp,a0,wp,Uw,Ko,Au,bp,Hw,Ap,$w,_p,zw,Bh,xp,Uh,Ep,Hh,Sp,$h,kp,zh,Cp,xt,Pt,Zi,Ln,Rp,Vw,Mp,Gw,Vh,Tp,Pp,qw,Sr,no,Gh,Lp;const Ip=class Dp{constructor(e,t,n,s,r,a,l,h,u){m(this,Yo),m(this,yp),m(this,wp),m(this,Ko),m(this,bp),m(this,Ap),m(this,_p),m(this,Bh),m(this,Uh),m(this,Hh),m(this,$h),m(this,zh),m(this,xt),m(this,Zi),m(this,Rp),m(this,Mp),m(this,Vh),m(this,Pp),m(this,Sr),m(this,Gh),m(this,Qt,null),m(this,at,new Map),m(this,At,new Map),m(this,Za,null),m(this,bn,null),m(this,br,null),m(this,vi,new YM),m(this,Ja,0),m(this,Ar,new Set),m(this,Bi,null),m(this,An,null),m(this,_r,new Set),m(this,bu,!1),m(this,_h,null),m(this,Ui,null),m(this,eo,null),m(this,Ss,!1),m(this,Ci,null),m(this,vp,new GM),m(this,ks,!1),m(this,xh,!1),m(this,xr,null),m(this,Eh,null),m(this,to,null),m(this,St,Te.NONE),m(this,Ne,new Set),m(this,_n,null),m(this,Er,null),m(this,io,null),m(this,Sh,this.blur.bind(this)),m(this,kh,this.focus.bind(this)),m(this,Ch,this.copy.bind(this)),m(this,Rh,this.cut.bind(this)),m(this,Mh,this.paste.bind(this)),m(this,Th,this.keydown.bind(this)),m(this,Ph,this.keyup.bind(this)),m(this,Lh,this.onEditingAction.bind(this)),m(this,Ih,this.onPageChanging.bind(this)),m(this,Dh,this.onScaleChanging.bind(this)),m(this,Oh,_(this,wp,Uw).bind(this)),m(this,Nh,this.onRotationChanging.bind(this)),m(this,Fh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),m(this,hs,[0,0]),m(this,Hi,null),m(this,xn,null),m(this,jh,null),x(this,xn,e),x(this,jh,t),x(this,Za,n),this._eventBus=s,this._eventBus._on("editingaction",o(this,Lh)),this._eventBus._on("pagechanging",o(this,Ih)),this._eventBus._on("scalechanging",o(this,Dh)),this._eventBus._on("rotationchanging",o(this,Nh)),_(this,bp,Hw).call(this),_(this,Uh,Ep).call(this),x(this,bn,r.annotationStorage),x(this,_h,r.filterFactory),x(this,Er,a),x(this,eo,l||null),x(this,bu,h),x(this,to,u||null),this.viewParameters={realScale:ka.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Dp.prototype,t=a=>o(a,xn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:h}=l;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new El([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,xn).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,xn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t;_(this,Hh,Sp).call(this),_(this,Bh,xp).call(this),this._eventBus._off("editingaction",o(this,Lh)),this._eventBus._off("pagechanging",o(this,Ih)),this._eventBus._off("scalechanging",o(this,Dh)),this._eventBus._off("rotationchanging",o(this,Nh));for(const n of o(this,At).values())n.destroy();o(this,At).clear(),o(this,at).clear(),o(this,_r).clear(),x(this,Qt,null),o(this,Ne).clear(),o(this,vi).destroy(),(e=o(this,Za))==null||e.destroy(),(t=o(this,Ci))==null||t.hide(),x(this,Ci,null),o(this,Ui)&&(clearTimeout(o(this,Ui)),x(this,Ui,null)),o(this,Hi)&&(clearTimeout(o(this,Hi)),x(this,Hi,null)),_(this,Ap,$w).call(this)}async mlGuess(e){var t;return((t=o(this,to))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!o(this,to)}get hcmFilter(){return Pe(this,"hcmFilter",o(this,Er)?o(this,_h).addHCMFilter(o(this,Er).foreground,o(this,Er).background):"none")}get direction(){return Pe(this,"direction",getComputedStyle(o(this,xn)).direction)}get highlightColors(){return Pe(this,"highlightColors",o(this,eo)?new Map(o(this,eo).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Pe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){x(this,Eh,e)}editAltText(e){var t;(t=o(this,Za))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){x(this,Ja,e-1)}focusMainContainer(){o(this,xn).focus()}findParent(e,t){for(const n of o(this,At).values()){const{x:s,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=r&&t<=r+l)return n}return null}disableUserSelect(e=!1){o(this,jh).classList.toggle("noUserSelect",e)}addShouldRescale(e){o(this,_r).add(e)}removeShouldRescale(e){o(this,_r).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ka.PDF_TO_CSS_UNITS;for(const t of o(this,_r))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a}=t,l=t.toString(),h=_(this,Yo,Wh).call(this,t).closest(".textLayer"),u=this.getSelectionBoxes(h);if(u){t.empty(),o(this,St)===Te.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Te.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const c of o(this,At).values())if(c.hasTextLayer(h)){c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a,text:l});break}}}addToAnnotationStorage(e){!e.isEmpty()&&o(this,bn)&&!o(this,bn).has(e.id)&&o(this,bn).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,o(this,Ss)&&(x(this,Ss,!1),_(this,Ko,Au).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of o(this,Ne))if(t.div.contains(e)){x(this,xr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!o(this,xr))return;const[e,t]=o(this,xr);x(this,xr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}addEditListeners(){_(this,Uh,Ep).call(this),_(this,$h,kp).call(this)}removeEditListeners(){_(this,Hh,Sp).call(this),_(this,zh,Cp).call(this)}copy(e){var t;if(e.preventDefault(),(t=o(this,Qt))==null||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of o(this,Ne)){const r=s.serialize(!0);r&&n.push(r)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of o(this,An))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){Se(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const h of n){const u=s.deserialize(h);if(!u)return;r.push(u)}const a=()=>{for(const h of r)_(this,Vh,Tp).call(this,h);_(this,Gh,Lp).call(this,r)},l=()=>{for(const h of r)h.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){Se(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,St)!==Te.NONE&&!this.isEditorHandlingKeyboard&&Dp._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,Ss)&&(x(this,Ss,!1),_(this,Ko,Au).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(_(this,_p,zw).call(this),_(this,$h,kp).call(this),_(this,xt,Pt).call(this,{isEditing:o(this,St)!==Te.NONE,isEmpty:_(this,Sr,no).call(this),hasSomethingToUndo:o(this,vi).hasSomethingToUndo(),hasSomethingToRedo:o(this,vi).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,Bh,xp).call(this),_(this,zh,Cp).call(this),_(this,xt,Pt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!o(this,An)){x(this,An,e);for(const t of o(this,An))_(this,Zi,Ln).call(this,t.defaultPropertiesToUpdate)}}getId(){return o(this,vp).id}get currentLayer(){return o(this,At).get(o(this,Ja))}getLayer(e){return o(this,At).get(e)}get currentPageIndex(){return o(this,Ja)}addLayer(e){o(this,At).set(e.pageIndex,e),o(this,ks)?e.enable():e.disable()}removeLayer(e){o(this,At).delete(e.pageIndex)}updateMode(e,t=null,n=!1){if(o(this,St)!==e){if(x(this,St,e),e===Te.NONE){this.setEditingState(!1),_(this,Mp,Gw).call(this);return}this.setEditingState(!0),_(this,Rp,Vw).call(this),this.unselectAll();for(const s of o(this,At).values())s.updateMode(e);if(!t&&n){this.addNewEditorFromKeyboard();return}if(t){for(const s of o(this,at).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==o(this,St)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(o(this,An)){switch(e){case we.CREATE:this.currentLayer.addNewEditor();return;case we.HIGHLIGHT_DEFAULT_COLOR:(n=o(this,Eh))==null||n.updateColor(t);break;case we.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,io)||x(this,io,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of o(this,Ne))s.updateParams(e,t);for(const s of o(this,An))s.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const r of o(this,at).values())r.editorType===e&&r.show(t);(((s=o(this,io))==null?void 0:s.get(we.HIGHLIGHT_SHOW_ALL))??!0)!==t&&_(this,Zi,Ln).call(this,[[we.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(o(this,xh)!==e){x(this,xh,e);for(const t of o(this,At).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of o(this,at).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return o(this,at).get(e)}addEditor(e){o(this,at).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(o(this,Ui)&&clearTimeout(o(this,Ui)),x(this,Ui,setTimeout(()=>{this.focusMainContainer(),x(this,Ui,null)},0))),o(this,at).delete(e.id),this.unselect(e),(!e.annotationElementId||!o(this,Ar).has(e.annotationElementId))&&((t=o(this,bn))==null||t.remove(e.id))}addDeletedAnnotationElement(e){o(this,Ar).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return o(this,Ar).has(e)}removeDeletedAnnotationElement(e){o(this,Ar).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){o(this,Qt)!==e&&(x(this,Qt,e),e&&_(this,Zi,Ln).call(this,e.propertiesToUpdate))}updateUI(e){o(this,Pp,qw)===e&&_(this,Zi,Ln).call(this,e.propertiesToUpdate)}toggleSelected(e){if(o(this,Ne).has(e)){o(this,Ne).delete(e),e.unselect(),_(this,xt,Pt).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Ne).add(e),e.select(),_(this,Zi,Ln).call(this,e.propertiesToUpdate),_(this,xt,Pt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of o(this,Ne))t!==e&&t.unselect();o(this,Ne).clear(),o(this,Ne).add(e),e.select(),_(this,Zi,Ln).call(this,e.propertiesToUpdate),_(this,xt,Pt).call(this,{hasSelectedEditor:!0})}isSelected(e){return o(this,Ne).has(e)}get firstSelectedEditor(){return o(this,Ne).values().next().value}unselect(e){e.unselect(),o(this,Ne).delete(e),_(this,xt,Pt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Ne).size!==0}get isEnterHandled(){return o(this,Ne).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){o(this,vi).undo(),_(this,xt,Pt).call(this,{hasSomethingToUndo:o(this,vi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,Sr,no).call(this)})}redo(){o(this,vi).redo(),_(this,xt,Pt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,vi).hasSomethingToRedo(),isEmpty:_(this,Sr,no).call(this)})}addCommands(e){o(this,vi).add(e),_(this,xt,Pt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,Sr,no).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...o(this,Ne)],t=()=>{for(const s of e)s.remove()},n=()=>{for(const s of e)_(this,Vh,Tp).call(this,s)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=o(this,Qt))==null||e.commitOrRemove()}hasSomethingToControl(){return o(this,Qt)||this.hasSelection}selectAll(){for(const e of o(this,Ne))e.commit();_(this,Gh,Lp).call(this,o(this,at).values())}unselectAll(){if(!(o(this,Qt)&&(o(this,Qt).commitOrRemove(),o(this,St)!==Te.NONE))&&this.hasSelection){for(const e of o(this,Ne))e.unselect();o(this,Ne).clear(),_(this,xt,Pt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;o(this,hs)[0]+=e,o(this,hs)[1]+=t;const[s,r]=o(this,hs),a=[...o(this,Ne)];o(this,Hi)&&clearTimeout(o(this,Hi)),x(this,Hi,setTimeout(()=>{x(this,Hi,null),o(this,hs)[0]=o(this,hs)[1]=0,this.addCommands({cmd:()=>{for(const h of a)o(this,at).has(h.id)&&h.translateInPage(s,r)},undo:()=>{for(const h of a)o(this,at).has(h.id)&&h.translateInPage(-s,-r)},mustExec:!1})},1e3));for(const h of a)h.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Bi,new Map);for(const e of o(this,Ne))o(this,Bi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,Bi))return!1;this.disableUserSelect(!1);const e=o(this,Bi);x(this,Bi,null);let t=!1;for(const[{x:s,y:r,pageIndex:a},l]of e)l.newX=s,l.newY=r,l.newPageIndex=a,t||(t=s!==l.savedX||r!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const n=(s,r,a,l)=>{if(o(this,at).has(s.id)){const h=o(this,At).get(l);h?s._setParentAndPosition(h,r,a):(s.pageIndex=l,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:l}]of e)n(s,r,a,l)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:l}]of e)n(s,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(o(this,Bi))for(const n of o(this,Bi).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||o(this,Ne).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return o(this,Qt)===e}getActive(){return o(this,Qt)}getMode(){return o(this,St)}get imageManager(){return Pe(this,"imageManager",new qM)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,c=t.rangeCount;u<c;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,c,f,g)=>({x:(c-s)/a,y:1-(u+f-n)/r,width:g/a,height:f/r});break;case"180":l=(u,c,f,g)=>({x:1-(u+f-n)/r,y:1-(c+g-s)/a,width:f/r,height:g/a});break;case"270":l=(u,c,f,g)=>({x:1-(c+g-s)/a,y:(u-n)/r,width:g/a,height:f/r});break;default:l=(u,c,f,g)=>({x:(u-n)/r,y:(c-s)/a,width:f/r,height:g/a});break}const h=[];for(let u=0,c=t.rangeCount;u<c;u++){const f=t.getRangeAt(u);if(!f.collapsed)for(const{x:g,y,width:A,height:E}of f.getClientRects())A===0||E===0||h.push(l(g,y,A,E))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(o(this,br)||x(this,br,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=o(this,br))==null||t.delete(e)}renderAnnotationElement(e){var t;const n=(t=o(this,br))==null?void 0:t.get(e.data.id);if(!n)return;const s=o(this,bn).getRawValue(n);s&&(o(this,St)===Te.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};Qt=new WeakMap,at=new WeakMap,At=new WeakMap,Za=new WeakMap,bn=new WeakMap,br=new WeakMap,vi=new WeakMap,Ja=new WeakMap,Ar=new WeakMap,Bi=new WeakMap,An=new WeakMap,_r=new WeakMap,bu=new WeakMap,_h=new WeakMap,Ui=new WeakMap,eo=new WeakMap,Ss=new WeakMap,Ci=new WeakMap,vp=new WeakMap,ks=new WeakMap,xh=new WeakMap,xr=new WeakMap,Eh=new WeakMap,to=new WeakMap,St=new WeakMap,Ne=new WeakMap,_n=new WeakMap,Er=new WeakMap,io=new WeakMap,Sh=new WeakMap,kh=new WeakMap,Ch=new WeakMap,Rh=new WeakMap,Mh=new WeakMap,Th=new WeakMap,Ph=new WeakMap,Lh=new WeakMap,Ih=new WeakMap,Dh=new WeakMap,Oh=new WeakMap,Nh=new WeakMap,Fh=new WeakMap,hs=new WeakMap,Hi=new WeakMap,xn=new WeakMap,jh=new WeakMap,Yo=new WeakSet,Wh=function({anchorNode:i}){return i.nodeType===Node.TEXT_NODE?i.parentElement:i},yp=new WeakSet,a0=function(){const i=document.getSelection();if(!i||i.isCollapsed)return;const e=_(this,Yo,Wh).call(this,i).closest(".textLayer"),t=this.getSelectionBoxes(e);t&&(o(this,Ci)||x(this,Ci,new zM(this)),o(this,Ci).show(e,t,this.direction==="ltr"))},wp=new WeakSet,Uw=function(){var i,e,t;const n=document.getSelection();if(!n||n.isCollapsed){o(this,_n)&&((i=o(this,Ci))==null||i.hide(),x(this,_n,null),_(this,xt,Pt).call(this,{hasSelectedText:!1}));return}const{anchorNode:s}=n;if(s!==o(this,_n)){if(!_(this,Yo,Wh).call(this,n).closest(".textLayer")){o(this,_n)&&((e=o(this,Ci))==null||e.hide(),x(this,_n,null),_(this,xt,Pt).call(this,{hasSelectedText:!1}));return}if((t=o(this,Ci))==null||t.hide(),x(this,_n,s),_(this,xt,Pt).call(this,{hasSelectedText:!0}),!(o(this,St)!==Te.HIGHLIGHT&&o(this,St)!==Te.NONE)&&(o(this,St)===Te.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Ss,this.isShiftKeyDown),!this.isShiftKeyDown)){const r=a=>{a.type==="pointerup"&&a.button!==0||(window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),a.type==="pointerup"&&_(this,Ko,Au).call(this,"main_toolbar"))};window.addEventListener("pointerup",r),window.addEventListener("blur",r)}}},Ko=new WeakSet,Au=function(i=""){o(this,St)===Te.HIGHLIGHT?this.highlightSelection(i):o(this,bu)&&_(this,yp,a0).call(this)},bp=new WeakSet,Hw=function(){document.addEventListener("selectionchange",o(this,Oh))},Ap=new WeakSet,$w=function(){document.removeEventListener("selectionchange",o(this,Oh))},_p=new WeakSet,zw=function(){window.addEventListener("focus",o(this,kh)),window.addEventListener("blur",o(this,Sh))},Bh=new WeakSet,xp=function(){window.removeEventListener("focus",o(this,kh)),window.removeEventListener("blur",o(this,Sh))},Uh=new WeakSet,Ep=function(){window.addEventListener("keydown",o(this,Th)),window.addEventListener("keyup",o(this,Ph))},Hh=new WeakSet,Sp=function(){window.removeEventListener("keydown",o(this,Th)),window.removeEventListener("keyup",o(this,Ph))},$h=new WeakSet,kp=function(){document.addEventListener("copy",o(this,Ch)),document.addEventListener("cut",o(this,Rh)),document.addEventListener("paste",o(this,Mh))},zh=new WeakSet,Cp=function(){document.removeEventListener("copy",o(this,Ch)),document.removeEventListener("cut",o(this,Rh)),document.removeEventListener("paste",o(this,Mh))},xt=new WeakSet,Pt=function(i){Object.entries(i).some(([e,t])=>o(this,Fh)[e]!==t)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Fh),i)}),o(this,St)===Te.HIGHLIGHT&&i.hasSelectedEditor===!1&&_(this,Zi,Ln).call(this,[[we.HIGHLIGHT_FREE,!0]]))},Zi=new WeakSet,Ln=function(i){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:i})},Rp=new WeakSet,Vw=function(){if(!o(this,ks)){x(this,ks,!0);for(const i of o(this,At).values())i.enable();for(const i of o(this,at).values())i.enable()}},Mp=new WeakSet,Gw=function(){if(this.unselectAll(),o(this,ks)){x(this,ks,!1);for(const i of o(this,At).values())i.disable();for(const i of o(this,at).values())i.disable()}},Vh=new WeakSet,Tp=function(i){const e=o(this,At).get(i.pageIndex);e?e.addOrRebuild(i):(this.addEditor(i),this.addToAnnotationStorage(i))},Pp=new WeakSet,qw=function(){let i=null;for(i of o(this,Ne));return i},Sr=new WeakSet,no=function(){if(o(this,at).size===0)return!0;if(o(this,at).size===1)for(const i of o(this,at).values())return i.isEmpty();return!1},Gh=new WeakSet,Lp=function(i){for(const e of o(this,Ne))e.unselect();o(this,Ne).clear();for(const e of i)e.isEmpty()||(o(this,Ne).add(e),e.select());_(this,xt,Pt).call(this,{hasSelectedEditor:this.hasSelection})},Ae(Ip,"TRANSLATE_SMALL",1),Ae(Ip,"TRANSLATE_BIG",10);let wl=Ip;var Fn,jn,bi,In,Pi,so,qn,qh,Op;const Yh=class Kh{constructor(e){m(this,qh),m(this,Fn,""),m(this,jn,!1),m(this,bi,null),m(this,In,null),m(this,Pi,null),m(this,so,!1),m(this,qn,null),x(this,qn,e)}static initialize(e){Kh._l10nPromise||(Kh._l10nPromise=e)}async render(){const e=x(this,bi,document.createElement("button"));e.className="altText";const t=await Kh._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",Ht),e.addEventListener("pointerdown",s=>s.stopPropagation());const n=s=>{s.preventDefault(),o(this,qn)._uiManager.editAltText(o(this,qn))};return e.addEventListener("click",n,{capture:!0}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(x(this,so,!0),n(s))}),await _(this,qh,Op).call(this),e}finish(){o(this,bi)&&(o(this,bi).focus({focusVisible:o(this,so)}),x(this,so,!1))}isEmpty(){return!o(this,Fn)&&!o(this,jn)}get data(){return{altText:o(this,Fn),decorative:o(this,jn)}}set data({altText:e,decorative:t}){o(this,Fn)===e&&o(this,jn)===t||(x(this,Fn,e),x(this,jn,t),_(this,qh,Op).call(this))}toggle(e=!1){o(this,bi)&&(!e&&o(this,Pi)&&(clearTimeout(o(this,Pi)),x(this,Pi,null)),o(this,bi).disabled=!e)}destroy(){var e;(e=o(this,bi))==null||e.remove(),x(this,bi,null),x(this,In,null)}};Fn=new WeakMap,jn=new WeakMap,bi=new WeakMap,In=new WeakMap,Pi=new WeakMap,so=new WeakMap,qn=new WeakMap,qh=new WeakSet,Op=async function(){var i;const e=o(this,bi);if(!e)return;if(!o(this,Fn)&&!o(this,jn)){e.classList.remove("done"),(i=o(this,In))==null||i.remove();return}e.classList.add("done"),Yh._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(s=>{e.setAttribute("aria-label",s)});let t=o(this,In);if(!t){x(this,In,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const s=t.id=`alt-text-tooltip-${o(this,qn).id}`;e.setAttribute("aria-describedby",s);const r=100;e.addEventListener("mouseenter",()=>{x(this,Pi,setTimeout(()=>{x(this,Pi,null),o(this,In).classList.add("show"),o(this,qn)._reportTelemetry({action:"alt_text_tooltip"})},r))}),e.addEventListener("mouseleave",()=>{var a;o(this,Pi)&&(clearTimeout(o(this,Pi)),x(this,Pi,null)),(a=o(this,In))==null||a.classList.remove("show")})}t.innerText=o(this,jn)?await Yh._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):o(this,Fn),t.parentNode||e.append(t);const n=o(this,qn).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},Ae(Yh,"_l10nPromise",null);let o0=Yh;var Ri,Nt,ro,kr,kt,Yr,ao,oo,Tt,_u,Kr,$i,Xh,Cr,Yn,zi,lo,ho,Zt,Qh,Np,Zh,Fp,xu,jp,Jh,uf,Wp,Yw,Bp,l0,ec,df,Eu,Up,Su,Hp,$p,Kw,zp,Xw,Vp,Qw,Gp,Zw,ku,qp,Xr,Xo;const Vi=class ft{constructor(e){m(this,Zh),m(this,Jh),m(this,Wp),m(this,Bp),m(this,ec),m(this,Eu),m(this,Su),m(this,$p),m(this,zp),m(this,Vp),m(this,Gp),m(this,ku),m(this,Xr),m(this,Ri,null),m(this,Nt,null),m(this,ro,!1),m(this,kr,!1),m(this,kt,null),m(this,Yr,null),m(this,ao,this.focusin.bind(this)),m(this,oo,this.focusout.bind(this)),m(this,Tt,null),m(this,_u,""),m(this,Kr,!1),m(this,$i,null),m(this,Xh,!1),m(this,Cr,!1),m(this,Yn,!1),m(this,zi,null),m(this,lo,0),m(this,ho,0),m(this,Zt,null),Ae(this,"_initialOptions",Object.create(null)),Ae(this,"_isVisible",!0),Ae(this,"_uiManager",null),Ae(this,"_focusEventsAllowed",!0),Ae(this,"_l10nPromise",null),m(this,Qh,!1),m(this,Np,ft._zIndex++),this.constructor===ft&&Fe("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[l,h]=this.parentDimensions;this.x=e.x/l,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ft.prototype._resizeWithKeyboard,t=wl.TRANSLATE_SMALL,n=wl.TRANSLATE_BIG;return Pe(this,"_resizerKeyboardManager",new El([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],ft.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Pe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new XM({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,n){if(ft._l10nPromise||(ft._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,e.get(r.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))]))),n!=null&&n.strings)for(const r of n.strings)ft._l10nPromise.set(r,e.get(r));if(ft._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ft._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,Qh)}set _isDraggable(e){var t;x(this,Qh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,Np)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):_(this,Xr,Xo).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(o(this,Kr)?x(this,Kr,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(t=this.parent)!=null&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/r,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){_(this,Zh,Fp).call(this,this.parentDimensions,e,t)}translateInPage(e,t){o(this,$i)||x(this,$i,[this.x,this.y]),_(this,Zh,Fp).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){o(this,$i)||x(this,$i,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:c}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,c)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,h]=this.getBaseTranslation();r+=l,a+=h,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!o(this,$i)&&(o(this,$i)[0]!==this.x||o(this,$i)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=ft,s=n/e,r=n/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:s,y:r,width:a,height:l}=this;if(a*=t,l*=n,s*=t,r*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),r=Math.max(0,Math.min(n-l,r));break;case 90:s=Math.max(0,Math.min(t-l,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(t,Math.max(a,s)),r=Math.min(n,Math.max(l,r));break;case 270:s=Math.min(t,Math.max(l,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=t,this.y=r/=n;const[h,u]=this.getBaseTranslation();s+=h,r+=u;const{style:c}=this.div;c.left=`${(100*s).toFixed(2)}%`,c.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return _(n=ft,xu,jp).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return _(n=ft,xu,jp).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,s=t*e,r=n*e;return $t.isCSSRoundSupported?[Math.round(s),Math.round(r)]:[s,r]}setDims(e,t){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,o(this,kr)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),r=!o(this,kr)&&t.endsWith("%");if(s&&r)return;const[a,l]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!o(this,kr)&&!r&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=o(this,Nt))==null||e.finish()}async addEditToolbar(){return o(this,Tt)||o(this,Cr)?o(this,Tt):(x(this,Tt,new $M(this)),this.div.append(o(this,Tt).render()),o(this,Nt)&&o(this,Tt).addAltTextButton(await o(this,Nt).render()),o(this,Tt))}removeEditToolbar(){var e;o(this,Tt)&&(o(this,Tt).remove(),x(this,Tt,null),(e=o(this,Nt))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,Nt)||(o0.initialize(ft._l10nPromise),x(this,Nt,new o0(this)),await this.addEditToolbar())}get altTextData(){var e;return(e=o(this,Nt))==null?void 0:e.data}set altTextData(e){o(this,Nt)&&(o(this,Nt).data=e)}hasAltText(){var e;return!((e=o(this,Nt))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,ro)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",o(this,ao)),this.div.addEventListener("focusout",o(this,oo));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),yu(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=$t.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Kr,!0),this._isDraggable){_(this,$p,Kw).call(this,e);return}_(this,Su,Hp).call(this,e)}moveInDOM(){o(this,zi)&&clearTimeout(o(this,zi)),x(this,zi,setTimeout(()=>{var e;x(this,zi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[l,h]=this.pageTranslation,u=e/s,c=t/s,f=this.x*r,g=this.y*a,y=this.width*r,A=this.height*a;switch(n){case 0:return[f+u+l,a-g-c-A+h,f+u+y+l,a-g-c+h];case 90:return[f+c+l,a-g+u+h,f+c+A+l,a-g+u+y+h];case 180:return[f-u-y+l,a-g+c+h,f-u+l,a-g+c+A+h];case 270:return[f-c-A+l,a-g-u-y+h,f-c+l,a-g-u+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,r,a]=e,l=r-n,h=a-s;switch(this.rotation){case 0:return[n,t-a,l,h];case 90:return[n,t-s,h,l];case 180:return[r,t-s,l,h];case 270:return[r,t-a,h,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,Cr,!0)}disableEditMode(){x(this,Cr,!1)}isInEditMode(){return o(this,Cr)}shouldGetKeyboardEvents(){return o(this,Yn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;(e=this.div)==null||e.addEventListener("focusin",o(this,ao)),(t=this.div)==null||t.addEventListener("focusout",o(this,oo))}rotate(e){}serialize(e=!1,t=null){Fe("An editor must be serializable")}static deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation;const[r,a]=s.pageDimensions,[l,h,u,c]=s.getRectInCurrentCoords(e.rect,a);return s.x=l/r,s.y=h/a,s.width=u/r,s.height=c/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",o(this,ao)),this.div.removeEventListener("focusout",o(this,oo)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,zi)&&(clearTimeout(o(this,zi)),x(this,zi,null)),_(this,Xr,Xo).call(this),this.removeEditToolbar(),o(this,Zt)){for(const e of o(this,Zt).values())clearTimeout(e);x(this,Zt,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,Wp,Yw).call(this),o(this,kt).classList.remove("hidden"),yu(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Yr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=o(this,kt).children;if(!o(this,Ri)){x(this,Ri,Array.from(t));const a=_(this,zp,Xw).bind(this),l=_(this,Vp,Qw).bind(this);for(const h of o(this,Ri)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a),h.addEventListener("blur",l),h.addEventListener("focus",_(this,Gp,Zw).bind(this,u)),ft._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(c=>h.setAttribute("aria-label",c))}}const n=o(this,Ri)[0];let s=0;for(const a of t){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(o(this,Ri).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)o(this,kt).append(o(this,kt).firstChild);else if(r>s)for(let l=0;l<r-s;l++)o(this,kt).firstChild.before(o(this,kt).lastChild);let a=0;for(const l of t){const h=o(this,Ri)[a++].getAttribute("data-resizer-name");ft._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(u=>l.setAttribute("aria-label",u))}}_(this,ku,qp).call(this,0),x(this,Yn,!0),o(this,kt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){o(this,Yn)&&_(this,Eu,Up).call(this,o(this,_u),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){_(this,Xr,Xo).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!o(this,Tt)){this.addEditToolbar().then(()=>{var n,s;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((s=o(this,Tt))==null||s.show())});return}(t=o(this,Tt))==null||t.show()}unselect(){var e,t,n,s;(e=o(this,kt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=o(this,Tt))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,Xh)}set isEditing(e){x(this,Xh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,kr,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){o(this,Zt)||x(this,Zt,new Map);const{action:n}=e;let s=o(this,Zt).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),o(this,Zt).delete(n),o(this,Zt).size===0&&x(this,Zt,null)},ft._telemetryTimeout),o(this,Zt).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,ro,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,ro,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ri=new WeakMap,Nt=new WeakMap,ro=new WeakMap,kr=new WeakMap,kt=new WeakMap,Yr=new WeakMap,ao=new WeakMap,oo=new WeakMap,Tt=new WeakMap,_u=new WeakMap,Kr=new WeakMap,$i=new WeakMap,Xh=new WeakMap,Cr=new WeakMap,Yn=new WeakMap,zi=new WeakMap,lo=new WeakMap,ho=new WeakMap,Zt=new WeakMap,Qh=new WeakMap,Np=new WeakMap,Zh=new WeakSet,Fp=function([i,e],t,n){[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/e,this.fixAndSetPosition()},xu=new WeakSet,jp=function(i,e,t){switch(t){case 90:return[e,-i];case 180:return[-i,-e];case 270:return[-e,i];default:return[i,e]}},Jh=new WeakSet,uf=function(i){switch(i){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}},Wp=new WeakSet,Yw=function(){if(o(this,kt))return;x(this,kt,document.createElement("div")),o(this,kt).classList.add("resizers");const i=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const e of i){const t=document.createElement("div");o(this,kt).append(t),t.classList.add("resizer",e),t.setAttribute("data-resizer-name",e),t.addEventListener("pointerdown",_(this,Bp,l0).bind(this,e)),t.addEventListener("contextmenu",Ht),t.tabIndex=-1}this.div.prepend(o(this,kt))},Bp=new WeakSet,l0=function(i,e){var t;e.preventDefault();const{isMac:n}=$t.platform;if(e.button!==0||e.ctrlKey&&n)return;(t=o(this,Nt))==null||t.toggle(!1);const s=_(this,Eu,Up).bind(this,i),r=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",Ht);const l=this.x,h=this.y,u=this.width,c=this.height,f=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const y=()=>{var A;this.parent.togglePointerEvents(!0),(A=o(this,Nt))==null||A.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",y),window.removeEventListener("blur",y),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",Ht),this.parent.div.style.cursor=f,this.div.style.cursor=g,_(this,ec,df).call(this,l,h,u,c)};window.addEventListener("pointerup",y),window.addEventListener("blur",y)},ec=new WeakSet,df=function(i,e,t,n){const s=this.x,r=this.y,a=this.width,l=this.height;s===i&&r===e&&a===t&&l===n||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=r;const[h,u]=this.parentDimensions;this.setDims(h*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=t,this.height=n,this.x=i,this.y=e;const[h,u]=this.parentDimensions;this.setDims(h*t,u*n),this.fixAndSetPosition()},mustExec:!0})},Eu=new WeakSet,Up=function(i,e){const[t,n]=this.parentDimensions,s=this.x,r=this.y,a=this.width,l=this.height,h=Vi.MIN_SIZE/t,u=Vi.MIN_SIZE/n,c=V=>Math.round(V*1e4)/1e4,f=_(this,Jh,uf).call(this,this.rotation),g=(V,O)=>[f[0]*V+f[2]*O,f[1]*V+f[3]*O],y=_(this,Jh,uf).call(this,360-this.rotation),A=(V,O)=>[y[0]*V+y[2]*O,y[1]*V+y[3]*O];let E,S,k=!1,R=!1;switch(i){case"topLeft":k=!0,E=(V,O)=>[0,0],S=(V,O)=>[V,O];break;case"topMiddle":E=(V,O)=>[V/2,0],S=(V,O)=>[V/2,O];break;case"topRight":k=!0,E=(V,O)=>[V,0],S=(V,O)=>[0,O];break;case"middleRight":R=!0,E=(V,O)=>[V,O/2],S=(V,O)=>[0,O/2];break;case"bottomRight":k=!0,E=(V,O)=>[V,O],S=(V,O)=>[0,0];break;case"bottomMiddle":E=(V,O)=>[V/2,O],S=(V,O)=>[V/2,0];break;case"bottomLeft":k=!0,E=(V,O)=>[0,O],S=(V,O)=>[V,0];break;case"middleLeft":R=!0,E=(V,O)=>[0,O/2],S=(V,O)=>[V,O/2];break}const P=E(a,l),N=S(a,l);let F=g(...N);const j=c(s+F[0]),L=c(r+F[1]);let w=1,b=1,[C,T]=this.screenToPageTranslation(e.movementX,e.movementY);if([C,T]=A(C/t,T/n),k){const V=Math.hypot(a,l);w=b=Math.max(Math.min(Math.hypot(N[0]-P[0]-C,N[1]-P[1]-T)/V,1/a,1/l),h/a,u/l)}else R?w=Math.max(h,Math.min(1,Math.abs(N[0]-P[0]-C)))/a:b=Math.max(u,Math.min(1,Math.abs(N[1]-P[1]-T)))/l;const D=c(a*w),B=c(l*b);F=g(...S(D,B));const K=j-F[0],ie=L-F[1];this.width=D,this.height=B,this.x=K,this.y=ie,this.setDims(t*D,n*B),this.fixAndSetPosition()},Su=new WeakSet,Hp=function(i){const{isMac:e}=$t.platform;i.ctrlKey&&!e||i.shiftKey||i.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},$p=new WeakSet,Kw=function(i){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let t,n;e&&(this.div.classList.add("moving"),t={passive:!0,capture:!0},x(this,lo,i.clientX),x(this,ho,i.clientY),n=r=>{const{clientX:a,clientY:l}=r,[h,u]=this.screenToPageTranslation(a-o(this,lo),l-o(this,ho));x(this,lo,a),x(this,ho,l),this._uiManager.dragSelectedEditors(h,u)},window.addEventListener("pointermove",n,t));const s=()=>{window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,t)),x(this,Kr,!1),this._uiManager.endDragSession()||_(this,Su,Hp).call(this,i)};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},zp=new WeakSet,Xw=function(i){Vi._resizerKeyboardManager.exec(this,i)},Vp=new WeakSet,Qw=function(i){var e;o(this,Yn)&&((e=i.relatedTarget)==null?void 0:e.parentNode)!==o(this,kt)&&_(this,Xr,Xo).call(this)},Gp=new WeakSet,Zw=function(i){x(this,_u,o(this,Yn)?i:"")},ku=new WeakSet,qp=function(i){if(o(this,Ri))for(const e of o(this,Ri))e.tabIndex=i},Xr=new WeakSet,Xo=function(){if(x(this,Yn,!1),_(this,ku,qp).call(this,-1),o(this,Yr)){const{savedX:i,savedY:e,savedWidth:t,savedHeight:n}=o(this,Yr);_(this,ec,df).call(this,i,e,t,n),x(this,Yr,null)}},m(Vi,xu),Ae(Vi,"_borderLineWidth",-1),Ae(Vi,"_colorManager",new KM),Ae(Vi,"_zIndex",1),Ae(Vi,"_telemetryTimeout",1e3);let Ue=Vi;class XM extends Ue{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const h0=3285377520,Kt=4294901760,mi=65535;class Jw{constructor(e){this.h1=e?e&4294967295:h0,this.h2=e?e&4294967295:h0}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let E=0,S=e.length;E<S;E++){const k=e.charCodeAt(E);k<=255?t[n++]=k:(t[n++]=k>>>8,t[n++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(t.buffer,0,s);let l=0,h=0,u=this.h1,c=this.h2;const f=3432918353,g=461845907,y=f&mi,A=g&mi;for(let E=0;E<s;E++)E&1?(l=a[E],l=l*f&Kt|l*y&mi,l=l<<15|l>>>17,l=l*g&Kt|l*A&mi,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(h=a[E],h=h*f&Kt|h*y&mi,h=h<<15|h>>>17,h=h*g&Kt|h*A&mi,c^=h,c=c<<13|c>>>19,c=c*5+3864292196);switch(l=0,r){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*f&Kt|l*y&mi,l=l<<15|l>>>17,l=l*g&Kt|l*A&mi,s&1?u^=l:c^=l}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Kt|e*36045&mi,t=t*4283543511&Kt|((t<<16|e>>>16)*2950163797&Kt)>>>16,e^=t>>>1,e=e*444984403&Kt|e*60499&mi,t=t*3301882366&Kt|((t<<16|e>>>16)*3120437893&Kt)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Yp=Object.freeze({map:null,hash:"",transfer:void 0});var ha,yt,Kp,eb;class tv{constructor(){m(this,Kp),m(this,ha,!1),m(this,yt,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=o(this,yt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return o(this,yt).get(e)}remove(e){if(o(this,yt).delete(e),o(this,yt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of o(this,yt).values())if(t instanceof Ue)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=o(this,yt).get(e);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(t))n[r]!==a&&(s=!0,n[r]=a);else s=!0,o(this,yt).set(e,t);s&&_(this,Kp,eb).call(this),t instanceof Ue&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return o(this,yt).has(e)}getAll(){return o(this,yt).size>0?Ym(o(this,yt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return o(this,yt).size}resetModified(){o(this,ha)&&(x(this,ha,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tb(this)}get serializable(){if(o(this,yt).size===0)return Yp;const e=new Map,t=new Jw,n=[],s=Object.create(null);let r=!1;for(const[a,l]of o(this,yt)){const h=l instanceof Ue?l.serialize(!1,s):l;h&&(e.set(a,h),t.update(`${a}:${JSON.stringify(h)}`),r||(r=!!h.bitmap))}if(r)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Yp}get editorStats(){let e=null;const t=new Map;for(const n of o(this,yt).values()){if(!(n instanceof Ue))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[l,h]of Object.entries(s)){if(l==="type")continue;let u=a.get(l);u||(u=new Map,a.set(l,u));const c=u.get(h)??0;u.set(h,c+1)}}for(const[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}}ha=new WeakMap,yt=new WeakMap,Kp=new WeakSet,eb=function(){o(this,ha)||(x(this,ha,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var tc;class tb extends tv{constructor(e){super(),m(this,tc,void 0);const{map:t,hash:n,transfer:s}=e.serializable,r=structuredClone(t,s?{transfer:s}:null);x(this,tc,{map:r,hash:n,transfer:s})}get print(){Fe("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,tc)}}tc=new WeakMap;var co;class QM{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){m(this,co,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),o(this,co).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||o(this,co).has(e.loadedName))){if(tt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=e,a=new FontFace(n,s,r);this.addNativeFontFace(a);try{await a.load(),o(this,co).add(n),t==null||t(e)}catch{Se(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Se(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Pe(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let e=!1;return(Mt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Pe(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(tt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Pe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(P,N){return P.charCodeAt(N)<<24|P.charCodeAt(N+1)<<16|P.charCodeAt(N+2)<<8|P.charCodeAt(N+3)&255}function s(P,N,F,j){const L=P.substring(0,N),w=P.substring(N+F);return L+j+w}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const h=l.getContext("2d");let u=0;function c(P,N){if(++u>30){Se("Load test font never loaded."),N();return}if(h.font="30px "+P,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(c.bind(null,P,N))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=s(g,976,f.length,f);const y=16,A=1482184792;let E=n(g,y);for(r=0,a=f.length-3;r<a;r+=4)E=E-A+n(f,r)|0;r<f.length&&(E=E-A+n(f+"XXX",r)|0),g=s(g,y,4,PM(E));const S=`url(data:font/opentype;base64,${btoa(g)});`,k=`@font-face {font-family:"${f}";src:${S}}`;this.insertRule(k);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const P of[e.loadedName,f]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=P,R.append(N)}this._document.body.append(R),c(f,()=>{R.remove(),t.complete()})}}co=new WeakMap;class ZM{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=Ew(this.data),n=`url(data:${this.mimetype};base64,${btoa(t)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${n}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${n}}`}return(e=this._inspectFont)==null||e.call(this,this,n),s}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(r){Se(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(r,a){};const s=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case Fi.BEZIER_CURVE_TO:{const[l,h,u,c,f,g]=n.slice(r,r+6);s.push(y=>y.bezierCurveTo(l,h,u,c,f,g)),r+=6}break;case Fi.MOVE_TO:{const[l,h]=n.slice(r,r+2);s.push(u=>u.moveTo(l,h)),r+=2}break;case Fi.LINE_TO:{const[l,h]=n.slice(r,r+2);s.push(u=>u.lineTo(l,h)),r+=2}break;case Fi.QUADRATIC_CURVE_TO:{const[l,h,u,c]=n.slice(r,r+4);s.push(f=>f.quadraticCurveTo(l,h,u,c)),r+=4}break;case Fi.RESTORE:s.push(l=>l.restore());break;case Fi.SAVE:s.push(l=>l.save());break;case Fi.SCALE:tt(s.length===2,"Scale command is only valid at the third position.");break;case Fi.TRANSFORM:{const[l,h,u,c,f,g]=n.slice(r,r+6);s.push(y=>y.transform(l,h,u,c,f,g)),r+=6}break;case Fi.TRANSLATE:{const[l,h]=n.slice(r,r+2);s.push(u=>u.translate(l,h)),r+=2}break}return this.compiledGlyphs[t]=function(r,a){s[0](r),s[1](r),r.scale(a,-a);for(let l=2,h=s.length;l<h;l++)s[l](r)}}}if(Mt){var Xp=Promise.withResolvers(),Cu=null;(async()=>{const i=await Rl(()=>import("./empty-GlqisfcO.CRMO4_-l.js"),[]),e=await Rl(()=>import("./index-4HENfCPg.B-f1kC98.js"),__vite__mapDeps([0,1,2,3])).then(a=>a.i),t=await Rl(()=>import("./index-BepDdkdq.DVZIymEt.js"),__vite__mapDeps([4,0,1,2,3])).then(a=>a.i),n=await Rl(()=>import("./url-DQYFKQ_E.HgWvZVPM.js"),__vite__mapDeps([1,2,3])).then(a=>a.u);let s,r;return new Map(Object.entries({fs:i,http:e,https:t,url:n,canvas:s,path2d:r}))})().then(i=>{Cu=i,Xp.resolve()},i=>{Se(`loadPackages: ${i}`),Cu=new Map,Xp.resolve()})}class Di{static get promise(){return Xp.promise}static get(e){return Cu==null?void 0:Cu.get(e)}}const ib=function(i){return Di.get("fs").promises.readFile(i).then(e=>new Uint8Array(e))};class JM extends Sd{}class eT extends kd{_createCanvas(e,t){return Di.get("canvas").createCanvas(e,t)}}class tT extends Cd{_fetchData(e,t){return ib(e).then(n=>({cMapData:n,compressionType:t}))}}class iT extends Rd{_fetchData(e){return ib(e)}}const Lt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Qp(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),i.clip(s)}class Sl{constructor(){this.constructor===Sl&&Fe("Cannot initialize BaseShadingPattern.")}getPattern(){Fe("Abstract method `getPattern` called.")}}class nT extends Sl{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let r;if(s===Lt.STROKE||s===Lt.FILL){const a=t.current.getClippedPathBoundingBox(s,Ge(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,h=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",l,h,!0),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=de.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Qp(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(n);r.setTransform(f)}else Qp(e,this._bbox),r=this._createGradient(e);return r}}function ff(i,e,t,n,s,r,a,l){const h=e.coords,u=e.colors,c=i.data,f=i.width*4;let g;h[t+1]>h[n+1]&&(g=t,t=n,n=g,g=r,r=a,a=g),h[n+1]>h[s+1]&&(g=n,n=s,s=g,g=a,a=l,l=g),h[t+1]>h[n+1]&&(g=t,t=n,n=g,g=r,r=a,a=g);const y=(h[t]+e.offsetX)*e.scaleX,A=(h[t+1]+e.offsetY)*e.scaleY,E=(h[n]+e.offsetX)*e.scaleX,S=(h[n+1]+e.offsetY)*e.scaleY,k=(h[s]+e.offsetX)*e.scaleX,R=(h[s+1]+e.offsetY)*e.scaleY;if(A>=R)return;const P=u[r],N=u[r+1],F=u[r+2],j=u[a],L=u[a+1],w=u[a+2],b=u[l],C=u[l+1],T=u[l+2],D=Math.round(A),B=Math.round(R);let K,ie,V,O,re,H,pe,J;for(let U=D;U<=B;U++){if(U<S){const ae=U<A?0:(A-U)/(A-S);K=y-(y-E)*ae,ie=P-(P-j)*ae,V=N-(N-L)*ae,O=F-(F-w)*ae}else{let ae;U>R?ae=1:S===R?ae=0:ae=(S-U)/(S-R),K=E-(E-k)*ae,ie=j-(j-b)*ae,V=L-(L-C)*ae,O=w-(w-T)*ae}let z;U<A?z=0:U>R?z=1:z=(A-U)/(A-R),re=y-(y-k)*z,H=P-(P-b)*z,pe=N-(N-C)*z,J=F-(F-T)*z;const te=Math.round(Math.min(K,re)),ee=Math.round(Math.max(K,re));let le=f*U+te*4;for(let ae=te;ae<=ee;ae++)z=(K-ae)/(K-re),z<0?z=0:z>1&&(z=1),c[le++]=ie-(ie-H)*z|0,c[le++]=V-(V-pe)*z|0,c[le++]=O-(O-J)*z|0,c[le++]=255}}function sT(i,e,t){const n=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const l=e.verticesPerRow,h=Math.floor(n.length/l)-1,u=l-1;for(r=0;r<h;r++){let c=r*l;for(let f=0;f<u;f++,c++)ff(i,t,n[c],n[c+1],n[c+l],s[c],s[c+1],s[c+l]),ff(i,t,n[c+l+1],n[c+1],n[c+l],s[c+l+1],s[c+1],s[c+l])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)ff(i,t,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class rT extends Sl{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const s=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-s,l=Math.ceil(this._bounds[3])-r,h=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(l*e[1]*1.1)),3e3),c=a/h,f=l/u,g={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-r,scaleX:1/c,scaleY:1/f},y=h+2*2,A=u+2*2,E=n.getCanvas("mesh",y,A,!1),S=E.context,k=S.createImageData(h,u);if(t){const R=k.data;for(let P=0,N=R.length;P<N;P+=4)R[P]=t[0],R[P+1]=t[1],R[P+2]=t[2],R[P+3]=255}for(const R of this._figures)sT(k,R,g);return S.putImageData(k,2,2),{canvas:E.canvas,offsetX:s-2*c,offsetY:r-2*f,scaleX:c,scaleY:f}}getPattern(e,t,n,s){Qp(e,this._bbox);let r;if(s===Lt.SHADING)r=de.singularValueDecompose2dScale(Ge(e));else if(r=de.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=de.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const a=this._createMeshCanvas(r,s===Lt.SHADING?null:this._background,t.cachedCanvases);return s!==Lt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class aT extends Sl{getPattern(){return"hotpink"}}function oT(i){switch(i[0]){case"RadialAxial":return new nT(i);case"Mesh":return new rT(i);case"Dummy":return new aT}throw new Error(`Unknown IR type: ${i[0]}`)}const c0={COLORED:1,UNCOLORED:2},nb=class sb{constructor(e,t,n,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,s=this.xstep,r=this.ystep,a=this.paintType,l=this.tilingType,h=this.color,u=this.canvasGraphicsFactory;_d("TilingType: "+l);const c=n[0],f=n[1],g=n[2],y=n[3],A=de.singularValueDecompose2dScale(this.matrix),E=de.singularValueDecompose2dScale(this.baseTransform),S=[A[0]*E[0],A[1]*E[1]],k=this.getSizeAndScale(s,this.ctx.canvas.width,S[0]),R=this.getSizeAndScale(r,this.ctx.canvas.height,S[1]),P=e.cachedCanvases.getCanvas("pattern",k.size,R.size,!0),N=P.context,F=u.createCanvasGraphics(N);F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,a,h);let j=c,L=f,w=g,b=y;return c<0&&(j=0,w+=Math.abs(c)),f<0&&(L=0,b+=Math.abs(f)),N.translate(-(k.scale*j),-(R.scale*L)),F.transform(k.scale,0,0,R.scale,0,0),N.save(),this.clipBbox(F,j,L,w,b),F.baseTransform=Ge(F.ctx),F.executeOperatorList(t),F.endDrawing(),{canvas:P.canvas,scaleX:k.scale,scaleY:R.scale,offsetX:j,offsetY:L}}getSizeAndScale(e,t,n){e=Math.abs(e);const s=Math.max(sb.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,s,r){const a=s-t,l=r-n;e.ctx.rect(t,n,a,l),e.current.updateRectMinMax(Ge(e.ctx),[t,n,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,r=e.current;switch(t){case c0.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case c0.UNCOLORED:const l=de.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new TM(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let r=n;s!==Lt.SHADING&&(r=de.transform(r,t.baseTransform),this.matrix&&(r=de.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(r);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const h=e.createPattern(a.canvas,"repeat");return h.setTransform(l),h}};Ae(nb,"MAX_PATTERN_SIZE",3e3);let lT=nb;function hT({src:i,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=$t.isLittleEndian?4278190080:255,[h,u]=a?[r,l]:[l,r],c=n>>3,f=n&7,g=i.length;t=new Uint32Array(t.buffer);let y=0;for(let A=0;A<s;A++){for(const S=e+c;e<S;e++){const k=e<g?i[e]:255;t[y++]=k&128?u:h,t[y++]=k&64?u:h,t[y++]=k&32?u:h,t[y++]=k&16?u:h,t[y++]=k&8?u:h,t[y++]=k&4?u:h,t[y++]=k&2?u:h,t[y++]=k&1?u:h}if(f===0)continue;const E=e<g?i[e++]:255;for(let S=0;S<f;S++)t[y++]=E&1<<7-S?u:h}return{srcPos:e,destPos:y}}const u0=16,d0=100,cT=15,f0=10,p0=1e3,jt=16;function uT(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,s,r,a,l){e.transform(t,n,s,r,a,l),this.__originalTransform(t,n,s,r,a,l)},i.setTransform=function(t,n,s,r,a,l){e.setTransform(t,n,s,r,a,l),this.__originalSetTransform(t,n,s,r,a,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,s,r,a,l){e.bezierCurveTo(t,n,s,r,a,l),this.__originalBezierCurveTo(t,n,s,r,a,l)},i.rect=function(t,n,s,r){e.rect(t,n,s,r),this.__originalRect(t,n,s,r)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class dT{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Wl(i,e,t,n,s,r,a,l,h,u){const[c,f,g,y,A,E]=Ge(i);if(f===0&&g===0){const R=a*c+A,P=Math.round(R),N=l*y+E,F=Math.round(N),j=(a+h)*c+A,L=Math.abs(Math.round(j)-P)||1,w=(l+u)*y+E,b=Math.abs(Math.round(w)-F)||1;return i.setTransform(Math.sign(c),0,0,Math.sign(y),P,F),i.drawImage(e,t,n,s,r,0,0,L,b),i.setTransform(c,f,g,y,A,E),[L,b]}if(c===0&&y===0){const R=l*g+A,P=Math.round(R),N=a*f+E,F=Math.round(N),j=(l+u)*g+A,L=Math.abs(Math.round(j)-P)||1,w=(a+h)*f+E,b=Math.abs(Math.round(w)-F)||1;return i.setTransform(0,Math.sign(f),Math.sign(g),0,P,F),i.drawImage(e,t,n,s,r,0,0,b,L),i.setTransform(c,f,g,y,A,E),[b,L]}i.drawImage(e,t,n,s,r,a,l,h,u);const S=Math.hypot(c,f),k=Math.hypot(g,y);return[S*h,k*u]}function fT(i){const{width:e,height:t}=i;if(e>p0||t>p0)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),l,h,u;const c=e+7&-8;let f=new Uint8Array(c*t),g=0;for(const S of i.data){let k=128;for(;k>0;)f[g++]=S&k?0:255,k>>=1}let y=0;for(g=0,f[g]!==0&&(a[0]=1,++y),h=1;h<e;h++)f[g]!==f[g+1]&&(a[h]=f[g]?2:1,++y),g++;for(f[g]!==0&&(a[h]=2,++y),l=1;l<t;l++){g=l*c,u=l*r,f[g-c]!==f[g]&&(a[u]=f[g]?1:8,++y);let S=(f[g]?4:0)+(f[g-c]?8:0);for(h=1;h<e;h++)S=(S>>2)+(f[g+1]?4:0)+(f[g-c+1]?8:0),s[S]&&(a[u+h]=s[S],++y),g++;if(f[g-c]!==f[g]&&(a[u+h]=f[g]?2:4,++y),y>n)return null}for(g=c*(t-1),u=l*r,f[g]!==0&&(a[u]=8,++y),h=1;h<e;h++)f[g]!==f[g+1]&&(a[u+h]=f[g]?4:8,++y),g++;if(f[g]!==0&&(a[u+h]=4,++y),y>n)return null;const A=new Int32Array([0,r,-1,0,-r,0,0,0,1]),E=new Path2D;for(l=0;y&&l<=t;l++){let S=l*r;const k=S+e;for(;S<k&&!a[S];)S++;if(S===k)continue;E.moveTo(S%r,l);const R=S;let P=a[S];do{const N=A[P];do S+=N;while(!a[S]);const F=a[S];F!==5&&F!==10?(P=F,a[S]=0):(P=F&51*P>>4,a[S]&=P>>2|P<<2),E.lineTo(S%r,S/r|0),a[S]||--y}while(R!==S);--l}return f=null,a=null,function(S){S.save(),S.scale(1/e,-1/t),S.translate(0,-t),S.fill(E),S.beginPath(),S.restore()}}class g0{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_w,this.textMatrixScale=1,this.fontMatrix=Qf,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=mt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=de.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=de.applyTransform(t,e),s=de.applyTransform(t.slice(2),e),r=de.applyTransform([t[0],t[3]],e),a=de.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],a[1])}updateScalingPathMinMax(e,t){de.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,r,a,l,h,u,c){const f=de.bezierBoundingBox(t,n,s,r,a,l,h,u,c);c||this.updateRectMinMax(e,f)}getPathBoundingBox(e=Lt.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Lt.STROKE){t||Fe("Stroke bounding box must include transform.");const s=de.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const e=de.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Lt.FILL,t=null){return de.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function m0(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%jt,r=(t-s)/jt,a=s===0?r:r+1,l=i.createImageData(n,jt);let h=0,u;const c=e.data,f=l.data;let g,y,A,E;if(e.kind===fh.GRAYSCALE_1BPP){const S=c.byteLength,k=new Uint32Array(f.buffer,0,f.byteLength>>2),R=k.length,P=n+7>>3,N=4294967295,F=$t.isLittleEndian?4278190080:255;for(g=0;g<a;g++){for(A=g<r?jt:s,u=0,y=0;y<A;y++){const j=S-h;let L=0;const w=j>P?n:j*8-7,b=w&-8;let C=0,T=0;for(;L<b;L+=8)T=c[h++],k[u++]=T&128?N:F,k[u++]=T&64?N:F,k[u++]=T&32?N:F,k[u++]=T&16?N:F,k[u++]=T&8?N:F,k[u++]=T&4?N:F,k[u++]=T&2?N:F,k[u++]=T&1?N:F;for(;L<w;L++)C===0&&(T=c[h++],C=128),k[u++]=T&C?N:F,C>>=1}for(;u<R;)k[u++]=0;i.putImageData(l,0,g*jt)}}else if(e.kind===fh.RGBA_32BPP){for(y=0,E=n*jt*4,g=0;g<r;g++)f.set(c.subarray(h,h+E)),h+=E,i.putImageData(l,0,y),y+=jt;g<a&&(E=n*s*4,f.set(c.subarray(h,h+E)),i.putImageData(l,0,y))}else if(e.kind===fh.RGB_24BPP)for(A=jt,E=n*A,g=0;g<a;g++){for(g>=r&&(A=s,E=n*A),u=0,y=E;y--;)f[u++]=c[h++],f[u++]=c[h++],f[u++]=c[h++],f[u++]=255;i.putImageData(l,0,g*jt)}else throw new Error(`bad image kind: ${e.kind}`)}function v0(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%jt,r=(t-s)/jt,a=s===0?r:r+1,l=i.createImageData(n,jt);let h=0;const u=e.data,c=l.data;for(let f=0;f<a;f++){const g=f<r?jt:s;({srcPos:h}=hT({src:u,srcPos:h,dest:c,width:n,height:g,nonBlackColor:0})),i.putImageData(l,0,f*jt)}}function Oa(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Bl(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Mt){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function y0(i,e){if(e)return!0;const t=de.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ka.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const pT=["butt","round","square"],gT=["miter","round","bevel"],mT={},w0={};var ic,Zp,nc,Jp;const vT=class rb{constructor(e,t,n,s,r,{optionalContentConfig:a,markedContentStack:l=null},h,u){m(this,ic),m(this,nc),this.ctx=e,this.current=new g0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new dT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const h=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Ge(this.compositeCtx))}this.ctx.save(),Bl(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ge(this.ctx)}executeOperatorList(e,t,n,s){const r=e.argsArray,a=e.fnArray;let l=t||0;const h=r.length;if(h===l)return l;const u=h-l>f0&&typeof n=="function",c=u?Date.now()+cT:0;let f=0;const g=this.commonObjs,y=this.objs;let A;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(A=a[l],A!==ui.dependency)this[A].apply(this,r[l]);else for(const E of r[l]){const S=E.startsWith("g_")?g:y;if(!S.has(E))return S.get(E,n),l}if(l++,l===h)return l;if(u&&++f>f0){if(Date.now()>c)return n(),l;f=0}}}endDrawing(){_(this,ic,Zp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),_(this,nc,Jp).call(this)}_scaleImage(e,t){const n=e.width,s=e.height;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=n,h=s,u="prescale1",c,f;for(;r>2&&l>1||a>2&&h>1;){let g=l,y=h;r>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/g),a>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,a/=h/y),c=this.cachedCanvases.getCanvas(u,g,y),f=c.context,f.clearRect(0,0,g,y),f.drawImage(e,0,0,l,h,0,0,g,y),e=c.canvas,l=g,h=y,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:h}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,r=this.current.fillColor,a=this.current.patternFill,l=Ge(t);let h,u,c,f;if((e.bitmap||e.data)&&e.count>1){const w=e.bitmap||e.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),r]),h=this._cachedBitmapsMap.get(w),h||(h=new Map,this._cachedBitmapsMap.set(w,h));const b=h.get(u);if(b&&!a){const C=Math.round(Math.min(l[0],l[2])+l[4]),T=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:b,offsetX:C,offsetY:T}}c=b}c||(f=this.cachedCanvases.getCanvas("maskCanvas",n,s),v0(f.context,e));let g=de.transform(l,[1/n,0,0,-1/s,0,0]);g=de.transform(g,[1,0,0,1,0,-s]);const[y,A,E,S]=de.getAxialAlignedBoundingBox([0,0,n,s],g),k=Math.round(E-y)||1,R=Math.round(S-A)||1,P=this.cachedCanvases.getCanvas("fillCanvas",k,R),N=P.context,F=y,j=A;N.translate(-F,-j),N.transform(...g),c||(c=this._scaleImage(f.canvas,ji(N)),c=c.img,h&&a&&h.set(u,c)),N.imageSmoothingEnabled=y0(Ge(N),e.interpolate),Wl(N,c,0,0,c.width,c.height,0,0,n,s),N.globalCompositeOperation="source-in";const L=de.transform(ji(N),[1,0,0,1,-F,-j]);return N.fillStyle=a?r.getPattern(t,this,L,Lt.FILL):r,N.fillRect(0,0,n,s),h&&!a&&(this.cachedCanvases.delete("fillCanvas"),h.set(u,P.canvas)),{canvas:P.canvas,offsetX:Math.round(F),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=pT[e]}setLineJoin(e){this.ctx.lineJoin=gT[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Ge(this.suspendedCtx)),Oa(this.suspendedCtx,r),uT(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Oa(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const r=s[0],a=s[1],l=s[2]-r,h=s[3]-a;l===0||h===0||(this.genericComposeSMask(t.context,n,l,h,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,r,a,l,h,u,c,f){let g=e.canvas,y=h-c,A=u-f;if(a){if(y<0||A<0||y+n>g.width||A+s>g.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,s),k=S.context;k.drawImage(g,-y,-A),a.some(R=>R!==0)&&(k.globalCompositeOperation="destination-atop",k.fillStyle=de.makeHexColor(...a),k.fillRect(0,0,n,s),k.globalCompositeOperation="source-over"),g=S.canvas,y=A=0}else if(a.some(S=>S!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(y,A,n,s),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=de.makeHexColor(...a),e.fillRect(y,A,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const E=new Path2D;E.rect(h,u,n,s),t.clip(E),t.globalCompositeOperation="destination-in",t.drawImage(g,y,A,n,s,h,u,n,s),t.restore()}save(){this.inSMaskMode?(Oa(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Oa(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,r,a){this.ctx.transform(e,t,n,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,r=this.current;let a=r.x,l=r.y,h,u;const c=Ge(s),f=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,g=f?n.slice(0):null;for(let y=0,A=0,E=e.length;y<E;y++)switch(e[y]|0){case ui.rectangle:a=t[A++],l=t[A++];const S=t[A++],k=t[A++],R=a+S,P=l+k;s.moveTo(a,l),S===0||k===0?s.lineTo(R,P):(s.lineTo(R,l),s.lineTo(R,P),s.lineTo(a,P)),f||r.updateRectMinMax(c,[a,l,R,P]),s.closePath();break;case ui.moveTo:a=t[A++],l=t[A++],s.moveTo(a,l),f||r.updatePathMinMax(c,a,l);break;case ui.lineTo:a=t[A++],l=t[A++],s.lineTo(a,l),f||r.updatePathMinMax(c,a,l);break;case ui.curveTo:h=a,u=l,a=t[A+4],l=t[A+5],s.bezierCurveTo(t[A],t[A+1],t[A+2],t[A+3],a,l),r.updateCurvePathMinMax(c,h,u,t[A],t[A+1],t[A+2],t[A+3],a,l,g),A+=6;break;case ui.curveTo2:h=a,u=l,s.bezierCurveTo(a,l,t[A],t[A+1],t[A+2],t[A+3]),r.updateCurvePathMinMax(c,h,u,a,l,t[A],t[A+1],t[A+2],t[A+3],g),a=t[A+2],l=t[A+3],A+=4;break;case ui.curveTo3:h=a,u=l,a=t[A+2],l=t[A+3],s.bezierCurveTo(t[A],t[A+1],a,l,a,l),r.updateCurvePathMinMax(c,h,u,t[A],t[A+1],a,l,a,l,g),A+=4;break;case ui.closePath:s.closePath();break}f&&r.updateScalingPathMinMax(c,g),r.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n!=null&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,ji(t),Lt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,ji(t),Lt.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=mT}eoClip(){this.pendingClip=w0}beginText(){this.current.textMatrix=_w,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||Qf,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Se("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const a=s.loadedName||"sans-serif",l=((n=s.systemFontInfo)==null?void 0:n.css)||`"${a}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const u=s.italic?"italic":"normal";let c=t;t<u0?c=u0:t>d0&&(c=d0),this.current.fontSizeScale=t/c,this.ctx.font=`${u} ${h} ${c}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,r,a){this.current.textMatrix=[e,t,n,s,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){const r=this.ctx,a=this.current,l=a.font,h=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,c=h&mt.FILL_STROKE_MASK,f=!!(h&mt.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile;let y;(l.disableFontFace||f||g)&&(y=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||g?(r.save(),r.translate(t,n),r.beginPath(),y(r,u),s&&r.setTransform(...s),(c===mt.FILL||c===mt.FILL_STROKE)&&r.fill(),(c===mt.STROKE||c===mt.FILL_STROKE)&&r.stroke(),r.restore()):((c===mt.FILL||c===mt.FILL_STROKE)&&r.fillText(e,t,n),(c===mt.STROKE||c===mt.FILL_STROKE)&&r.strokeText(e,t,n)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ge(r),x:t,y:n,fontSize:u,addToPath:y})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return Pe(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,a=t.fontSizeScale,l=t.charSpacing,h=t.wordSpacing,u=t.fontDirection,c=t.textHScale*u,f=e.length,g=n.vertical,y=g?1:-1,A=n.defaultVMetrics,E=s*t.fontMatrix[0],S=t.textRenderingMode===mt.FILL&&!n.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(c,-1):r.scale(c,1);let k;if(t.patternFill){r.save();const j=t.fillColor.getPattern(r,this,ji(r),Lt.FILL);k=Ge(r),r.restore(),r.fillStyle=j}let R=t.lineWidth;const P=t.textMatrixScale;if(P===0||R===0){const j=t.textRenderingMode&mt.FILL_STROKE_MASK;(j===mt.STROKE||j===mt.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=P;if(a!==1&&(r.scale(a,a),R/=a),r.lineWidth=R,n.isInvalidPDFjsFont){const j=[];let L=0;for(const w of e)j.push(w.unicode),L+=w.width;r.fillText(j.join(""),0,0),t.x+=L*E*c,r.restore(),this.compose();return}let N=0,F;for(F=0;F<f;++F){const j=e[F];if(typeof j=="number"){N+=y*j*s/1e3;continue}let L=!1;const w=(j.isSpace?h:0)+l,b=j.fontChar,C=j.accent;let T,D,B=j.width;if(g){const ie=j.vmetric||A,V=-(j.vmetric?ie[1]:B*.5)*E,O=ie[2]*E;B=ie?-ie[0]:B,T=V/a,D=(N+O)/a}else T=N/a,D=0;if(n.remeasure&&B>0){const ie=r.measureText(b).width*1e3/s*a;if(B<ie&&this.isFontSubpixelAAEnabled){const V=B/ie;L=!0,r.save(),r.scale(V,1),T/=V}else B!==ie&&(T+=(B-ie)/2e3*s/a)}if(this.contentVisible&&(j.isInFont||n.missingFile)){if(S&&!C)r.fillText(b,T,D);else if(this.paintChar(b,T,D,k),C){const ie=T+s*C.offset.x/a,V=D-s*C.offset.y/a;this.paintChar(C.fontChar,ie,V,k)}}const K=g?B*E-w*u:B*E+w*u;N+=K,L&&r.restore()}g?t.y-=N:t.x+=N*c,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,l=s.vertical?1:-1,h=n.charSpacing,u=n.wordSpacing,c=n.textHScale*a,f=n.fontMatrix||Qf,g=e.length,y=n.textRenderingMode===mt.INVISIBLE;let A,E,S,k;if(!(y||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,a),A=0;A<g;++A){if(E=e[A],typeof E=="number"){k=l*E*r/1e3,this.ctx.translate(k,0),n.x+=k*c;continue}const R=(E.isSpace?u:0)+h,P=s.charProcOperatorList[E.operatorListId];if(!P){Se(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),t.scale(r,r),t.transform(...f),this.executeOperatorList(P),this.restore()),S=de.applyTransform([E.width,0],f)[0]*r+R,t.translate(S,0),n.x+=S*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,r,a){this.ctx.rect(n,s,r-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],s=this.baseTransform||Ge(this.ctx),r={createCanvasGraphics:a=>new rb(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new lT(e,n,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const s=de.makeHexColor(e,t,n);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,n){const s=de.makeHexColor(e,t,n);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=oT(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,ji(t),Lt.SHADING);const s=ji(t);if(s){const{width:r,height:a}=t.canvas,[l,h,u,c]=de.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(l,h,u-l,c-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Fe("Should not call beginInlineImage")}beginImageData(){Fe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ge(this.ctx),t)){const n=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],n,s),this.current.updateRectMinMax(Ge(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||_d("TODO: Support non-isolated groups."),e.knockout&&Se("Knockout groups not supported.");const n=Ge(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=de.getAxialAlignedBoundingBox(e.bbox,Ge(t));const r=[0,0,t.canvas.width,t.canvas.height];s=de.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,h,u]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(c,h,u),g=f.context;g.translate(-a,-l),g.transform(...n),e.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),Oa(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Ge(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=de.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,n,s,r){if(_(this,ic,Zp).call(this),Bl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[h,u]=de.singularValueDecompose2dScale(Ge(this.ctx)),{viewportScale:c}=this,f=Math.ceil(a*this.outputScaleX*c),g=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(h,0,0,-u,0,l*u),Bl(this.ctx)}else Bl(this.ctx),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.endPath()}this.current=new g0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_(this,nc,Jp).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=fT(e)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(e),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const h=Ge(l);l.transform(t,n,s,r,0,0);const u=this._createMaskCanvas(e);l.setTransform(1,0,0,1,u.offsetX-h[4],u.offsetY-h[5]);for(let c=0,f=a.length;c<f;c+=2){const g=de.transform(h,[t,n,s,r,a[c],a[c+1]]),[y,A]=de.applyTransform([0,0],g);l.drawImage(u.canvas,y,A)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:a,width:l,height:h,transform:u}=r,c=this.cachedCanvases.getCanvas("maskCanvas",l,h),f=c.context;f.save();const g=this.getObject(a,r);v0(f,g),f.globalCompositeOperation="source-in",f.fillStyle=s?n.getPattern(f,this,ji(t),Lt.FILL):n,f.fillRect(0,0,l,h),f.restore(),t.save(),t.transform(...u),t.scale(1,-1),Wl(t,c.canvas,0,0,l,h,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Se("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){Se("Dependent image isn't ready yet");return}const a=r.width,l=r.height,h=[];for(let u=0,c=s.length;u<c;u+=2)h.push({transform:[t,0,0,n,s[u],s[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(r,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!Mt){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/t,-1/n);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,n).context;m0(l,e),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,ji(s));s.imageSmoothingEnabled=y0(Ge(s),e.interpolate),Wl(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;m0(l,e),s=this.applyTransferMapsToCanvas(l)}for(const r of t)n.save(),n.transform(...r.transform),n.scale(1,-1),Wl(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===w0?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ge(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:r}=this.ctx.getTransform();let a,l;if(n===0&&s===0){const h=Math.abs(t),u=Math.abs(r);if(h===u)if(e===0)a=l=1/h;else{const c=h*e;a=l=c<1?1/c:1}else if(e===0)a=1/h,l=1/u;else{const c=h*e,f=u*e;a=c<1?1/c:1,l=f<1?1/f:1}}else{const h=Math.abs(t*r-n*s),u=Math.hypot(t,n),c=Math.hypot(s,r);if(e===0)a=c/h,l=u/h;else{const f=e*h;a=c>f?c/f:1,l=u>f?u/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=n||1,s===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,r),a.length>0){const l=Math.max(s,r);t.setLineDash(a.map(h=>h/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ic=new WeakSet,Zp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},nc=new WeakSet,Jp=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const e=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let sc=vT;for(const i in ui)sc.prototype[i]!==void 0&&(sc.prototype[ui[i]]=sc.prototype[i]);var Ru,Mu;class Xn{static get workerPort(){return o(this,Ru)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,Ru,e)}static get workerSrc(){return o(this,Mu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,Mu,e)}}Ru=new WeakMap,Mu=new WeakMap,m(Xn,Ru,null),m(Xn,Mu,"");const Ul={DATA:1,ERROR:2},Xe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Gt(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new tr(i.message);case"MissingPDFException":return new er(i.message);case"PasswordException":return new Jf(i.message,i.code);case"UnexpectedResponseException":return new xd(i.message,i.status);case"UnknownErrorException":return new ep(i.message,i.details);default:return new ep(i.message,i.toString())}}var eg,ab,tg,ob,uo,Hl;class fo{constructor(e,t,n){m(this,eg),m(this,tg),m(this,uo),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const r=s.data;if(r.targetName!==this.sourceName)return;if(r.stream){_(this,tg,ob).call(this,r);return}if(r.callback){const l=r.callbackId,h=this.callbackCapabilities[l];if(!h)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],r.callback===Ul.DATA)h.resolve(r.data);else if(r.callback===Ul.ERROR)h.reject(Gt(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const l=this.sourceName,h=r.sourceName;new Promise(function(u){u(a(r.data))}).then(function(u){n.postMessage({sourceName:l,targetName:h,callback:Ul.DATA,callbackId:r.callbackId,data:u})},function(u){n.postMessage({sourceName:l,targetName:h,callback:Ul.ERROR,callbackId:r.callbackId,reason:Gt(u)})});return}if(r.streamId){_(this,eg,ab).call(this,r);return}a(r.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,n,s){const r=this.streamId++,a=this.sourceName,l=this.targetName,h=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:a,targetName:l,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[r].pullCall=c,h.postMessage({sourceName:a,targetName:l,stream:Xe.PULL,streamId:r,desiredSize:u.desiredSize}),c.promise},cancel:u=>{tt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[r].cancelCall=c,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:a,targetName:l,stream:Xe.CANCEL,streamId:r,reason:Gt(u)}),c.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}eg=new WeakSet,ab=function(i){const e=i.streamId,t=this.sourceName,n=i.sourceName,s=this.comObj,r=this,a=this.actionHandler[i.action],l={enqueue(h,u=1,c){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:t,targetName:n,stream:Xe.ENQUEUE,streamId:e,chunk:h},c)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:t,targetName:n,stream:Xe.CLOSE,streamId:e}),delete r.streamSinks[e])},error(h){tt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:t,targetName:n,stream:Xe.ERROR,streamId:e,reason:Gt(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:i.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(h){h(a(i.data,l))}).then(function(){s.postMessage({sourceName:t,targetName:n,stream:Xe.START_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:t,targetName:n,stream:Xe.START_COMPLETE,streamId:e,reason:Gt(h)})})},tg=new WeakSet,ob=function(i){const e=i.streamId,t=this.sourceName,n=i.sourceName,s=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(i.stream){case Xe.START_COMPLETE:i.success?r.startCall.resolve():r.startCall.reject(Gt(i.reason));break;case Xe.PULL_COMPLETE:i.success?r.pullCall.resolve():r.pullCall.reject(Gt(i.reason));break;case Xe.PULL:if(!a){s.postMessage({sourceName:t,targetName:n,stream:Xe.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&i.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=i.desiredSize,new Promise(function(l){var h;l((h=a.onPull)==null?void 0:h.call(a))}).then(function(){s.postMessage({sourceName:t,targetName:n,stream:Xe.PULL_COMPLETE,streamId:e,success:!0})},function(l){s.postMessage({sourceName:t,targetName:n,stream:Xe.PULL_COMPLETE,streamId:e,reason:Gt(l)})});break;case Xe.ENQUEUE:if(tt(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(i.chunk);break;case Xe.CLOSE:if(tt(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),_(this,uo,Hl).call(this,r,e);break;case Xe.ERROR:tt(r,"error should have stream controller"),r.controller.error(Gt(i.reason)),_(this,uo,Hl).call(this,r,e);break;case Xe.CANCEL_COMPLETE:i.success?r.cancelCall.resolve():r.cancelCall.reject(Gt(i.reason)),_(this,uo,Hl).call(this,r,e);break;case Xe.CANCEL:if(!a)break;new Promise(function(l){var h;l((h=a.onCancel)==null?void 0:h.call(a,Gt(i.reason)))}).then(function(){s.postMessage({sourceName:t,targetName:n,stream:Xe.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){s.postMessage({sourceName:t,targetName:n,stream:Xe.CANCEL_COMPLETE,streamId:e,reason:Gt(l)})}),a.sinkCapability.reject(Gt(i.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},uo=new WeakSet,Hl=async function(i,e){var t,n,s;await Promise.allSettled([(t=i.startCall)==null?void 0:t.promise,(n=i.pullCall)==null?void 0:n.promise,(s=i.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[e]};var Rr,rc;class yT{constructor({parsedData:e,rawData:t}){m(this,Rr,void 0),m(this,rc,void 0),x(this,Rr,e),x(this,rc,t)}getRaw(){return o(this,rc)}get(e){return o(this,Rr).get(e)??null}getAll(){return Ym(o(this,Rr))}has(e){return o(this,Rr).has(e)}}Rr=new WeakMap,rc=new WeakMap;const En=Symbol("INTERNAL");var ac,oc,lc,po;class wT{constructor(e,{name:t,intent:n,usage:s}){m(this,ac,!1),m(this,oc,!1),m(this,lc,!1),m(this,po,!0),x(this,ac,!!(e&ii.DISPLAY)),x(this,oc,!!(e&ii.PRINT)),this.name=t,this.intent=n,this.usage=s}get visible(){if(o(this,lc))return o(this,po);if(!o(this,po))return!1;const{print:e,view:t}=this.usage;return o(this,ac)?(t==null?void 0:t.viewState)!=="OFF":o(this,oc)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==En&&Fe("Internal method `_setVisible` called."),x(this,lc,n),x(this,po,t)}}ac=new WeakMap,oc=new WeakMap,lc=new WeakMap,po=new WeakMap;var cs,We,go,mo,Tu,ig;class bT{constructor(e,t=ii.DISPLAY){if(m(this,Tu),m(this,cs,null),m(this,We,new Map),m(this,go,null),m(this,mo,null),this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,mo,e.order);for(const n of e.groups)o(this,We).set(n.id,new wT(t,n));if(e.baseState==="OFF")for(const n of o(this,We).values())n._setVisible(En,!1);for(const n of e.on)o(this,We).get(n)._setVisible(En,!0);for(const n of e.off)o(this,We).get(n)._setVisible(En,!1);x(this,go,this.getHash())}}isVisible(e){if(o(this,We).size===0)return!0;if(!e)return _d("Optional content group not defined."),!0;if(e.type==="OCG")return o(this,We).has(e.id)?o(this,We).get(e.id).visible:(Se(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return _(this,Tu,ig).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!o(this,We).has(t))return Se(`Optional content group not found: ${t}`),!0;if(o(this,We).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!o(this,We).has(t))return Se(`Optional content group not found: ${t}`),!0;if(!o(this,We).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!o(this,We).has(t))return Se(`Optional content group not found: ${t}`),!0;if(!o(this,We).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!o(this,We).has(t))return Se(`Optional content group not found: ${t}`),!0;if(o(this,We).get(t).visible)return!1}return!0}return Se(`Unknown optional content policy ${e.policy}.`),!0}return Se(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const n=o(this,We).get(e);if(!n){Se(`Optional content group not found: ${e}`);return}n._setVisible(En,!!t,!0),x(this,cs,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=o(this,We).get(s);if(r)switch(n){case"ON":r._setVisible(En,!0);break;case"OFF":r._setVisible(En,!1);break;case"Toggle":r._setVisible(En,!r.visible);break}}x(this,cs,null)}get hasInitialVisibility(){return o(this,go)===null||this.getHash()===o(this,go)}getOrder(){return o(this,We).size?o(this,mo)?o(this,mo).slice():[...o(this,We).keys()]:null}getGroups(){return o(this,We).size>0?Ym(o(this,We)):null}getGroup(e){return o(this,We).get(e)||null}getHash(){if(o(this,cs)!==null)return o(this,cs);const e=new Jw;for(const[t,n]of o(this,We))e.update(`${t}:${n.visible}`);return x(this,cs,e.hexdigest())}}cs=new WeakMap,We=new WeakMap,go=new WeakMap,mo=new WeakMap,Tu=new WeakSet,ig=function(i){const e=i.length;if(e<2)return!0;const t=i[0];for(let n=1;n<e;n++){const s=i[n];let r;if(Array.isArray(s))r=_(this,Tu,ig).call(this,s);else if(o(this,We).has(s))r=o(this,We).get(s).visible;else return Se(`Optional content group not found: ${s}`),!0;switch(t){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return t==="And"};class AT{constructor(e,{disableRange:t=!1,disableStream:n=!1}){tt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,u)=>{this._onReceiveData({begin:h,chunk:u})}),e.addProgressListener((h,u)=>{this._onProgress({loaded:h,total:u})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});tt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,r;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){tt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new _T(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new xT(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class _T{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=Jm(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class xT{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ET(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let c=l(t);return c=unescape(c),c=h(c),c=u(c),r(c)}if(t=a(i),t){const c=u(t);return r(c)}if(t=n("filename","i").exec(i),t){t=t[1];let c=l(t);return c=u(c),r(c)}function n(c,f){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(c,f){if(c){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const g=new TextDecoder(c,{fatal:!0}),y=Ed(f);f=g.decode(y),e=!1}catch{}}return f}function r(c){return e&&/[\x80-\xff]/.test(c)&&(c=s("utf-8",c),e&&(c=s("iso-8859-1",c))),c}function a(c){const f=[];let g;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(c))!==null;){let[,E,S,k]=g;if(E=parseInt(E,10),E in f){if(E===0)break;continue}f[E]=[S,k]}const A=[];for(let E=0;E<f.length&&E in f;++E){let[S,k]=f[E];k=l(k),S&&(k=unescape(k),E===0&&(k=h(k))),A.push(k)}return A.join("")}function l(c){if(c.startsWith('"')){const f=c.slice(1).split('\\"');for(let g=0;g<f.length;++g){const y=f[g].indexOf('"');y!==-1&&(f[g]=f[g].slice(0,y),f.length=g+1),f[g]=f[g].replaceAll(/\\(.)/g,"$1")}c=f.join('"')}return c}function h(c){const f=c.indexOf("'");if(f===-1)return c;const g=c.slice(0,f),y=c.slice(f+1).replace(/^[^']*'/,"");return s(g,y)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,y,A){if(y==="q"||y==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,S){return String.fromCharCode(parseInt(S,16))}),s(g,A);try{A=atob(A)}catch{}return s(g,A)})}return""}function iv({getResponseHeader:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||n||!e||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function nv(i){const e=i("Content-Disposition");if(e){let t=ET(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Jm(t))return t}return null}function Td(i,e){return i===404||i===0&&e.startsWith("file:")?new er('Missing PDF "'+e+'".'):new xd(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function lb(i){return i===200||i===206}function hb(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function cb(i){const e=new Headers;for(const t in i){const n=i[t];n!==void 0&&e.append(t,n)}return e}function ub(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Se(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class b0{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return tt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ST(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new kT(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class ST{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=cb(this._stream.httpHeaders);const n=t.url;fetch(n,hb(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!lb(s.status))throw Td(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const r=h=>s.headers.get(h),{allowRangeRequests:a,suggestedLength:l}=iv({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=nv(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new tr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ub(t),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class kT{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=cb(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const r=s.url;fetch(r,hb(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!lb(a.status))throw Td(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:ub(t),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const pf=200,gf=206;function CT(i){const e=i.response;return typeof e!="string"?e:Ed(e).buffer}class RT{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const s={begin:e,end:t};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const a=this.httpHeaders[r];a!==void 0&&t.setRequestHeader(r,a)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=gf):s.expectedStatus=pf,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const s=this.pendingRequests[e];s&&((n=s.onProgress)==null||n.call(s,t))}onStateChange(e,t){var n,s,r;const a=this.pendingRequests[e];if(!a)return;const l=a.xhr;if(l.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),l.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],l.status===0&&this.isHttp){(n=a.onError)==null||n.call(a,l.status);return}const h=l.status||pf;if(!(h===pf&&a.expectedStatus===gf)&&h!==a.expectedStatus){(s=a.onError)==null||s.call(a,l.status);return}const u=CT(l);if(h===gf){const c=l.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);a.onDone({begin:parseInt(f[1],10),chunk:u})}else u?a.onDone({begin:0,chunk:u}):(r=a.onError)==null||r.call(a,l.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class MT{constructor(e){this._source=e,this._manager=new RT(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return tt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new TT(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new PT(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class TT{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=a=>t.getResponseHeader(a),{allowRangeRequests:s,suggestedLength:r}=iv({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=nv(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Td(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PT{constructor(e,t,n){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Td(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const db=/^file:\/\/\/[a-zA-Z]:\//;function LT(i){const e=Di.get("url"),t=e.parse(i);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(i)?e.parse(`file:///${i}`):(t.host||(t.protocol="file:"),t)}class IT{constructor(e){this.source=e,this.url=LT(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return tt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new NT(this):new DT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new FT(this,e,t):new OT(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class fb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new tr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Pu(i,e){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:e}}class DT extends fb{constructor(e){super(e);const t=n=>{if(n.statusCode===404){const l=new er(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const s=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:r,suggestedLength:a}=iv({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=nv(s)};if(this._request=null,this._url.protocol==="http:"){const n=Di.get("http");this._request=n.request(Pu(this._url,e.httpHeaders),t)}else{const n=Di.get("https");this._request=n.request(Pu(this._url,e.httpHeaders),t)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class OT extends pb{constructor(e,t,n){super(e),this._httpHeaders={};for(const r in e.httpHeaders){const a=e.httpHeaders[r];a!==void 0&&(this._httpHeaders[r]=a)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const s=r=>{if(r.statusCode===404){const a=new er(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=Di.get("http");this._request=r.request(Pu(this._url,this._httpHeaders),s)}else{const r=Di.get("https");this._request=r.request(Pu(this._url,this._httpHeaders),s)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class NT extends fb{constructor(e){super(e);let t=decodeURIComponent(this._url.path);db.test(this._url.href)&&(t=t.replace(/^\//,""));const n=Di.get("fs");n.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new er(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class FT extends pb{constructor(e,t,n){super(e);let s=decodeURIComponent(this._url.path);db.test(this._url.href)&&(s=s.replace(/^\//,""));const r=Di.get("fs");this._setReadableStream(r.createReadStream(s,{start:t,end:n-1}))}}const jT=1e5,Dt=30,WT=.8;var A0,ts,zt,$l,zl,is,vn,Vl,Gl,ar,Na,Fa,ns,ja,ql,Wa,or,Yl,Kl,Xt,lr,hr,Ba,mf,_0,vf,x0,Xl,yf,Ua,Ql,wf,E0;let Lu=(Xt=class{constructor({textContentSource:i,container:e,viewport:t}){if(m(this,mf),m(this,vf),m(this,Xl),m(this,ts,Promise.withResolvers()),m(this,zt,null),m(this,$l,!1),m(this,zl,!!((A0=globalThis.FontInspector)!=null&&A0.enabled)),m(this,is,null),m(this,vn,null),m(this,Vl,0),m(this,Gl,0),m(this,ar,null),m(this,Na,null),m(this,Fa,0),m(this,ns,0),m(this,ja,Object.create(null)),m(this,ql,[]),m(this,Wa,null),m(this,or,[]),m(this,Yl,new WeakMap),m(this,Kl,null),i instanceof ReadableStream)x(this,Wa,i);else if(typeof i=="object")x(this,Wa,new ReadableStream({start(l){l.enqueue(i),l.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,zt,x(this,Na,e)),x(this,ns,t.scale*(globalThis.devicePixelRatio||1)),x(this,Fa,t.rotation),x(this,vn,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:s,pageX:r,pageY:a}=t.rawDims;x(this,Kl,[1,0,0,-1,-r,a+s]),x(this,Gl,n),x(this,Vl,s),Ys(e,t),o(this,ts).promise.catch(()=>{}).then(()=>{o(Xt,Ba).delete(this),x(this,vn,null),x(this,ja,null)})}render(){const i=()=>{o(this,ar).read().then(({value:e,done:t})=>{if(t){o(this,ts).resolve();return}o(this,is)??x(this,is,e.lang),Object.assign(o(this,ja),e.styles),_(this,mf,_0).call(this,e.items),i()},o(this,ts).reject)};return x(this,ar,o(this,Wa).getReader()),o(Xt,Ba).add(this),i(),o(this,ts).promise}update({viewport:i,onBefore:e=null}){var t;const n=i.scale*(globalThis.devicePixelRatio||1),s=i.rotation;if(s!==o(this,Fa)&&(e==null||e(),x(this,Fa,s),Ys(o(this,Na),{rotation:s})),n!==o(this,ns)){e==null||e(),x(this,ns,n);const r={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:_(t=Xt,Ua,Ql).call(t,o(this,is))};for(const a of o(this,or))r.properties=o(this,Yl).get(a),r.div=a,_(this,Xl,yf).call(this,r)}}cancel(){var i;const e=new tr("TextLayer task cancelled.");(i=o(this,ar))==null||i.cancel(e).catch(()=>{}),x(this,ar,null),o(this,ts).reject(e)}get textDivs(){return o(this,or)}get textContentItemsStr(){return o(this,ql)}static cleanup(){if(!(o(this,Ba).size>0)){o(this,lr).clear();for(const{canvas:i}of o(this,hr).values())i.remove();o(this,hr).clear()}}},ts=new WeakMap,zt=new WeakMap,$l=new WeakMap,zl=new WeakMap,is=new WeakMap,vn=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,ar=new WeakMap,Na=new WeakMap,Fa=new WeakMap,ns=new WeakMap,ja=new WeakMap,ql=new WeakMap,Wa=new WeakMap,or=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,lr=new WeakMap,hr=new WeakMap,Ba=new WeakMap,mf=new WeakSet,_0=function(i){var e,t;if(o(this,$l))return;(t=o(this,vn)).ctx||(t.ctx=_(e=Xt,Ua,Ql).call(e,o(this,is)));const n=o(this,or),s=o(this,ql);for(const r of i){if(n.length>jT){Se("Ignoring additional textDivs for performance reasons."),x(this,$l,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=o(this,zt);x(this,zt,document.createElement("span")),o(this,zt).classList.add("markedContent"),r.id!==null&&o(this,zt).setAttribute("id",`${r.id}`),a.append(o(this,zt))}else r.type==="endMarkedContent"&&x(this,zt,o(this,zt).parentNode);continue}s.push(r.str),_(this,vf,x0).call(this,r)}},vf=new WeakSet,x0=function(i){var e;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:i.str!=="",hasEOL:i.hasEOL,fontSize:0};o(this,or).push(t);const s=de.transform(o(this,Kl),i.transform);let r=Math.atan2(s[1],s[0]);const a=o(this,ja)[i.fontName];a.vertical&&(r+=Math.PI/2);const l=o(this,zl)&&a.fontSubstitution||a.fontFamily,h=Math.hypot(s[2],s[3]),u=h*_(e=Xt,wf,E0).call(e,l,o(this,is));let c,f;r===0?(c=s[4],f=s[5]-u):(c=s[4]+u*Math.sin(r),f=s[5]-u*Math.cos(r));const g="calc(var(--scale-factor)*",y=t.style;o(this,zt)===o(this,Na)?(y.left=`${(100*c/o(this,Gl)).toFixed(2)}%`,y.top=`${(100*f/o(this,Vl)).toFixed(2)}%`):(y.left=`${g}${c.toFixed(2)}px)`,y.top=`${g}${f.toFixed(2)}px)`),y.fontSize=`${g}${h.toFixed(2)}px)`,y.fontFamily=l,n.fontSize=h,t.setAttribute("role","presentation"),t.textContent=i.str,t.dir=i.dir,o(this,zl)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||i.fontName),r!==0&&(n.angle=r*(180/Math.PI));let A=!1;if(i.str.length>1)A=!0;else if(i.str!==" "&&i.transform[0]!==i.transform[3]){const E=Math.abs(i.transform[0]),S=Math.abs(i.transform[3]);E!==S&&Math.max(E,S)/Math.min(E,S)>1.5&&(A=!0)}if(A&&(n.canvasWidth=a.vertical?i.height:i.width),o(this,Yl).set(t,n),o(this,vn).div=t,o(this,vn).properties=n,_(this,Xl,yf).call(this,o(this,vn)),n.hasText&&o(this,zt).append(t),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),o(this,zt).append(E)}},Xl=new WeakSet,yf=function(i){const{div:e,properties:t,ctx:n,prevFontSize:s,prevFontFamily:r}=i,{style:a}=e;let l="";if(t.canvasWidth!==0&&t.hasText){const{fontFamily:h}=a,{canvasWidth:u,fontSize:c}=t;(s!==c||r!==h)&&(n.font=`${c*o(this,ns)}px ${h}`,i.prevFontSize=c,i.prevFontFamily=h);const{width:f}=n.measureText(e.textContent);f>0&&(l=`scaleX(${u*o(this,ns)/f})`)}t.angle!==0&&(l=`rotate(${t.angle}deg) ${l}`),l.length>0&&(a.transform=l)},Ua=new WeakSet,Ql=function(i=null){let e=o(this,hr).get(i||(i=""));if(!e){const t=document.createElement("canvas");t.className="hiddenCanvasElement",t.lang=i,document.body.append(t),e=t.getContext("2d",{alpha:!1}),o(this,hr).set(i,e)}return e},wf=new WeakSet,E0=function(i,e){const t=o(this,lr).get(i);if(t)return t;const n=_(this,Ua,Ql).call(this,e),s=n.font;n.canvas.width=n.canvas.height=Dt,n.font=`${Dt}px ${i}`;const r=n.measureText("");let a=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(a){const c=a/(a+l);return o(this,lr).set(i,c),n.canvas.width=n.canvas.height=0,n.font=s,c}n.strokeStyle="red",n.clearRect(0,0,Dt,Dt),n.strokeText("g",0,0);let h=n.getImageData(0,0,Dt,Dt).data;l=0;for(let c=h.length-1-3;c>=0;c-=4)if(h[c]>0){l=Math.ceil(c/4/Dt);break}n.clearRect(0,0,Dt,Dt),n.strokeText("A",0,Dt),h=n.getImageData(0,0,Dt,Dt).data,a=0;for(let c=0,f=h.length;c<f;c+=4)if(h[c]>0){a=Dt-Math.floor(c/4/Dt);break}n.canvas.width=n.canvas.height=0,n.font=s;const u=a?a/(a+l):WT;return o(this,lr).set(i,u),u},m(Xt,Ua),m(Xt,wf),m(Xt,lr,new Map),m(Xt,hr,new Map),m(Xt,Ba,new Set),Xt);function BT(){Mw("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:i,container:e,viewport:t,...n}=arguments[0],s=Object.keys(n);s.length>0&&Se("Ignoring `renderTextLayer` parameters: "+s.join(", "));const r=new Lu({textContentSource:i,container:e,viewport:t}),{textDivs:a,textContentItemsStr:l}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:l}}function UT(){Mw("`updateTextLayer`, please use `TextLayer` instead.")}class bl{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(r){var a;if(!r)return;let l=null;const h=r.name;if(h==="#text")l=r.value;else if(bl.shouldBuildText(h))(a=r==null?void 0:r.attributes)!=null&&a.textContent?l=r.attributes.textContent:r.value&&(l=r.value);else return;if(l!==null&&t.push({str:l}),!!r.children)for(const u of r.children)s(u)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const HT=65536,$T=100,zT=5e3,VT=Mt?eT:jM,GT=Mt?tT:Cw,qT=Mt?JM:FM,YT=Mt?iT:Rw;function KT(i){if(typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new ZT,{docId:t}=e,n=i.url?XT(i.url):null,s=i.data?QT(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,h=i.range instanceof vb?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:HT;let c=i.worker instanceof cc?i.worker:null;const f=i.verbosity,g=typeof i.docBaseUrl=="string"&&!Zm(i.docBaseUrl)?i.docBaseUrl:null,y=typeof i.cMapUrl=="string"?i.cMapUrl:null,A=i.cMapPacked!==!1,E=i.CMapReaderFactory||GT,S=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,k=i.StandardFontDataFactory||YT,R=i.stopAtErrors!==!0,P=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,N=i.isEvalSupported!==!1,F=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Mt,j=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,L=typeof i.disableFontFace=="boolean"?i.disableFontFace:Mt,w=i.fontExtraProperties===!0,b=i.enableXfa===!0,C=i.ownerDocument||globalThis.document,T=i.disableRange===!0,D=i.disableStream===!0,B=i.disableAutoFetch===!0,K=i.pdfBug===!0,ie=h?h.length:i.length??NaN,V=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Mt&&!L,O=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:E===Cw&&k===Rw&&y&&S&&Qa(y,document.baseURI)&&Qa(S,document.baseURI),re=i.canvasFactory||new VT({ownerDocument:C}),H=i.filterFactory||new qT({docId:t,ownerDocument:C}),pe=null;kM(f);const J={canvasFactory:re,filterFactory:H};if(O||(J.cMapReaderFactory=new E({baseUrl:y,isCompressed:A}),J.standardFontDataFactory=new k({baseUrl:S})),!c){const te={verbosity:f,port:Xn.workerPort};c=te.port?cc.fromPort(te):new cc(te),e._worker=c}const U={docId:t,apiVersion:"4.3.136",data:s,password:l,disableAutoFetch:B,rangeChunkSize:u,length:ie,docBaseUrl:g,enableXfa:b,evaluatorOptions:{maxImageSize:P,disableFontFace:L,ignoreErrors:R,isEvalSupported:N,isOffscreenCanvasSupported:F,canvasMaxAreaInBytes:j,fontExtraProperties:w,useSystemFonts:V,cMapUrl:O?y:null,standardFontDataUrl:O?S:null}},z={disableFontFace:L,fontExtraProperties:w,ownerDocument:C,pdfBug:K,styleElement:pe,loadingParams:{disableAutoFetch:B,enableXfa:b}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const te=c.messageHandler.sendWithPromise("GetDocRequest",U,s?[s.buffer]:null);let ee;return h?ee=new AT(h,{disableRange:T,disableStream:D}):s||(ee=(le=>Mt?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&Qa(le.url)?new b0(le):new IT(le):Qa(le.url)?new b0(le):new MT(le))({url:n,length:ie,httpHeaders:r,withCredentials:a,rangeChunkSize:u,disableRange:T,disableStream:D})),te.then(le=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ae=new fo(t,le,c.port),se=new i2(ae,e,ee,z,J);e._transport=se,ae.send("Ready",null)})}).catch(e._capability.reject),e}function XT(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Mt&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function QT(i){if(Mt&&typeof Xf<"u"&&i instanceof Xf)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Ed(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function S0(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var ng;const gb=class mb{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${ai(mb,ng)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};ng=new WeakMap,m(gb,ng,0);let ZT=gb,vb=class{constructor(i,e,t=!1,n=null){this.length=i,this.initialData=e,this.progressiveDone=t,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(i){this._rangeListeners.push(i)}addProgressListener(i){this._progressListeners.push(i)}addProgressiveReadListener(i){this._progressiveReadListeners.push(i)}addProgressiveDoneListener(i){this._progressiveDoneListeners.push(i)}onDataRange(i,e){for(const t of this._rangeListeners)t(i,e)}onDataProgress(i,e){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners)t(i,e)})}onDataProgressiveRead(i){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(i)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const i of this._progressiveDoneListeners)i()})}transportReady(){this._readyCapability.resolve()}requestDataRange(i,e){Fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class JT{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var us,Wn,Cs,Qr,Qo,Iu;class e2{constructor(e,t,n,s=!1){m(this,Cs),m(this,Qo),m(this,us,null),m(this,Wn,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new i0:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new yb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new xl({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=Nn.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:h=null,pageColors:u=null,printAnnotationStorage:c=null}){var f,g;(f=this._stats)==null||f.time("Overall");const y=this._transport.getRenderingIntent(n,s,c),{renderingIntent:A,cacheKey:E}=y;x(this,Wn,!1),_(this,Qo,Iu).call(this),l||(l=this._transport.getOptionalContentConfig(A));let S=this._intentStates.get(E);S||(S=Object.create(null),this._intentStates.set(E,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const k=!!(A&ii.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)==null||g.time("Page Request"),this._pumpOperatorList(y));const R=F=>{var j;S.renderTasks.delete(P),(this._maybeCleanupAfterRender||k)&&x(this,Wn,!0),_(this,Cs,Qr).call(this,!k),F?(P.capability.reject(F),this._abortOperatorList({intentState:S,reason:F instanceof Error?F:new Error(F)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new s2({callback:R,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:u});(S.renderTasks||(S.renderTasks=new Set)).add(P);const N=P.task;return Promise.all([S.displayReadyCapability.promise,l]).then(([F,j])=>{var L;if(this.destroyed){R();return}if((L=this._stats)==null||L.time("Rendering"),!(j.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:F,optionalContentConfig:j}),P.operatorListChanged()}).catch(R),N}getOperatorList({intent:e="display",annotationMode:t=Nn.ENABLE,printAnnotationStorage:n=null}={}){var s;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(h))}const a=this._transport.getRenderingIntent(e,t,n,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let h;return l.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(h),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)==null||s.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>bl.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function r(){a.read().then(function({value:h,done:u}){if(u){n(l);return}l.lang??(l.lang=h.lang),Object.assign(l.styles,h.styles),l.items.push(...h.items),r()},s)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),x(this,Wn,!1),_(this,Qo,Iu).call(this),Promise.all(e)}cleanup(e=!1){x(this,Wn,!0);const t=_(this,Cs,Qr).call(this,!1);return e&&t&&this._stats&&(this._stats=new i0),t}_startRenderPage(e,t){var n,s;const r=this._intentStates.get(t);r&&((n=this._stats)==null||n.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&_(this,Cs,Qr).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n}){const{map:s,transfer:r}=n,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},r).getReader(),l=this._intentStates.get(t);l.streamReader=a;const h=()=>{a.read().then(({value:u,done:c})=>{if(c){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,l),h())},u=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const c of l.renderTasks)c.operatorListChanged();_(this,Cs,Qr).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(u);else if(l.opListReadCapability)l.opListReadCapability.reject(u);else throw u}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Qm){let s=$T;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new tr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}us=new WeakMap,Wn=new WeakMap,Cs=new WeakSet,Qr=function(i=!1){if(_(this,Qo,Iu).call(this),!o(this,Wn)||this.destroyed)return!1;if(i)return x(this,us,setTimeout(()=>{x(this,us,null),_(this,Cs,Qr).call(this,!1)},zT)),!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Wn,!1),!0},Qo=new WeakSet,Iu=function(){o(this,us)&&(clearTimeout(o(this,us)),x(this,us,null))};var Mr,sg;class t2{constructor(){m(this,Mr,new Set),m(this,sg,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};o(this,sg).then(()=>{for(const s of o(this,Mr))s.call(this,n)})}addEventListener(e,t){o(this,Mr).add(t)}removeEventListener(e,t){o(this,Mr).delete(t)}terminate(){o(this,Mr).clear()}}Mr=new WeakMap,sg=new WeakMap;const nn={isWorkerDisabled:!1,fakeWorkerId:0};Mt&&(nn.isWorkerDisabled=!0,Xn.workerSrc||(Xn.workerSrc="./pdf.worker.mjs")),nn.isSameOrigin=function(i,e){let t;try{if(t=new URL(i),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(e,t);return t.origin===n.origin},nn.createCDNWrapper=function(i){const e=`await import("${i}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Rs,Zo,hc;const rg=class Gi{constructor({name:e=null,port:t=null,verbosity:n=CM()}={}){var s;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=o(Gi,Rs))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(o(Gi,Rs)||x(Gi,Rs,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Mt?Promise.all([Di.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new fo("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!nn.isWorkerDisabled&&!o(Gi,Zo,hc)){let{workerSrc:e}=Gi;try{nn.isSameOrigin(window.location.href,e)||(e=nn.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new fo("main","worker",t),s=()=>{t.removeEventListener("error",r),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||s()};t.addEventListener("error",r),n.on("test",l=>{if(t.removeEventListener("error",r),this.destroyed){s();return}l?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",l=>{if(t.removeEventListener("error",r),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{_d("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){nn.isWorkerDisabled||(Se("Setting up fake worker."),nn.isWorkerDisabled=!0),Gi._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new t2;this._port=t;const n=`fake${nn.fakeWorkerId++}`,s=new fo(n+"_worker",n,t);e.setup(s,t);const r=new fo(n,n+"_worker",t);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=o(Gi,Rs))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const n=(t=o(this,Rs))==null?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Gi(e)}static get workerSrc(){if(Xn.workerSrc)return Xn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Pe(this,"_setupFakeWorkerGlobal",(async()=>o(this,Zo,hc)?o(this,Zo,hc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Rs=new WeakMap,Zo=new WeakSet,hc=function(){var i;try{return((i=globalThis.pdfjsWorker)==null?void 0:i.WorkerMessageHandler)||null}catch{return null}},m(rg,Zo),m(rg,Rs,void 0);let cc=rg;var Bn,qi,vo,yo,Yi,Tr,wo;class i2{constructor(e,t,n,s,r){m(this,Tr),m(this,Bn,new Map),m(this,qi,new Map),m(this,vo,new Map),m(this,yo,new Map),m(this,Yi,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new yb,this.fontLoader=new QM({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Pe(this,"annotationStorage",new tv)}getRenderingIntent(e,t=Nn.ENABLE,n=null,s=!1){let r=ii.DISPLAY,a=Yp;switch(e){case"any":r=ii.ANY;break;case"display":break;case"print":r=ii.PRINT;break;default:Se(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case Nn.DISABLE:r+=ii.ANNOTATIONS_DISABLE;break;case Nn.ENABLE:break;case Nn.ENABLE_FORMS:r+=ii.ANNOTATIONS_FORMS;break;case Nn.ENABLE_STORAGE:r+=ii.ANNOTATIONS_STORAGE,a=(r&ii.PRINT&&n instanceof tb?n:this.annotationStorage).serializable;break;default:Se(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(r+=ii.OPLIST),{renderingIntent:r,cacheKey:`${r}_${a.hash}`,annotationStorageSerializable:a}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(e=o(this,Yi))==null||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of o(this,qi).values())t.push(s._destroy());o(this,qi).clear(),o(this,vo).clear(),o(this,yo).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),o(this,Bn).clear(),this.filterFactory.destroy(),Lu.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new tr("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{tt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}tt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",n=>{const s=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var a;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),r.onProgress=l=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:l.loaded,total:l.total})}),s.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(n,s)=>{tt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){s.close();return}tt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new JT(n,this))}),e.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new Jf(n.message,n.code);break;case"InvalidPDFException":s=new xw(n.message);break;case"MissingPDFException":s=new er(n.message);break;case"UnexpectedResponseException":s=new xd(n.message,n.status);break;case"UnknownErrorException":s=new ep(n.message,n.details);break;default:Fe("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",n=>{if(x(this,Yi,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?o(this,Yi).reject(r):o(this,Yi).resolve({password:r})};try{t.onPassword(s,n.code)}catch(r){o(this,Yi).reject(r)}}else o(this,Yi).reject(new Jf(n.message,n.code));return o(this,Yi).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{this.destroyed||o(this,qi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:h,pdfBug:u}=this._params;if("error"in r){const y=r.error;Se(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const c=u&&(a=globalThis.FontInspector)!=null&&a.enabled?(y,A)=>globalThis.FontInspector.fontAdded(y,A):null,f=new ZM(r,{disableFontFace:l,inspectFont:c});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h&&f.data&&(f.data=null),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:g}=r;tt(g,"The imageRef must be defined.");for(const y of o(this,qi).values())for(const[,A]of y.objs)if((A==null?void 0:A.ref)===g)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,r,a])=>{var l;if(this.destroyed)return;const h=o(this,qi).get(s);if(!h.objs.has(n)){if(h._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":h.objs.resolve(n,a),(a==null?void 0:a.dataLen)>_M&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e;this.annotationStorage.size<=0&&Se("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((e=this._fullReader)==null?void 0:e.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=o(this,vo).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&o(this,yo).set(r.refStr,e);const a=new e2(t,r,this,this._params.pdfBug);return o(this,qi).set(t,a),a});return o(this,vo).set(t,s),s}getPageIndex(e){return S0(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return _(this,Tr,wo).call(this,"GetFieldObjects")}hasJSActions(){return _(this,Tr,wo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _(this,Tr,wo).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return _(this,Tr,wo).call(this,"GetOptionalContentConfig").then(t=>new bT(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=o(this,Bn).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new yT(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return o(this,Bn).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of o(this,qi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),o(this,Bn).clear(),this.filterFactory.destroy(!0),Lu.cleanup()}}cachedPageNumber(e){if(!S0(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return o(this,yo).get(t)??null}}Bn=new WeakMap,qi=new WeakMap,vo=new WeakMap,yo=new WeakMap,Yi=new WeakMap,Tr=new WeakSet,wo=function(i,e=null){const t=o(this,Bn).get(i);if(t)return t;const n=this.messageHandler.sendWithPromise(i,e);return o(this,Bn).set(i,n),n};const uc=Symbol("INITIAL_DATA");var Ai,dc,ag;class yb{constructor(){m(this,dc),m(this,Ai,Object.create(null))}get(e,t=null){if(t){const s=_(this,dc,ag).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=o(this,Ai)[e];if(!n||n.data===uc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=o(this,Ai)[e];return!!t&&t.data!==uc}resolve(e,t=null){const n=_(this,dc,ag).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in o(this,Ai)){const{data:n}=o(this,Ai)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}x(this,Ai,Object.create(null))}*[Symbol.iterator](){for(const e in o(this,Ai)){const{data:t}=o(this,Ai)[e];t!==uc&&(yield[e,t])}}}Ai=new WeakMap,dc=new WeakSet,ag=function(i){var e;return(e=o(this,Ai))[i]||(e[i]={...Promise.withResolvers(),data:uc})};var ds;class n2{constructor(e){m(this,ds,null),x(this,ds,e),this.onContinue=null}get promise(){return o(this,ds).capability.promise}cancel(e=0){o(this,ds).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=o(this,ds).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=o(this,ds);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ds=new WeakMap;var Zr;const wb=class bo{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:h,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:f=!1,pageColors:g=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=h,this.filterFactory=u,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new n2(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var n,s;if(this.cancelled)return;if(this._canvas){if(o(bo,Zr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(bo,Zr).add(this._canvas)}this._pdfBug&&(n=globalThis.StepperManager)!=null&&n.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:l,background:h}=this.params;this.gfx=new sc(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:a,transparency:e,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,(s=this.graphicsReadyCallback)==null||s.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),o(bo,Zr).delete(this._canvas),this.callback(e||new Qm(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(bo,Zr).delete(this._canvas),this.callback())))}};Zr=new WeakMap,m(wb,Zr,new WeakSet);let s2=wb;const r2="4.3.136",a2="0cec64437";function k0(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Ha(i){return Math.max(0,Math.min(255,255*i))}class C0{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ha(e),[e,e,e]}static G_HTML([e]){const t=k0(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Ha)}static RGB_HTML(e){return`#${e.map(k0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[Ha(1-Math.min(1,e+s)),Ha(1-Math.min(1,n+s)),Ha(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,r=1-t,a=1-n,l=Math.min(s,r,a);return["CMYK",s,r,a,l]}}class bb{static setupStorage(e,t,n,s,r){const a=s.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const h=l.target.options,u=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:r}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[h,u]of Object.entries(a))if(u!=null)switch(h){case"class":u.length&&e.setAttribute(h,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,u)}l&&r.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var t,n;const s=e.annotationStorage,r=e.linkService,a=e.xfaHtml,l=e.intent||"display",h=document.createElement(a.name);a.attributes&&this.setAttributes({html:h,element:a,intent:l,linkService:r});const u=l!=="richText",c=e.div;if(c.append(h),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=y}u&&c.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);h.append(y),u&&bl.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const g=[[a,-1,h]];for(;g.length>0;){const[y,A,E]=g.at(-1);if(A+1===y.children.length){g.pop();continue}const S=y.children[++g.at(-1)[1]];if(S===null)continue;const{name:k}=S;if(k==="#text"){const P=document.createTextNode(S.value);f.push(P),E.append(P);continue}const R=(t=S==null?void 0:S.attributes)!=null&&t.xmlns?document.createElementNS(S.attributes.xmlns,k):document.createElement(k);if(E.append(R),S.attributes&&this.setAttributes({html:R,element:S,storage:s,intent:l,linkService:r}),((n=S.children)==null?void 0:n.length)>0)g.push([S,-1,R]);else if(S.value){const P=document.createTextNode(S.value);u&&bl.shouldBuildText(k)&&f.push(P),R.append(P)}}for(const y of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const kl=1e3,o2=9,Ks=new WeakSet;function pn(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class l2{static create(e){switch(e.data.annotationType){case Je.LINK:return new Eb(e);case Je.TEXT:return new c2(e);case Je.WIDGET:switch(e.data.fieldType){case"Tx":return new u2(e);case"Btn":return e.data.radioButton?new Sb(e):e.data.checkBox?new f2(e):new p2(e);case"Ch":return new g2(e);case"Sig":return new d2(e)}return new ir(e);case Je.POPUP:return new cg(e);case Je.FREETEXT:return new Rb(e);case Je.LINE:return new v2(e);case Je.SQUARE:return new y2(e);case Je.CIRCLE:return new w2(e);case Je.POLYLINE:return new Mb(e);case Je.CARET:return new A2(e);case Je.INK:return new Tb(e);case Je.POLYGON:return new b2(e);case Je.HIGHLIGHT:return new _2(e);case Je.UNDERLINE:return new x2(e);case Je.SQUIGGLY:return new E2(e);case Je.STRIKEOUT:return new S2(e);case Je.STAMP:return new Pb(e);case Je.FILEATTACHMENT:return new k2(e);default:return new it(e)}}}var fs,Ao,_o,fc,og;const h2=class Ab{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){m(this,fc),m(this,fs,null),m(this,Ao,!1),m(this,_o,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get hasPopupData(){return Ab._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;o(this,fs)||x(this,fs,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&_(this,fc,og).call(this,n),(t=o(this,_o))==null||t.popup.updateEdited(e)}resetEdited(){var e;o(this,fs)&&(_(this,fc,og).call(this,o(this,fs).rect),(e=o(this,_o))==null||e.popup.resetEdited(),x(this,fs,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof ir||(r.tabIndex=kl);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.popupRef&&r.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof cg){const{rotation:E}=t;return!t.hasOwnCanvas&&E!==0&&this.setRotation(E,r),r}const{width:l,height:h}=pn(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const E=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(E>0||S>0){const R=`calc(${E}px * var(--scale-factor)) / calc(${S}px * var(--scale-factor))`;a.borderRadius=R}else if(this instanceof Sb){const R=`calc(${l}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;a.borderRadius=R}switch(t.borderStyle.style){case La.SOLID:a.borderStyle="solid";break;case La.DASHED:a.borderStyle="dashed";break;case La.BEVELED:Se("Unimplemented border style: beveled");break;case La.INSET:Se("Unimplemented border style: inset");break;case La.UNDERLINE:a.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(x(this,Ao,!0),a.borderColor=de.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):a.borderWidth=0}const u=de.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:f,pageX:g,pageY:y}=s.rawDims;a.left=`${100*(u[0]-g)/c}%`,a.top=`${100*(u[1]-y)/f}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(a.width=`${100*l/c}%`,a.height=`${100*h/f}%`):this.setRotation(A,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=pn(this.data.rect);let l,h;e%180===0?(l=100*r/n,h=100*a/s):(l=100*a/n,h=100*r/s),t.style.width=`${l}%`,t.style.height=`${h}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const r=s.detail[t],a=r[0],l=r.slice(1);s.target.style[n]=C0[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:C0[`${a}_rgb`](l)})};return Pe(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||n[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,r]of Object.entries(t)){const a=n[s];if(a){const l={detail:{[s]:r},target:e};a(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,r]=this.data.rect;if(e.length===1){const[,{x:E,y:S},{x:k,y:R}]=e[0];if(s===E&&r===S&&t===k&&n===R)return}const{style:a}=this.container;let l;if(o(this,Ao)){const{borderColor:E,borderWidth:S}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=s-t,u=r-n,{svgFactory:c}=this,f=c.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const g=c.createElement("defs");f.append(g);const y=c.createElement("clipPath"),A=`clippath_${this.data.id}`;y.setAttribute("id",A),y.setAttribute("clipPathUnits","objectBoundingBox"),g.append(y);for(const[,{x:E,y:S},{x:k,y:R}]of e){const P=c.createElement("rect"),N=(k-t)/h,F=(r-S)/u,j=(E-k)/h,L=(S-R)/u;P.setAttribute("x",N),P.setAttribute("y",F),P.setAttribute("width",j),P.setAttribute("height",L),y.append(P),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${F}" width="${j}" height="${L}"/>`)}o(this,Ao)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=x(this,_o,new cg({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){Fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:a,exportValues:l}of s){if(r===-1||a===t)continue;const h=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Ks.has(u)){Se(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:h,domElement:u})}return n}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==t&&Ks.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};fs=new WeakMap,Ao=new WeakMap,_o=new WeakMap,fc=new WeakSet,og=function(i){const{container:{style:e},data:{rect:t,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:l}}}}=this;t==null||t.splice(0,4,...i);const{width:h,height:u}=pn(i);e.left=`${100*(i[0]-a)/s}%`,e.top=`${100*(r-i[3]+l)/r}%`,n===0?(e.width=`${100*h/s}%`,e.height=`${100*u/r}%`):this.setRotation(n)};let it=h2;var Un,Ns,lg,_b,hg,xb;class Eb extends it{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(t!=null&&t.ignoreBorder),createQuadrilaterals:!0}),m(this,Un),m(this,lg),m(this,hg),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action),s=!0):e.attachment?(_(this,lg,_b).call(this,n,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(_(this,hg,xb).call(this,n,e.setOCGState),s=!0):e.dest?(this._bindLink(n,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&_(this,Un,Ns).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),_(this,Un,Ns).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const r=n.get(s);r&&(e[r]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1})}e.onclick||(e.onclick=()=>!1),_(this,Un,Ns).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),_(this,Un,Ns).call(this),!this._fieldObjects){Se('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var s;n==null||n();const{fields:r,refs:a,include:l}=t,h=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const g of r){const y=this._fieldObjects[g]||[];for(const{id:A}of y)f.add(A)}for(const g of Object.values(this._fieldObjects))for(const y of g)f.has(y.id)===l&&h.push(y)}else for(const f of Object.values(this._fieldObjects))h.push(...f);const u=this.annotationStorage,c=[];for(const f of h){const{id:g}=f;switch(c.push(g),f.type){case"text":{const A=f.defaultValue||"";u.setValue(g,{value:A});break}case"checkbox":case"radiobutton":{const A=f.defaultValue===f.exportValues;u.setValue(g,{value:A});break}case"combobox":case"listbox":{const A=f.defaultValue||"";u.setValue(g,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!Ks.has(y)){Se(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((s=this.linkService.eventBus)==null||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}Un=new WeakSet,Ns=function(){this.container.setAttribute("data-internal-link","")},lg=new WeakSet,_b=function(i,e,t=null){i.href=this.linkService.getAnchorUrl(""),e.description&&(i.title=e.description),i.onclick=()=>{var n;return(n=this.downloadManager)==null||n.openOrDownloadData(e.content,e.filename,t),!1},_(this,Un,Ns).call(this)},hg=new WeakSet,xb=function(i,e){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(e),!1),_(this,Un,Ns).call(this)};class c2 extends it{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ir extends it{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return $t.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,r){n.includes("mouse")?e.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var l;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(e,t,n,s){var r,a,l;for(const[h,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,h,u,s),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":de.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||o2,r=e.style;let a;const l=2,h=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),c=Math.round(u/(of*s))||1,f=u/c;a=Math.min(s,h(f/of))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,h(u/of))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=de.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class u2 extends ir{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),r.setValue(a.id,{[s]:n})}render(){var e,t;const n=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=n.getValue(s,{value:this.data.fieldValue});let l=a.value||"";const h=n.getValue(s,{charLimit:this.data.maxLen}).charLimit;h&&l.length>h&&(l=l.slice(0,h));let u=a.formattedValue||((e=this.data.textContent)==null?void 0:e.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??l,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",u??l),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Ks.add(r),r.setAttribute("data-element-id",s),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=kl,this._setRequired(r,this.data.required),h&&(r.maxLength=h),r.addEventListener("input",g=>{n.setValue(s,{value:g.target.value}),this.setPropertyOnSiblings(r,"value",g.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue??"";r.value=c.userValue=y,c.formattedValue=null});let f=g=>{const{formattedValue:y}=c;y!=null&&(g.target.value=y),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",y=>{var A;if(c.focused)return;const{target:E}=y;c.userValue&&(E.value=c.userValue),c.lastCommittedValue=E.value,c.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const A={value(E){c.userValue=E.detail.value??"",n.setValue(s,{value:c.userValue.toString()}),E.target.value=c.userValue},formattedValue(E){const{formattedValue:S}=E.detail;c.formattedValue=S,S!=null&&E.target!==document.activeElement&&(E.target.value=S),n.setValue(s,{formattedValue:S})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var S;const{charLimit:k}=E.detail,{target:R}=E;if(k===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",k);let P=c.userValue;!P||P.length<=k||(P=P.slice(0,k),R.value=c.userValue=P,n.setValue(s,{value:P}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(A,y)}),r.addEventListener("keydown",y=>{var A;c.commitKey=1;let E=-1;if(y.key==="Escape"?E=0:y.key==="Enter"&&!this.data.multiLine?E=2:y.key==="Tab"&&(c.commitKey=3),E===-1)return;const{value:S}=y.target;c.lastCommittedValue!==S&&(c.lastCommittedValue=S,c.userValue=S,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:S,willCommit:!0,commitKey:E,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const g=f;f=null,r.addEventListener("blur",y=>{var A,E;if(!c.focused||!y.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(c.focused=!1);const{value:S}=y.target;c.userValue=S,c.lastCommittedValue!==S&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:S,willCommit:!0,commitKey:c.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),g(y)}),(t=this.data.actions)!=null&&t.Keystroke&&r.addEventListener("beforeinput",y=>{var A;c.lastCommittedValue=null;const{data:E,target:S}=y,{value:k,selectionStart:R,selectionEnd:P}=S;let N=R,F=P;switch(y.inputType){case"deleteWordBackward":{const j=k.substring(0,R).match(/\w*[^\w]*$/);j&&(N-=j[0].length);break}case"deleteWordForward":{const j=k.substring(R).match(/^[^\w]*\w*/);j&&(F+=j[0].length);break}case"deleteContentBackward":R===P&&(N-=1);break;case"deleteContentForward":R===P&&(F+=1);break}y.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:k,change:E||"",willCommit:!1,selStart:N,selEnd:F}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/h;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class d2 extends ir{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class f2 extends ir{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ks.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=kl,r.addEventListener("change",a=>{const{name:l,checked:h}=a.target;for(const u of this._getElementsByName(l,n)){const c=h&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(n,{value:h})}),r.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Sb extends ir{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(Ks.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=kl,r.addEventListener("change",a=>{const{name:l,checked:h}=a.target;for(const u of this._getElementsByName(l,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:h})}),r.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const h={value:u=>{const c=a===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const g=c&&f.id===n;f.domElement&&(f.domElement.checked=g),e.setValue(f.id,{value:g})}}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class p2 extends Eb{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class g2 extends ir{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Ks.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=kl;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",c=>{const f=this.data.defaultFieldValue;for(const g of s.options)g.selected=g.value===f});for(const c of this.data.options){const f=document.createElement("option");f.textContent=c.displayValue,f.value=c.exportValue,n.value.includes(c.exportValue)&&(f.setAttribute("selected",!0),r=!1),s.append(f)}let a=null;if(r){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),s.prepend(c),a=()=>{c.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=c=>{const f=c?"value":"textContent",{options:g,multiple:y}=s;return y?Array.prototype.filter.call(g,A=>A.selected).map(A=>A[f]):g.selectedIndex===-1?null:g[g.selectedIndex][f]};let h=l(!1);const u=c=>{const f=c.target.options;return Array.prototype.map.call(f,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",c=>{const f={value(g){a==null||a();const y=g.detail.value,A=new Set(Array.isArray(y)?y:[y]);for(const E of s.options)E.selected=A.has(E.value);e.setValue(t,{value:l(!0)}),h=l(!1)},multipleSelection(g){s.multiple=!0},remove(g){const y=s.options,A=g.detail.remove;y[A].selected=!1,s.remove(A),y.length>0&&Array.prototype.findIndex.call(y,E=>E.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:l(!0),items:u(g)}),h=l(!1)},clear(g){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),h=l(!1)},insert(g){const{index:y,displayValue:A,exportValue:E}=g.detail.insert,S=s.children[y],k=document.createElement("option");k.textContent=A,k.value=E,S?S.before(k):s.append(k),e.setValue(t,{value:l(!0),items:u(g)}),h=l(!1)},items(g){const{items:y}=g.detail;for(;s.length!==0;)s.remove(0);for(const A of y){const{displayValue:E,exportValue:S}=A,k=document.createElement("option");k.textContent=E,k.value=S,s.append(k)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:u(g)}),h=l(!1)},indices(g){const y=new Set(g.detail.indices);for(const A of g.target.options)A.selected=y.has(A.index);e.setValue(t,{value:l(!0)}),h=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(f,c)}),s.addEventListener("input",c=>{var f;const g=l(!0),y=l(!1);e.setValue(t,{value:g}),c.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:y,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):s.addEventListener("input",function(c){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class cg extends it{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:it._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new m2({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Sw}${n}`).join(",")),this.container}}var Jo,ug,dg,el,Pr,qe,Dn,Lr,Du,Ou,tl,Sn,_i,Hn,Nu,$n,pc,ps,Ir,il,gc,mc,bf,fg,R0,pg,kb,gg,Cb,mg,M0,nl,Fu,sl,ju,Wu,vg;class m2{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:l,parent:h,rect:u,parentRect:c,open:f}){m(this,il),m(this,mc),m(this,fg),m(this,pg),m(this,gg),m(this,mg),m(this,nl),m(this,sl),m(this,Wu),m(this,Jo,_(this,gg,Cb).bind(this)),m(this,ug,_(this,Wu,vg).bind(this)),m(this,dg,_(this,sl,ju).bind(this)),m(this,el,_(this,nl,Fu).bind(this)),m(this,Pr,null),m(this,qe,null),m(this,Dn,null),m(this,Lr,null),m(this,Du,null),m(this,Ou,null),m(this,tl,null),m(this,Sn,!1),m(this,_i,null),m(this,Hn,null),m(this,Nu,null),m(this,$n,null),m(this,pc,null),m(this,ps,null),m(this,Ir,!1);var g;x(this,qe,e),x(this,pc,s),x(this,Dn,a),x(this,$n,l),x(this,Ou,h),x(this,Pr,t),x(this,Nu,u),x(this,tl,c),x(this,Du,n),x(this,Lr,Tw.toDateObject(r)),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",o(this,el)),y.addEventListener("mouseenter",o(this,dg)),y.addEventListener("mouseleave",o(this,ug)),y.classList.add("popupTriggerArea");for(const y of n)(g=y.container)==null||g.addEventListener("keydown",o(this,Jo));o(this,qe).hidden=!0,f&&_(this,nl,Fu).call(this)}render(){if(o(this,_i))return;const e=x(this,_i,document.createElement("div"));if(e.className="popup",o(this,Pr)){const r=e.style.outlineColor=de.makeHexColor(...o(this,Pr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=de.makeHexColor(...o(this,Pr).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=o(this,pc),e.append(t),o(this,Lr)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:o(this,Lr).toLocaleDateString(),time:o(this,Lr).toLocaleTimeString()})),t.append(r)}const s=o(this,il,gc);if(s)bb.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(o(this,Dn));e.append(r)}o(this,qe).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const l=s[r];n.append(document.createTextNode(l)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;o(this,ps)||x(this,ps,{contentsObj:o(this,Dn),richText:o(this,$n)}),e&&x(this,Hn,null),t&&(x(this,$n,_(this,pg,kb).call(this,t)),x(this,Dn,null)),(n=o(this,_i))==null||n.remove(),x(this,_i,null)}resetEdited(){var e;o(this,ps)&&({contentsObj:ai(this,Dn)._,richText:ai(this,$n)._}=o(this,ps),x(this,ps,null),(e=o(this,_i))==null||e.remove(),x(this,_i,null),x(this,Hn,null))}forceHide(){x(this,Ir,this.isVisible),o(this,Ir)&&(o(this,qe).hidden=!0)}maybeShow(){o(this,Ir)&&(o(this,_i)||_(this,sl,ju).call(this),x(this,Ir,!1),o(this,qe).hidden=!1)}get isVisible(){return o(this,qe).hidden===!1}}Jo=new WeakMap,ug=new WeakMap,dg=new WeakMap,el=new WeakMap,Pr=new WeakMap,qe=new WeakMap,Dn=new WeakMap,Lr=new WeakMap,Du=new WeakMap,Ou=new WeakMap,tl=new WeakMap,Sn=new WeakMap,_i=new WeakMap,Hn=new WeakMap,Nu=new WeakMap,$n=new WeakMap,pc=new WeakMap,ps=new WeakMap,Ir=new WeakMap,il=new WeakSet,gc=function(){const i=o(this,$n),e=o(this,Dn);return i!=null&&i.str&&(!(e!=null&&e.str)||e.str===i.str)&&o(this,$n).html||null},mc=new WeakSet,bf=function(){var i,e,t;return((t=(e=(i=o(this,il,gc))==null?void 0:i.attributes)==null?void 0:e.style)==null?void 0:t.fontSize)||0},fg=new WeakSet,R0=function(){var i,e,t;return((t=(e=(i=o(this,il,gc))==null?void 0:i.attributes)==null?void 0:e.style)==null?void 0:t.color)||null},pg=new WeakSet,kb=function(i){const e=[],t={str:i,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:o(this,fg,R0),fontSize:o(this,mc,bf)?`calc(${o(this,mc,bf)}px * var(--scale-factor))`:""}};for(const s of i.split(`
`))e.push({name:"span",value:s,attributes:n});return t},gg=new WeakSet,Cb=function(i){i.altKey||i.shiftKey||i.ctrlKey||i.metaKey||(i.key==="Enter"||i.key==="Escape"&&o(this,Sn))&&_(this,nl,Fu).call(this)},mg=new WeakSet,M0=function(){if(o(this,Hn)!==null)return;const{page:{view:i},viewport:{rawDims:{pageWidth:e,pageHeight:t,pageX:n,pageY:s}}}=o(this,Ou);let r=!!o(this,tl),a=r?o(this,tl):o(this,Nu);for(const g of o(this,Du))if(!a||de.intersect(g.data.rect,a)!==null){a=g.data.rect,r=!0;break}const l=de.normalizeRect([a[0],i[3]-a[1]+i[1],a[2],i[3]-a[3]+i[1]]),h=r?a[2]-a[0]+5:0,u=l[0]+h,c=l[1];x(this,Hn,[100*(u-n)/e,100*(c-s)/t]);const{style:f}=o(this,qe);f.left=`${o(this,Hn)[0]}%`,f.top=`${o(this,Hn)[1]}%`},nl=new WeakSet,Fu=function(){x(this,Sn,!o(this,Sn)),o(this,Sn)?(_(this,sl,ju).call(this),o(this,qe).addEventListener("click",o(this,el)),o(this,qe).addEventListener("keydown",o(this,Jo))):(_(this,Wu,vg).call(this),o(this,qe).removeEventListener("click",o(this,el)),o(this,qe).removeEventListener("keydown",o(this,Jo)))},sl=new WeakSet,ju=function(){o(this,_i)||this.render(),this.isVisible?o(this,Sn)&&o(this,qe).classList.add("focused"):(_(this,mg,M0).call(this),o(this,qe).hidden=!1,o(this,qe).style.zIndex=parseInt(o(this,qe).style.zIndex)+1e3)},Wu=new WeakSet,vg=function(){o(this,qe).classList.remove("focused"),!(o(this,Sn)||!this.isVisible)&&(o(this,qe).hidden=!0,o(this,qe).style.zIndex=parseInt(o(this,qe).style.zIndex)-1e3)};class Rb extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Te.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var vc;class v2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m(this,vc,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=pn(e.rect),s=this.svgFactory.create(t,n,!0),r=x(this,vc,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,vc)}addHighlightArea(){this.container.classList.add("highlightArea")}}vc=new WeakMap;var yc;class y2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m(this,yc,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=pn(e.rect),s=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,a=x(this,yc,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",t-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,yc)}addHighlightArea(){this.container.classList.add("highlightArea")}}yc=new WeakMap;var wc;class w2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m(this,wc,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=pn(e.rect),s=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,a=x(this,wc,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,wc)}addHighlightArea(){this.container.classList.add("highlightArea")}}wc=new WeakMap;var bc;class Mb extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m(this,bc,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=pn(e.rect),s=this.svgFactory.create(t,n,!0);let r=[];for(const l of e.vertices){const h=l.x-e.rect[0],u=e.rect[3]-l.y;r.push(h+","+u)}r=r.join(" ");const a=x(this,bc,this.svgFactory.createElement(this.svgElementName));return a.setAttribute("points",r),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,bc)}addHighlightArea(){this.container.classList.add("highlightArea")}}bc=new WeakMap;class b2 extends Mb{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class A2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ac;class Tb extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),m(this,Ac,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Te.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=pn(e.rect),s=this.svgFactory.create(t,n,!0);for(const r of e.inkLists){let a=[];for(const h of r){const u=h.x-e.rect[0],c=e.rect[3]-h.y;a.push(`${u},${c}`)}a=a.join(" ");const l=this.svgFactory.createElement(this.svgElementName);o(this,Ac).push(l),l.setAttribute("points",a),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),s.append(l)}return this.container.append(s),this.container}getElementsToTriggerPopup(){return o(this,Ac)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ac=new WeakMap;class _2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class x2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class E2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class S2 extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Pb extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var _c,xc,yg;class k2 extends it{constructor(e){var t;super(e,{isRenderable:!0}),m(this,xc),m(this,_c,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(t=this.linkService.eventBus)==null||t.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",_(this,xc,yg).bind(this)),x(this,_c,n);const{isMac:s}=$t.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&_(this,xc,yg).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return o(this,_c)}addHighlightArea(){this.container.classList.add("highlightArea")}}_c=new WeakMap,xc=new WeakSet,yg=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.content,this.filename)};var Zl,cr,$a,Af,T0,Jl,_f,P0;let C2=(P0=class{constructor({div:i,accessibilityManager:e,annotationCanvasMap:t,annotationEditorUIManager:n,page:s,viewport:r}){m(this,Af),m(this,Jl),m(this,Zl,null),m(this,cr,null),m(this,$a,new Map),this.div=i,x(this,Zl,e),x(this,cr,t),this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}async render(i){var e;const{annotations:t}=i,n=this.div;Ys(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new Xm,annotationStorage:i.annotationStorage||new tv,enableScripting:i.enableScripting===!0,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Je.POPUP;if(l){const c=s.get(a.id);if(!c)continue;r.elements=c}else{const{width:c,height:f}=pn(a.rect);if(c<=0||f<=0)continue}r.data=a;const h=l2.create(r);if(!h.isRenderable)continue;if(!l&&a.popupRef){const c=s.get(a.popupRef);c?c.push(h):s.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),_(this,Af,T0).call(this,u,a.id),h.annotationEditorType>0&&(o(this,$a).set(h.data.id,h),(e=this._annotationEditorUIManager)==null||e.renderAnnotationElement(h))}_(this,Jl,_f).call(this)}update({viewport:i}){const e=this.div;this.viewport=i,Ys(e,{rotation:i.rotation}),_(this,Jl,_f).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,$a).values())}getEditableAnnotation(i){return o(this,$a).get(i)}},Zl=new WeakMap,cr=new WeakMap,$a=new WeakMap,Af=new WeakSet,T0=function(i,e){var t;const n=i.firstChild||i;n.id=`${Sw}${e}`,this.div.append(i),(t=o(this,Zl))==null||t.moveElementInDOM(this.div,i,n,!1)},Jl=new WeakSet,_f=function(){if(!o(this,cr))return;const i=this.div;for(const[e,t]of o(this,cr)){const n=i.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;t.className="annotationContent";const{firstChild:s}=n;s?s.nodeName==="CANVAS"?s.replaceWith(t):s.classList.contains("annotationContent")?s.after(t):s.before(t):n.append(t)}o(this,cr).clear()},P0);const Ec=/\r\n?|\n/g;var Sc,kc,Cc,Rc,Mc,Mi,ni,Tc,si,rl,wg,Lb,bg,Ib,Ag,Db,al,Bu,ol,Uu,xo,Pc,_g,Ob,Hu,xg,Eg,Nb;const yi=class pt extends Ue{constructor(e){super({...e,name:"freeTextEditor"}),m(this,wg),m(this,bg),m(this,Ag),m(this,al),m(this,xo),m(this,_g),m(this,Eg),m(this,Sc,this.editorDivBlur.bind(this)),m(this,kc,this.editorDivFocus.bind(this)),m(this,Cc,this.editorDivInput.bind(this)),m(this,Rc,this.editorDivKeydown.bind(this)),m(this,Mc,this.editorDivPaste.bind(this)),m(this,Mi,void 0),m(this,ni,""),m(this,Tc,`${this.id}-editor`),m(this,si,void 0),m(this,rl,null),x(this,Mi,e.color||pt._defaultColor||Ue._defaultLineColor),x(this,si,e.fontSize||pt._defaultFontSize)}static get _keyboardManager(){const e=pt.prototype,t=r=>r.isEmpty(),n=wl.TRANSLATE_SMALL,s=wl.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new El([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static initialize(e,t){Ue.initialize(e,t,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case we.FREETEXT_SIZE:pt._defaultFontSize=t;break;case we.FREETEXT_COLOR:pt._defaultColor=t;break}}updateParams(e,t){switch(e){case we.FREETEXT_SIZE:_(this,wg,Lb).call(this,t);break;case we.FREETEXT_COLOR:_(this,bg,Ib).call(this,t);break}}static get defaultPropertiesToUpdate(){return[[we.FREETEXT_SIZE,pt._defaultFontSize],[we.FREETEXT_COLOR,pt._defaultColor||Ue._defaultLineColor]]}get propertiesToUpdate(){return[[we.FREETEXT_SIZE,o(this,si)],[we.FREETEXT_COLOR,o(this,Mi)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-pt._internalPadding*e,-(pt._internalPadding+o(this,si))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Te.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",o(this,Rc)),this.editorDiv.addEventListener("focus",o(this,kc)),this.editorDiv.addEventListener("blur",o(this,Sc)),this.editorDiv.addEventListener("input",o(this,Cc)),this.editorDiv.addEventListener("paste",o(this,Mc)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Tc)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",o(this,Rc)),this.editorDiv.removeEventListener("focus",o(this,kc)),this.editorDiv.removeEventListener("blur",o(this,Sc)),this.editorDiv.removeEventListener("input",o(this,Cc)),this.editorDiv.removeEventListener("paste",o(this,Mc)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,ni),t=x(this,ni,_(this,Ag,Db).call(this).trimEnd());if(e===t)return;const n=s=>{if(x(this,ni,s),!s){this.remove();return}_(this,xo,Pc).call(this),this._uiManager.rebuild(this),_(this,al,Bu).call(this)};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),_(this,al,Bu).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){pt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Tc)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Ue._l10nPromise.get("pdfjs-free-text-default-content").then(s=>{var r;return(r=this.editorDiv)==null?void 0:r.setAttribute("default-content",s)}),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${o(this,si)}px * var(--scale-factor))`,n.color=o(this,Mi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),yu(this,this.div,["dblclick","keydown"]),this.width){const[s,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=o(this,rl);let[l,h]=this.getInitialTranslation();[l,h]=this.pageTranslationToScreen(l,h);const[u,c]=this.pageDimensions,[f,g]=this.pageTranslation;let y,A;switch(this.rotation){case 0:y=e+(a[0]-f)/u,A=t+this.height-(a[1]-g)/c;break;case 90:y=e+(a[0]-f)/u,A=t-(a[1]-g)/c,[l,h]=[h,-l];break;case 180:y=e-this.width+(a[0]-f)/u,A=t-(a[1]-g)/c,[l,h]=[-l,-h];break;case 270:y=e+(a[0]-f-this.height*c)/u,A=t+(a[1]-g-this.width*u)/c,[l,h]=[-h,l];break}this.setAt(y*s,A*r,l,h)}else this.setAt(e*s,t*r,this.width*s,this.height*r);_(this,xo,Pc).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var t,n,s;const r=e.clipboardData||window.clipboardData,{types:a}=r;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const l=_(t=pt,Hu,xg).call(t,r.getData("text")||"").replaceAll(Ec,`
`);if(!l)return;const h=window.getSelection();if(!h.rangeCount)return;this.editorDiv.normalize(),h.deleteFromDocument();const u=h.getRangeAt(0);if(!l.includes(`
`)){u.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),h.collapseToStart();return}const{startContainer:c,startOffset:f}=u,g=[],y=[];if(c.nodeType===Node.TEXT_NODE){const S=c.parentElement;if(y.push(c.nodeValue.slice(f).replaceAll(Ec,"")),S!==this.editorDiv){let k=g;for(const R of this.editorDiv.childNodes){if(R===S){k=y;continue}k.push(_(n=pt,ol,Uu).call(n,R))}}g.push(c.nodeValue.slice(0,f).replaceAll(Ec,""))}else if(c===this.editorDiv){let S=g,k=0;for(const R of this.editorDiv.childNodes)k++===f&&(S=y),S.push(_(s=pt,ol,Uu).call(s,R))}x(this,ni,`${g.join(`
`)}${l}${y.join(`
`)}`),_(this,xo,Pc).call(this);const A=new Range;let E=g.reduce((S,k)=>S+k.length,0);for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const k=S.nodeValue.length;if(E<=k){A.setStart(S,E),A.setEnd(S,E);break}E-=k}h.removeAllRanges(),h.addRange(A)}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){var s;let r=null;if(e instanceof Rb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:u,rotation:c,id:f},textContent:g,textPosition:y,parent:{page:{pageNumber:A}}}=e;if(!g||g.length===0)return null;r=e={annotationType:Te.FREETEXT,color:Array.from(h),fontSize:l,value:g.join(`
`),position:y,pageIndex:A-1,rect:u.slice(0),rotation:c,id:f,deleted:!1}}const a=super.deserialize(e,t,n);return x(a,si,e.fontSize),x(a,Mi,de.makeHexColor(...e.color)),x(a,ni,_(s=pt,Hu,xg).call(s,e.value)),a.annotationElementId=e.id||null,x(a,rl,r),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=pt._internalPadding*this.parentScale,n=this.getRect(t,t),s=Ue._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,Mi)),r={annotationType:Te.FREETEXT,color:s,fontSize:o(this,si),value:_(this,_g,Ob).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!_(this,Eg,Nb).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize=`calc(${o(this,si)}px * var(--scale-factor))`,n.color=o(this,Mi),t.replaceChildren();for(const r of o(this,ni).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),t.append(a)}const s=pt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:o(this,ni)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Sc=new WeakMap,kc=new WeakMap,Cc=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,Mi=new WeakMap,ni=new WeakMap,Tc=new WeakMap,si=new WeakMap,rl=new WeakMap,wg=new WeakSet,Lb=function(i){const e=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--scale-factor))`,this.translate(0,-(n-o(this,si))*this.parentScale),x(this,si,n),_(this,al,Bu).call(this)},t=o(this,si);this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},bg=new WeakSet,Ib=function(i){const e=n=>{x(this,Mi,this.editorDiv.style.color=n)},t=o(this,Mi);this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ag=new WeakSet,Db=function(){var i;const e=[];this.editorDiv.normalize();for(const t of this.editorDiv.childNodes)e.push(_(i=yi,ol,Uu).call(i,t));return e.join(`
`)},al=new WeakSet,Bu=function(){const[i,e]=this.parentDimensions;let t;if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{const{currentLayer:n,div:s}=this,r=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",n.div.append(this.div),t=s.getBoundingClientRect(),s.remove(),s.style.display=r,s.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=t.width/i,this.height=t.height/e):(this.width=t.height/i,this.height=t.width/e),this.fixAndSetPosition()},ol=new WeakSet,Uu=function(i){return(i.nodeType===Node.TEXT_NODE?i.nodeValue:i.innerText).replaceAll(Ec,"")},xo=new WeakSet,Pc=function(){if(this.editorDiv.replaceChildren(),!!o(this,ni))for(const i of o(this,ni).split(`
`)){const e=document.createElement("div");e.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(e)}},_g=new WeakSet,Ob=function(){return o(this,ni).replaceAll("Â "," ")},Hu=new WeakSet,xg=function(i){return i.replaceAll(" ","Â ")},Eg=new WeakSet,Nb=function(i){const{value:e,fontSize:t,color:n,pageIndex:s}=o(this,rl);return this._hasBeenMoved||i.value!==e||i.fontSize!==t||i.color.some((r,a)=>r!==n[a])||i.pageIndex!==s},m(yi,ol),m(yi,Hu),Ae(yi,"_freeTextDefaultContent",""),Ae(yi,"_internalPadding",0),Ae(yi,"_defaultColor",null),Ae(yi,"_defaultFontSize",10),Ae(yi,"_type","freetext"),Ae(yi,"_editorType",Te.FREETEXT);let R2=yi;var $u,gs,wi,Sg,Fb,Eo,eh,kg,jb,Cg,Wb,Lc,Rg;class Mg{constructor(e,t=0,n=0,s=!0){m(this,Sg),m(this,Eo),m(this,kg),m(this,Cg),m(this,Lc),m(this,$u,void 0),m(this,gs,[]),m(this,wi,[]);let r=1/0,a=-1/0,l=1/0,h=-1/0;const u=10**-4;for(const{x:S,y:k,width:R,height:P}of e){const N=Math.floor((S-t)/u)*u,F=Math.ceil((S+R+t)/u)*u,j=Math.floor((k-t)/u)*u,L=Math.ceil((k+P+t)/u)*u,w=[N,j,L,!0],b=[F,j,L,!1];o(this,gs).push(w,b),r=Math.min(r,N),a=Math.max(a,F),l=Math.min(l,j),h=Math.max(h,L)}const c=a-r+2*n,f=h-l+2*n,g=r-n,y=l-n,A=o(this,gs).at(s?-1:-2),E=[A[0],A[2]];for(const S of o(this,gs)){const[k,R,P]=S;S[0]=(k-g)/c,S[1]=(R-y)/f,S[2]=(P-y)/f}x(this,$u,{x:g,y,width:c,height:f,lastPoint:E})}getOutlines(){o(this,gs).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of o(this,gs))t[3]?(e.push(..._(this,Lc,Rg).call(this,t)),_(this,kg,jb).call(this,t)):(_(this,Cg,Wb).call(this,t),e.push(..._(this,Lc,Rg).call(this,t)));return _(this,Sg,Fb).call(this,e)}}$u=new WeakMap,gs=new WeakMap,wi=new WeakMap,Sg=new WeakSet,Fb=function(i){const e=[],t=new Set;for(const r of i){const[a,l,h]=r;e.push([a,l,r],[a,h,r])}e.sort((r,a)=>r[1]-a[1]||r[0]-a[0]);for(let r=0,a=e.length;r<a;r+=2){const l=e[r][2],h=e[r+1][2];l.push(h),h.push(l),t.add(l),t.add(h)}const n=[];let s;for(;t.size>0;){const r=t.values().next().value;let[a,l,h,u,c]=r;t.delete(r);let f=a,g=l;for(s=[a,h],n.push(s);;){let y;if(t.has(u))y=u;else if(t.has(c))y=c;else break;t.delete(y),[a,l,h,u,c]=y,f!==a&&(s.push(f,g,a,g===l?l:h),f=a),g=g===l?h:l}s.push(f,g)}return new M2(n,o(this,$u))},Eo=new WeakSet,eh=function(i){const e=o(this,wi);let t=0,n=e.length-1;for(;t<=n;){const s=t+n>>1,r=e[s][0];if(r===i)return s;r<i?t=s+1:n=s-1}return n+1},kg=new WeakSet,jb=function([,i,e]){const t=_(this,Eo,eh).call(this,i);o(this,wi).splice(t,0,[i,e])},Cg=new WeakSet,Wb=function([,i,e]){const t=_(this,Eo,eh).call(this,i);for(let n=t;n<o(this,wi).length;n++){const[s,r]=o(this,wi)[n];if(s!==i)break;if(s===i&&r===e){o(this,wi).splice(n,1);return}}for(let n=t-1;n>=0;n--){const[s,r]=o(this,wi)[n];if(s!==i)break;if(s===i&&r===e){o(this,wi).splice(n,1);return}}},Lc=new WeakSet,Rg=function(i){const[e,t,n]=i,s=[[e,t,n]],r=_(this,Eo,eh).call(this,n);for(let a=0;a<r;a++){const[l,h]=o(this,wi)[a];for(let u=0,c=s.length;u<c;u++){const[,f,g]=s[u];if(!(h<=f||g<=l)){if(f>=l){if(g>h)s[u][1]=h;else{if(c===1)return[];s.splice(u,1),u--,c--}continue}s[u][2]=l,g>h&&s.push([e,h,g])}}}return s};class Bb{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Dg}}var Ic,So;class M2 extends Bb{constructor(e,t){super(),m(this,Ic,void 0),m(this,So,void 0),x(this,So,e),x(this,Ic,t)}toSVGPath(){const e=[];for(const t of o(this,So)){let[n,s]=t;e.push(`M${n} ${s}`);for(let r=2;r<t.length;r+=2){const a=t[r],l=t[r+1];a===n?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,t,n,s],r){const a=[],l=n-e,h=s-t;for(const u of o(this,So)){const c=new Array(u.length);for(let f=0;f<u.length;f+=2)c[f]=e+u[f]*l,c[f+1]=s-u[f+1]*h;a.push(c)}return a}get box(){return o(this,Ic)}}Ic=new WeakMap,So=new WeakMap;var Ji,kn,ko,Co,Ki,Me,ca,ua,Dc,Oc,Ro,Mo,ms,Nc,xf,Tg,Fc,Pg;const Dr=class Lg{constructor({x:e,y:t},n,s,r,a,l=0){m(this,Fc),m(this,Ji,void 0),m(this,kn,[]),m(this,ko,void 0),m(this,Co,void 0),m(this,Ki,[]),m(this,Me,new Float64Array(18)),m(this,ca,void 0),m(this,ua,void 0),m(this,Dc,void 0),m(this,Oc,void 0),m(this,Ro,void 0),m(this,Mo,void 0),m(this,ms,[]),x(this,Ji,n),x(this,Mo,r*s),x(this,Co,a),o(this,Me).set([NaN,NaN,NaN,NaN,e,t],6),x(this,ko,l),x(this,Oc,o(Lg,Nc)*s),x(this,Dc,o(Lg,Tg)*s),x(this,Ro,s),o(this,ms).push(e,t)}get free(){return!0}isEmpty(){return isNaN(o(this,Me)[8])}add({x:e,y:t}){var n;x(this,ca,e),x(this,ua,t);const[s,r,a,l]=o(this,Ji);let[h,u,c,f]=o(this,Me).subarray(8,12);const g=e-c,y=t-f,A=Math.hypot(g,y);if(A<o(this,Dc))return!1;const E=A-o(this,Oc),S=E/A,k=S*g,R=S*y;let P=h,N=u;h=c,u=f,c+=k,f+=R,(n=o(this,ms))==null||n.push(e,t);const F=-R/E,j=k/E,L=F*o(this,Mo),w=j*o(this,Mo);return o(this,Me).set(o(this,Me).subarray(2,8),0),o(this,Me).set([c+L,f+w],4),o(this,Me).set(o(this,Me).subarray(14,18),12),o(this,Me).set([c-L,f-w],16),isNaN(o(this,Me)[6])?(o(this,Ki).length===0&&(o(this,Me).set([h+L,u+w],2),o(this,Ki).push(NaN,NaN,NaN,NaN,(h+L-s)/a,(u+w-r)/l),o(this,Me).set([h-L,u-w],14),o(this,kn).push(NaN,NaN,NaN,NaN,(h-L-s)/a,(u-w-r)/l)),o(this,Me).set([P,N,h,u,c,f],6),!this.isEmpty()):(o(this,Me).set([P,N,h,u,c,f],6),Math.abs(Math.atan2(N-u,P-h)-Math.atan2(R,k))<Math.PI/2?([h,u,c,f]=o(this,Me).subarray(2,6),o(this,Ki).push(NaN,NaN,NaN,NaN,((h+c)/2-s)/a,((u+f)/2-r)/l),[h,u,P,N]=o(this,Me).subarray(14,18),o(this,kn).push(NaN,NaN,NaN,NaN,((P+h)/2-s)/a,((N+u)/2-r)/l),!0):([P,N,h,u,c,f]=o(this,Me).subarray(0,6),o(this,Ki).push(((P+5*h)/6-s)/a,((N+5*u)/6-r)/l,((5*h+c)/6-s)/a,((5*u+f)/6-r)/l,((h+c)/2-s)/a,((u+f)/2-r)/l),[c,f,h,u,P,N]=o(this,Me).subarray(12,18),o(this,kn).push(((P+5*h)/6-s)/a,((N+5*u)/6-r)/l,((5*h+c)/6-s)/a,((5*u+f)/6-r)/l,((h+c)/2-s)/a,((u+f)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=o(this,Ki),t=o(this,kn),n=o(this,Me).subarray(4,6),s=o(this,Me).subarray(16,18),[r,a,l,h]=o(this,Ji),[u,c,f,g]=_(this,Fc,Pg).call(this);if(isNaN(o(this,Me)[6])&&!this.isEmpty())return`M${(o(this,Me)[2]-r)/l} ${(o(this,Me)[3]-a)/h} L${(o(this,Me)[4]-r)/l} ${(o(this,Me)[5]-a)/h} L${u} ${c} L${f} ${g} L${(o(this,Me)[16]-r)/l} ${(o(this,Me)[17]-a)/h} L${(o(this,Me)[14]-r)/l} ${(o(this,Me)[15]-a)/h} Z`;const y=[];y.push(`M${e[4]} ${e[5]}`);for(let A=6;A<e.length;A+=6)isNaN(e[A])?y.push(`L${e[A+4]} ${e[A+5]}`):y.push(`C${e[A]} ${e[A+1]} ${e[A+2]} ${e[A+3]} ${e[A+4]} ${e[A+5]}`);y.push(`L${(n[0]-r)/l} ${(n[1]-a)/h} L${u} ${c} L${f} ${g} L${(s[0]-r)/l} ${(s[1]-a)/h}`);for(let A=t.length-6;A>=6;A-=6)isNaN(t[A])?y.push(`L${t[A+4]} ${t[A+5]}`):y.push(`C${t[A]} ${t[A+1]} ${t[A+2]} ${t[A+3]} ${t[A+4]} ${t[A+5]}`);return y.push(`L${t[4]} ${t[5]} Z`),y.join(" ")}getOutlines(){var e;const t=o(this,Ki),n=o(this,kn),s=o(this,Me),r=s.subarray(4,6),a=s.subarray(16,18),[l,h,u,c]=o(this,Ji),f=new Float64Array((((e=o(this,ms))==null?void 0:e.length)??0)+2);for(let R=0,P=f.length-2;R<P;R+=2)f[R]=(o(this,ms)[R]-l)/u,f[R+1]=(o(this,ms)[R+1]-h)/c;f[f.length-2]=(o(this,ca)-l)/u,f[f.length-1]=(o(this,ua)-h)/c;const[g,y,A,E]=_(this,Fc,Pg).call(this);if(isNaN(s[6])&&!this.isEmpty()){const R=new Float64Array(36);return R.set([NaN,NaN,NaN,NaN,(s[2]-l)/u,(s[3]-h)/c,NaN,NaN,NaN,NaN,(s[4]-l)/u,(s[5]-h)/c,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,A,E,NaN,NaN,NaN,NaN,(s[16]-l)/u,(s[17]-h)/c,NaN,NaN,NaN,NaN,(s[14]-l)/u,(s[15]-h)/c],0),new Dg(R,f,o(this,Ji),o(this,Ro),o(this,ko),o(this,Co))}const S=new Float64Array(o(this,Ki).length+24+o(this,kn).length);let k=t.length;for(let R=0;R<k;R+=2){if(isNaN(t[R])){S[R]=S[R+1]=NaN;continue}S[R]=t[R],S[R+1]=t[R+1]}S.set([NaN,NaN,NaN,NaN,(r[0]-l)/u,(r[1]-h)/c,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,A,E,NaN,NaN,NaN,NaN,(a[0]-l)/u,(a[1]-h)/c],k),k+=24;for(let R=n.length-6;R>=6;R-=6)for(let P=0;P<6;P+=2){if(isNaN(n[R+P])){S[k]=S[k+1]=NaN,k+=2;continue}S[k]=n[R+P],S[k+1]=n[R+P+1],k+=2}return S.set([NaN,NaN,NaN,NaN,n[4],n[5]],k),new Dg(S,f,o(this,Ji),o(this,Ro),o(this,ko),o(this,Co))}};Ji=new WeakMap,kn=new WeakMap,ko=new WeakMap,Co=new WeakMap,Ki=new WeakMap,Me=new WeakMap,ca=new WeakMap,ua=new WeakMap,Dc=new WeakMap,Oc=new WeakMap,Ro=new WeakMap,Mo=new WeakMap,ms=new WeakMap,Nc=new WeakMap,xf=new WeakMap,Tg=new WeakMap,Fc=new WeakSet,Pg=function(){const i=o(this,Me).subarray(4,6),e=o(this,Me).subarray(16,18),[t,n,s,r]=o(this,Ji);return[(o(this,ca)+(i[0]-e[0])/2-t)/s,(o(this,ua)+(i[1]-e[1])/2-n)/r,(o(this,ca)+(e[0]-i[0])/2-t)/s,(o(this,ua)+(e[1]-i[1])/2-n)/r]},m(Dr,Nc,8),m(Dr,xf,2),m(Dr,Tg,o(Dr,Nc)+o(Dr,xf));let Ub=Dr;var To,Jr,zn,jc,Jt,Wc,Qe,Or,Po,Nr,Lo,Ig,Hb;class Dg extends Bb{constructor(e,t,n,s,r,a){super(),m(this,Or),m(this,Nr),m(this,Ig),m(this,To,void 0),m(this,Jr,null),m(this,zn,void 0),m(this,jc,void 0),m(this,Jt,void 0),m(this,Wc,void 0),m(this,Qe,void 0),x(this,Qe,e),x(this,Jt,t),x(this,To,n),x(this,Wc,s),x(this,zn,r),x(this,jc,a),_(this,Ig,Hb).call(this,a);const{x:l,y:h,width:u,height:c}=o(this,Jr);for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-l)/u,e[f+1]=(e[f+1]-h)/c;for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-l)/u,t[f+1]=(t[f+1]-h)/c}toSVGPath(){const e=[`M${o(this,Qe)[4]} ${o(this,Qe)[5]}`];for(let t=6,n=o(this,Qe).length;t<n;t+=6){if(isNaN(o(this,Qe)[t])){e.push(`L${o(this,Qe)[t+4]} ${o(this,Qe)[t+5]}`);continue}e.push(`C${o(this,Qe)[t]} ${o(this,Qe)[t+1]} ${o(this,Qe)[t+2]} ${o(this,Qe)[t+3]} ${o(this,Qe)[t+4]} ${o(this,Qe)[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,s],r){const a=n-e,l=s-t;let h,u;switch(r){case 0:h=_(this,Or,Po).call(this,o(this,Qe),e,s,a,-l),u=_(this,Or,Po).call(this,o(this,Jt),e,s,a,-l);break;case 90:h=_(this,Nr,Lo).call(this,o(this,Qe),e,t,a,l),u=_(this,Nr,Lo).call(this,o(this,Jt),e,t,a,l);break;case 180:h=_(this,Or,Po).call(this,o(this,Qe),n,t,-a,l),u=_(this,Or,Po).call(this,o(this,Jt),n,t,-a,l);break;case 270:h=_(this,Nr,Lo).call(this,o(this,Qe),n,s,-a,-l),u=_(this,Nr,Lo).call(this,o(this,Jt),n,s,-a,-l);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return o(this,Jr)}getNewOutline(e,t){const{x:n,y:s,width:r,height:a}=o(this,Jr),[l,h,u,c]=o(this,To),f=r*u,g=a*c,y=n*u+l,A=s*c+h,E=new Ub({x:o(this,Jt)[0]*f+y,y:o(this,Jt)[1]*g+A},o(this,To),o(this,Wc),e,o(this,jc),t??o(this,zn));for(let S=2;S<o(this,Jt).length;S+=2)E.add({x:o(this,Jt)[S]*f+y,y:o(this,Jt)[S+1]*g+A});return E.getOutlines()}}To=new WeakMap,Jr=new WeakMap,zn=new WeakMap,jc=new WeakMap,Jt=new WeakMap,Wc=new WeakMap,Qe=new WeakMap,Or=new WeakSet,Po=function(i,e,t,n,s){const r=new Float64Array(i.length);for(let a=0,l=i.length;a<l;a+=2)r[a]=e+i[a]*n,r[a+1]=t+i[a+1]*s;return r},Nr=new WeakSet,Lo=function(i,e,t,n,s){const r=new Float64Array(i.length);for(let a=0,l=i.length;a<l;a+=2)r[a]=e+i[a+1]*n,r[a+1]=t+i[a]*s;return r},Ig=new WeakSet,Hb=function(i){const e=o(this,Qe);let t=e[4],n=e[5],s=t,r=n,a=t,l=n,h=t,u=n;const c=i?Math.max:Math.min;for(let E=6,S=e.length;E<S;E+=6){if(isNaN(e[E]))s=Math.min(s,e[E+4]),r=Math.min(r,e[E+5]),a=Math.max(a,e[E+4]),l=Math.max(l,e[E+5]),u<e[E+5]?(h=e[E+4],u=e[E+5]):u===e[E+5]&&(h=c(h,e[E+4]));else{const k=de.bezierBoundingBox(t,n,...e.slice(E,E+6));s=Math.min(s,k[0]),r=Math.min(r,k[1]),a=Math.max(a,k[2]),l=Math.max(l,k[3]),u<k[3]?(h=k[2],u=k[3]):u===k[3]&&(h=c(h,k[2]))}t=e[E+4],n=e[E+5]}const f=s-o(this,zn),g=r-o(this,zn),y=a-s+2*o(this,zn),A=l-r+2*o(this,zn);x(this,Jr,{x:f,y:g,width:y,height:A,lastPoint:[h,u]})};var zu,Vu,xi,Fr,ll,ot,Gu,Io,Bc,qu,Ms,hl,Yu,Og,Ku,Ng,Fg,$b,Cn,vs,jg,zb,en,On;const Vb=class ys{constructor({editor:e=null,uiManager:t=null}){m(this,Yu),m(this,Ku),m(this,Fg),m(this,Cn),m(this,jg),m(this,en),m(this,zu,_(this,Fg,$b).bind(this)),m(this,Vu,_(this,jg,zb).bind(this)),m(this,xi,null),m(this,Fr,null),m(this,ll,void 0),m(this,ot,null),m(this,Gu,!1),m(this,Io,!1),m(this,Bc,null),m(this,qu,void 0),m(this,Ms,null),m(this,hl,void 0);var n;e?(x(this,Io,!1),x(this,hl,we.HIGHLIGHT_COLOR),x(this,Bc,e)):(x(this,Io,!0),x(this,hl,we.HIGHLIGHT_DEFAULT_COLOR)),x(this,Ms,(e==null?void 0:e._uiManager)||t),x(this,qu,o(this,Ms)._eventBus),x(this,ll,(e==null?void 0:e.color)||((n=o(this,Ms))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Pe(this,"_keyboardManager",new El([[["Escape","mac+Escape"],ys.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ys.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ys.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ys.prototype._moveToPrevious],[["Home","mac+Home"],ys.prototype._moveToBeginning],[["End","mac+End"],ys.prototype._moveToEnd]]))}renderButton(){const e=x(this,xi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),e.addEventListener("click",_(this,Cn,vs).bind(this)),e.addEventListener("keydown",o(this,zu));const t=x(this,Fr,document.createElement("span"));return t.className="swatch",t.setAttribute("aria-hidden",!0),t.style.backgroundColor=o(this,ll),e.append(t),e}renderMainDropdown(){const e=x(this,ot,_(this,Yu,Og).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===o(this,xi)){_(this,Cn,vs).call(this,e);return}const t=e.target.getAttribute("data-color");t&&_(this,Ku,Ng).call(this,t,e)}_moveToNext(e){var t,n;if(!o(this,en,On)){_(this,Cn,vs).call(this,e);return}if(e.target===o(this,xi)){(t=o(this,ot).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=o(this,ot))==null?void 0:t.firstChild)||e.target===o(this,xi)){o(this,en,On)&&this._hideDropdownFromKeyboard();return}o(this,en,On)||_(this,Cn,vs).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!o(this,en,On)){_(this,Cn,vs).call(this,e);return}(t=o(this,ot).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!o(this,en,On)){_(this,Cn,vs).call(this,e);return}(t=o(this,ot).lastChild)==null||t.focus()}hideDropdown(){var e;(e=o(this,ot))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",o(this,Vu))}_hideDropdownFromKeyboard(){var e;if(!o(this,Io)){if(!o(this,en,On)){(e=o(this,Bc))==null||e.unselect();return}this.hideDropdown(),o(this,xi).focus({preventScroll:!0,focusVisible:o(this,Gu)})}}updateColor(e){if(o(this,Fr)&&(o(this,Fr).style.backgroundColor=e),!o(this,ot))return;const t=o(this,Ms).highlightColors.values();for(const n of o(this,ot).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=o(this,xi))==null||e.remove(),x(this,xi,null),x(this,Fr,null),(t=o(this,ot))==null||t.remove(),x(this,ot,null)}};zu=new WeakMap,Vu=new WeakMap,xi=new WeakMap,Fr=new WeakMap,ll=new WeakMap,ot=new WeakMap,Gu=new WeakMap,Io=new WeakMap,Bc=new WeakMap,qu=new WeakMap,Ms=new WeakMap,hl=new WeakMap,Yu=new WeakSet,Og=function(){const i=document.createElement("div");i.addEventListener("contextmenu",Ht),i.className="dropdown",i.role="listbox",i.setAttribute("aria-multiselectable",!1),i.setAttribute("aria-orientation","vertical"),i.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[e,t]of o(this,Ms).highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",t),n.title=e,n.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${e}`);const s=document.createElement("span");n.append(s),s.className="swatch",s.style.backgroundColor=t,n.setAttribute("aria-selected",t===o(this,ll)),n.addEventListener("click",_(this,Ku,Ng).bind(this,t)),i.append(n)}return i.addEventListener("keydown",o(this,zu)),i},Ku=new WeakSet,Ng=function(i,e){e.stopPropagation(),o(this,qu).dispatch("switchannotationeditorparams",{source:this,type:o(this,hl),value:i})},Fg=new WeakSet,$b=function(i){Vb._keyboardManager.exec(this,i)},Cn=new WeakSet,vs=function(i){if(o(this,en,On)){this.hideDropdown();return}if(x(this,Gu,i.detail===0),window.addEventListener("pointerdown",o(this,Vu)),o(this,ot)){o(this,ot).classList.remove("hidden");return}const e=x(this,ot,_(this,Yu,Og).call(this));o(this,xi).append(e)},jg=new WeakSet,zb=function(i){var e;(e=o(this,ot))!=null&&e.contains(i.target)||this.hideDropdown()},en=new WeakSet,On=function(){return o(this,ot)&&!o(this,ot).classList.contains("hidden")};let Gb=Vb;var cl,Xu,Fs,ea,ul,ci,Qu,Zu,da,Ei,Ft,ri,Wg,dl,ta,lt,Do,an,Uc,Hc,Bg,Ju,Ug,Hg,qb,$g,Yb,zg,L0,$c,Vg,jr,Oo,js,fa,Gg,Kb,No,zc,ia,fl,qg,Xb,Yg,Qb,Kg,Zb,Xg,Jb;const wt=class bt extends Ue{constructor(e){super({...e,name:"highlightEditor"}),m(this,Hc),m(this,Ju),m(this,Hg),m(this,$g),m(this,zg),m(this,$c),m(this,jr),m(this,Gg),m(this,No),m(this,ia),m(this,qg),m(this,Yg),m(this,cl,null),m(this,Xu,0),m(this,Fs,void 0),m(this,ea,null),m(this,ul,null),m(this,ci,null),m(this,Qu,null),m(this,Zu,0),m(this,da,null),m(this,Ei,null),m(this,Ft,null),m(this,ri,!1),m(this,Wg,_(this,Gg,Kb).bind(this)),m(this,dl,null),m(this,ta,void 0),m(this,lt,null),m(this,Do,""),m(this,an,void 0),m(this,Uc,""),this.color=e.color||bt._defaultColor,x(this,an,e.thickness||bt._defaultThickness),x(this,ta,e.opacity||bt._defaultOpacity),x(this,Fs,e.boxes||null),x(this,Uc,e.methodOfCreation||""),x(this,Do,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,ri,!0),_(this,Ju,Ug).call(this,e),_(this,jr,Oo).call(this)):(x(this,cl,e.anchorNode),x(this,Xu,e.anchorOffset),x(this,Qu,e.focusNode),x(this,Zu,e.focusOffset),_(this,Hc,Bg).call(this),_(this,jr,Oo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=bt.prototype;return Pe(this,"_keyboardManager",new El([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,ri)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,an),methodOfCreation:o(this,Uc)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;Ue.initialize(e,t),bt._defaultColor||(bt._defaultColor=((n=t.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case we.HIGHLIGHT_DEFAULT_COLOR:bt._defaultColor=t;break;case we.HIGHLIGHT_THICKNESS:bt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return o(this,dl)}updateParams(e,t){switch(e){case we.HIGHLIGHT_COLOR:_(this,Hg,qb).call(this,t);break;case we.HIGHLIGHT_THICKNESS:_(this,$g,Yb).call(this,t);break}}static get defaultPropertiesToUpdate(){return[[we.HIGHLIGHT_DEFAULT_COLOR,bt._defaultColor],[we.HIGHLIGHT_THICKNESS,bt._defaultThickness]]}get propertiesToUpdate(){return[[we.HIGHLIGHT_COLOR,this.color||bt._defaultColor],[we.HIGHLIGHT_THICKNESS,o(this,an)||bt._defaultThickness],[we.HIGHLIGHT_FREE,o(this,ri)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,ul,new Gb({editor:this})),e.addColorPicker(o(this,ul))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,ia,fl).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,_(this,ia,fl).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){_(this,$c,Vg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,jr,Oo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var t;let n=!1;this.parent&&!e?_(this,$c,Vg).call(this):e&&(_(this,jr,Oo).call(this,e),n=!this.parent&&((t=this.div)==null?void 0:t.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var t,n,s;const{drawLayer:r}=this.parent;let a;o(this,ri)?(e=(e-this.rotation+360)%360,a=_(t=bt,js,fa).call(t,o(this,Ei).box,e)):a=_(n=bt,js,fa).call(n,this,e),r.rotate(o(this,Ft),e),r.rotate(o(this,lt),e),r.updateBox(o(this,Ft),a),r.updateBox(o(this,lt),_(s=bt,js,fa).call(s,o(this,ci).box,e))}render(){if(this.div)return this.div;const e=super.render();o(this,Do)&&(e.setAttribute("aria-label",o(this,Do)),e.setAttribute("role","mark")),o(this,ri)?e.classList.add("free"):this.div.addEventListener("keydown",o(this,Wg));const t=x(this,da,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=o(this,ea);const[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),yu(this,o(this,da),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(o(this,lt),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(o(this,lt),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:_(this,No,zc).call(this,!0);break;case 1:case 3:_(this,No,zc).call(this,!1);break}}select(){var e,t;super.select(),o(this,lt)&&((e=this.parent)==null||e.drawLayer.removeClass(o(this,lt),"hovered"),(t=this.parent)==null||t.drawLayer.addClass(o(this,lt),"selected"))}unselect(){var e;super.unselect(),o(this,lt)&&((e=this.parent)==null||e.drawLayer.removeClass(o(this,lt),"selected"),o(this,ri)||_(this,No,zc).call(this,!1))}get _mustFixPosition(){return!o(this,ri)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(o(this,Ft),e),this.parent.drawLayer.show(o(this,lt),e))}static startHighlighting(e,t,{target:n,x:s,y:r}){const{x:a,y:l,width:h,height:u}=n.getBoundingClientRect(),c=A=>{_(this,Kg,Zb).call(this,e,A)},f={capture:!0,passive:!1},g=A=>{A.preventDefault(),A.stopPropagation()},y=A=>{n.removeEventListener("pointermove",c),window.removeEventListener("blur",y),window.removeEventListener("pointerup",y),window.removeEventListener("pointerdown",g,f),window.removeEventListener("contextmenu",Ht),_(this,Xg,Jb).call(this,e,A)};window.addEventListener("blur",y),window.addEventListener("pointerup",y),window.addEventListener("pointerdown",g,f),window.addEventListener("contextmenu",Ht),n.addEventListener("pointermove",c),this._freeHighlight=new Ub({x:s,y:r},[a,l,h,u],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,t,n){var s;const r=super.deserialize(e,t,n),{rect:[a,l,h,u],color:c,quadPoints:f}=e;r.color=de.makeHexColor(...c),x(r,ta,e.opacity);const[g,y]=r.pageDimensions;r.width=(h-a)/g,r.height=(u-l)/y;const A=x(r,Fs,[]);for(let E=0;E<f.length;E+=8)A.push({x:(f[4]-h)/g,y:(u-(1-f[E+5]))/y,width:(f[E+2]-f[E])/g,height:(f[E+5]-f[E+1])/y});return _(s=r,Hc,Bg).call(s),r}serialize(e=!1){if(this.isEmpty()||e)return null;const t=this.getRect(0,0),n=Ue._colorManager.convert(this.color);return{annotationType:Te.HIGHLIGHT,color:n,opacity:o(this,ta),thickness:o(this,an),quadPoints:_(this,qg,Xb).call(this),outlines:_(this,Yg,Qb).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:_(this,ia,fl).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};cl=new WeakMap,Xu=new WeakMap,Fs=new WeakMap,ea=new WeakMap,ul=new WeakMap,ci=new WeakMap,Qu=new WeakMap,Zu=new WeakMap,da=new WeakMap,Ei=new WeakMap,Ft=new WeakMap,ri=new WeakMap,Wg=new WeakMap,dl=new WeakMap,ta=new WeakMap,lt=new WeakMap,Do=new WeakMap,an=new WeakMap,Uc=new WeakMap,Hc=new WeakSet,Bg=function(){const i=new Mg(o(this,Fs),.001);x(this,Ei,i.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=o(this,Ei).box;const e=new Mg(o(this,Fs),.0025,.001,this._uiManager.direction==="ltr");x(this,ci,e.getOutlines());const{lastPoint:t}=o(this,ci).box;x(this,dl,[(t[0]-this.x)/this.width,(t[1]-this.y)/this.height])},Ju=new WeakSet,Ug=function({highlightOutlines:i,highlightId:e,clipPathId:t}){var n,s;if(x(this,Ei,i),x(this,ci,i.getNewOutline(o(this,an)/2+1.5,.0025)),e>=0)x(this,Ft,e),x(this,ea,t),this.parent.drawLayer.finalizeLine(e,i),x(this,lt,this.parent.drawLayer.highlightOutline(o(this,ci)));else if(this.parent){const c=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(o(this,Ft),i),this.parent.drawLayer.updateBox(o(this,Ft),_(n=wt,js,fa).call(n,o(this,Ei).box,(c-this.rotation+360)%360)),this.parent.drawLayer.updateLine(o(this,lt),o(this,ci)),this.parent.drawLayer.updateBox(o(this,lt),_(s=wt,js,fa).call(s,o(this,ci).box,c))}const{x:r,y:a,width:l,height:h}=i.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=l,this.height=h;break;case 90:{const[c,f]=this.parentDimensions;this.x=a,this.y=1-r,this.width=l*f/c,this.height=h*c/f;break}case 180:this.x=1-r,this.y=1-a,this.width=l,this.height=h;break;case 270:{const[c,f]=this.parentDimensions;this.x=1-a,this.y=r,this.width=l*f/c,this.height=h*c/f;break}}const{lastPoint:u}=o(this,ci).box;x(this,dl,[(u[0]-r)/l,(u[1]-a)/h])},Hg=new WeakSet,qb=function(i){const e=n=>{var s,r;this.color=n,(s=this.parent)==null||s.drawLayer.changeColor(o(this,Ft),n),(r=o(this,ul))==null||r.updateColor(n)},t=this.color;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(i)},!0)},$g=new WeakSet,Yb=function(i){const e=o(this,an),t=n=>{x(this,an,n),_(this,zg,L0).call(this,n)};this.addCommands({cmd:t.bind(this,i),undo:t.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:i},!0)},zg=new WeakSet,L0=function(i){if(!o(this,ri))return;_(this,Ju,Ug).call(this,{highlightOutlines:o(this,Ei).getNewOutline(i/2)}),this.fixAndSetPosition();const[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)},$c=new WeakSet,Vg=function(){o(this,Ft)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Ft)),x(this,Ft,null),this.parent.drawLayer.remove(o(this,lt)),x(this,lt,null))},jr=new WeakSet,Oo=function(i=this.parent){o(this,Ft)===null&&({id:ai(this,Ft)._,clipPathId:ai(this,ea)._}=i.drawLayer.highlight(o(this,Ei),this.color,o(this,ta)),x(this,lt,i.drawLayer.highlightOutline(o(this,ci))),o(this,da)&&(o(this,da).style.clipPath=o(this,ea)))},js=new WeakSet,fa=function({x:i,y:e,width:t,height:n},s){switch(s){case 90:return{x:1-e-n,y:i,width:n,height:t};case 180:return{x:1-i-t,y:1-e-n,width:t,height:n};case 270:return{x:e,y:1-i-t,width:n,height:t}}return{x:i,y:e,width:t,height:n}},Gg=new WeakSet,Kb=function(i){wt._keyboardManager.exec(this,i)},No=new WeakSet,zc=function(i){if(!o(this,cl))return;const e=window.getSelection();i?e.setPosition(o(this,cl),o(this,Xu)):e.setPosition(o(this,Qu),o(this,Zu))},ia=new WeakSet,fl=function(){return o(this,ri)?this.rotation:0},qg=new WeakSet,Xb=function(){if(o(this,ri))return null;const[i,e]=this.pageDimensions,t=o(this,Fs),n=new Array(t.length*8);let s=0;for(const{x:r,y:a,width:l,height:h}of t){const u=r*i,c=(1-a-h)*e;n[s]=n[s+4]=u,n[s+1]=n[s+3]=c,n[s+2]=n[s+6]=u+l*i,n[s+5]=n[s+7]=c+h*e,s+=8}return n},Yg=new WeakSet,Qb=function(i){return o(this,Ei).serialize(i,_(this,ia,fl).call(this))},Kg=new WeakSet,Zb=function(i,e){this._freeHighlight.add(e)&&i.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Xg=new WeakSet,Jb=function(i,e){this._freeHighlight.isEmpty()?i.drawLayer.removeFreeHighlight(this._freeHighlightId):i.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},m(wt,js),m(wt,Kg),m(wt,Xg),Ae(wt,"_defaultColor",null),Ae(wt,"_defaultOpacity",1),Ae(wt,"_defaultThickness",12),Ae(wt,"_l10nPromise"),Ae(wt,"_type","highlight"),Ae(wt,"_editorType",Te.HIGHLIGHT),Ae(wt,"_freeHighlightId",-1),Ae(wt,"_freeHighlight",null),Ae(wt,"_freeHighlightClipId","");let I0=wt;var na,sa,Vc,Gc,qc,pa,on,Rn,di,Wr,ra,ga,aa,oa,ws,Qg,e1,Zg,t1,Jg,i1,em,n1,Yc,Ef,tm,s1,ed,im,nm,D0,sm,O0,rm,N0,am,F0,om,j0,Vn,Ts,Kc,lm,pl,td,gl,id,Ws,ma,Xc,hm,Fo,th,cm,r1,ih,Sf,um,a1,dm,o1,nd,fm,jo,nh,va,ml;const Ot=class li extends Ue{constructor(e){super({...e,name:"inkEditor"}),m(this,Qg),m(this,Zg),m(this,Jg),m(this,em),m(this,Yc),m(this,tm),m(this,ed),m(this,nm),m(this,sm),m(this,rm),m(this,am),m(this,om),m(this,Vn),m(this,Kc),m(this,pl),m(this,gl),m(this,Ws),m(this,Xc),m(this,Fo),m(this,dm),m(this,nd),m(this,jo),m(this,va),m(this,na,0),m(this,sa,0),m(this,Vc,this.canvasPointermove.bind(this)),m(this,Gc,this.canvasPointerleave.bind(this)),m(this,qc,this.canvasPointerup.bind(this)),m(this,pa,this.canvasPointerdown.bind(this)),m(this,on,null),m(this,Rn,new Path2D),m(this,di,!1),m(this,Wr,!1),m(this,ra,!1),m(this,ga,null),m(this,aa,0),m(this,oa,0),m(this,ws,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){Ue.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case we.INK_THICKNESS:li._defaultThickness=t;break;case we.INK_COLOR:li._defaultColor=t;break;case we.INK_OPACITY:li._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case we.INK_THICKNESS:_(this,Qg,e1).call(this,t);break;case we.INK_COLOR:_(this,Zg,t1).call(this,t);break;case we.INK_OPACITY:_(this,Jg,i1).call(this,t);break}}static get defaultPropertiesToUpdate(){return[[we.INK_THICKNESS,li._defaultThickness],[we.INK_COLOR,li._defaultColor||Ue._defaultLineColor],[we.INK_OPACITY,Math.round(li._defaultOpacity*100)]]}get propertiesToUpdate(){return[[we.INK_THICKNESS,this.thickness||li._defaultThickness],[we.INK_COLOR,this.color||li._defaultColor||Ue._defaultLineColor],[we.INK_OPACITY,Math.round(100*(this.opacity??li._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(_(this,pl,td).call(this),_(this,gl,id).call(this)),this.isAttachedToDOM||(this.parent.add(this),_(this,Ws,ma).call(this)),_(this,va,ml).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,o(this,on)&&(clearTimeout(o(this,on)),x(this,on,null)),o(this,ga).disconnect(),x(this,ga,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,s=this.height*t;this.setDimensions(n,s)}enableEditMode(){o(this,di)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",o(this,pa)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",o(this,pa)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){o(this,di)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,di,!0),this.div.classList.add("disabled"),_(this,va,ml).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||o(this,di)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),_(this,tm,s1).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),_(this,ed,im).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),_(this,Kc,lm).call(this,e)}canvasPointerleave(e){_(this,Kc,lm).call(this,e)}get isResizable(){return!this.isEmpty()&&o(this,di)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,s,r,a]=_(this,em,n1).call(this);if(this.setAt(n,s,0,0),this.setDims(r,a),_(this,pl,td).call(this),this.width){const[l,h]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*h),this.setAt(e*l,t*h,this.width*l,this.height*h),x(this,ra,!0),_(this,Ws,ma).call(this),this.setDims(this.width*l,this.height*h),_(this,Vn,Ts).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _(this,gl,id).call(this),this.div}setDimensions(e,t){const n=Math.round(e),s=Math.round(t);if(o(this,aa)===n&&o(this,oa)===s)return;x(this,aa,n),x(this,oa,s),this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=e/r,this.height=t/a,this.fixAndSetPosition(),o(this,di)&&_(this,Xc,hm).call(this,e,t),_(this,Ws,ma).call(this),_(this,Vn,Ts).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,t,n){var s,r,a;if(e instanceof Tb)return null;const l=super.deserialize(e,t,n);l.thickness=e.thickness,l.color=de.makeHexColor(...e.color),l.opacity=e.opacity;const[h,u]=l.pageDimensions,c=l.width*h,f=l.height*u,g=l.parentScale,y=e.thickness/2;x(l,di,!0),x(l,aa,Math.round(c)),x(l,oa,Math.round(f));const{paths:A,rect:E,rotation:S}=e;for(let{bezier:R}of A){R=_(s=li,um,a1).call(s,R,E,S);const P=[];l.paths.push(P);let N=g*(R[0]-y),F=g*(R[1]-y);for(let L=2,w=R.length;L<w;L+=6){const b=g*(R[L]-y),C=g*(R[L+1]-y),T=g*(R[L+2]-y),D=g*(R[L+3]-y),B=g*(R[L+4]-y),K=g*(R[L+5]-y);P.push([[N,F],[b,C],[T,D],[B,K]]),N=B,F=K}const j=_(this,cm,r1).call(this,P);l.bezierPath2D.push(j)}const k=_(r=l,nd,fm).call(r);return x(l,sa,Math.max(Ue.MIN_SIZE,k[2]-k[0])),x(l,na,Math.max(Ue.MIN_SIZE,k[3]-k[1])),_(a=l,Xc,hm).call(a,c,f),l}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=Ue._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Te.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:_(this,dm,o1).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};na=new WeakMap,sa=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,qc=new WeakMap,pa=new WeakMap,on=new WeakMap,Rn=new WeakMap,di=new WeakMap,Wr=new WeakMap,ra=new WeakMap,ga=new WeakMap,aa=new WeakMap,oa=new WeakMap,ws=new WeakMap,Qg=new WeakSet,e1=function(i){const e=n=>{this.thickness=n,_(this,va,ml).call(this)},t=this.thickness;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Zg=new WeakSet,t1=function(i){const e=n=>{this.color=n,_(this,Vn,Ts).call(this)},t=this.color;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Jg=new WeakSet,i1=function(i){const e=n=>{this.opacity=n,_(this,Vn,Ts).call(this)};i/=100;const t=this.opacity;this.addCommands({cmd:e.bind(this,i),undo:e.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:we.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},em=new WeakSet,n1=function(){const{parentRotation:i,parentDimensions:[e,t]}=this;switch(i){case 90:return[0,t,t,e];case 180:return[e,t,e,t];case 270:return[e,0,t,e];default:return[0,0,e,t]}},Yc=new WeakSet,Ef=function(){const{ctx:i,color:e,opacity:t,thickness:n,parentScale:s,scaleFactor:r}=this;i.lineWidth=n*s/r,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${e}${VM(t)}`},tm=new WeakSet,s1=function(i,e){this.canvas.addEventListener("contextmenu",Ht),this.canvas.addEventListener("pointerleave",o(this,Gc)),this.canvas.addEventListener("pointermove",o(this,Vc)),this.canvas.addEventListener("pointerup",o(this,qc)),this.canvas.removeEventListener("pointerdown",o(this,pa)),this.isEditing=!0,o(this,ra)||(x(this,ra,!0),_(this,Ws,ma).call(this),this.thickness||(this.thickness=Ot._defaultThickness),this.color||(this.color=Ot._defaultColor||Ue._defaultLineColor),this.opacity??(this.opacity=Ot._defaultOpacity)),this.currentPath.push([i,e]),x(this,Wr,!1),_(this,Yc,Ef).call(this),x(this,ws,()=>{_(this,rm,N0).call(this),o(this,ws)&&window.requestAnimationFrame(o(this,ws))}),window.requestAnimationFrame(o(this,ws))},ed=new WeakSet,im=function(i,e){const[t,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===t&&e===n)return;const s=this.currentPath;let r=o(this,Rn);if(s.push([i,e]),x(this,Wr,!0),s.length<=2){r.moveTo(...s[0]),r.lineTo(i,e);return}s.length===3&&(x(this,Rn,r=new Path2D),r.moveTo(...s[0])),_(this,am,F0).call(this,r,...s.at(-3),...s.at(-2),i,e)},nm=new WeakSet,D0=function(){if(this.currentPath.length===0)return;const i=this.currentPath.at(-1);o(this,Rn).lineTo(...i)},sm=new WeakSet,O0=function(i,e){x(this,ws,null),i=Math.min(Math.max(i,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),_(this,ed,im).call(this,i,e),_(this,nm,D0).call(this);let t;if(this.currentPath.length!==1)t=_(this,om,j0).call(this);else{const l=[i,e];t=[[l,l.slice(),l.slice(),l]]}const n=o(this,Rn),s=this.currentPath;this.currentPath=[],x(this,Rn,new Path2D);const r=()=>{this.allRawPaths.push(s),this.paths.push(t),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},a=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_(this,pl,td).call(this),_(this,gl,id).call(this)),_(this,va,ml).call(this))};this.addCommands({cmd:r,undo:a,mustExec:!0})},rm=new WeakSet,N0=function(){if(!o(this,Wr))return;x(this,Wr,!1);const i=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),t=e.map(r=>r[0]),n=e.map(r=>r[1]);Math.min(...t)-i,Math.max(...t)+i,Math.min(...n)-i,Math.max(...n)+i;const{ctx:s}=this;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)s.stroke(r);s.stroke(o(this,Rn)),s.restore()},am=new WeakSet,F0=function(i,e,t,n,s,r,a){const l=(e+n)/2,h=(t+s)/2,u=(n+r)/2,c=(s+a)/2;i.bezierCurveTo(l+2*(n-l)/3,h+2*(s-h)/3,u+2*(n-u)/3,c+2*(s-c)/3,u,c)},om=new WeakSet,j0=function(){const i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];const e=[];let t,[n,s]=i[0];for(t=1;t<i.length-2;t++){const[f,g]=i[t],[y,A]=i[t+1],E=(f+y)/2,S=(g+A)/2,k=[n+2*(f-n)/3,s+2*(g-s)/3],R=[E+2*(f-E)/3,S+2*(g-S)/3];e.push([[n,s],k,R,[E,S]]),[n,s]=[E,S]}const[r,a]=i[t],[l,h]=i[t+1],u=[n+2*(r-n)/3,s+2*(a-s)/3],c=[l+2*(r-l)/3,h+2*(a-h)/3];return e.push([[n,s],u,c,[l,h]]),e},Vn=new WeakSet,Ts=function(){if(this.isEmpty()){_(this,Fo,th).call(this);return}_(this,Yc,Ef).call(this);const{canvas:i,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height),_(this,Fo,th).call(this);for(const t of this.bezierPath2D)e.stroke(t)},Kc=new WeakSet,lm=function(i){this.canvas.removeEventListener("pointerleave",o(this,Gc)),this.canvas.removeEventListener("pointermove",o(this,Vc)),this.canvas.removeEventListener("pointerup",o(this,qc)),this.canvas.addEventListener("pointerdown",o(this,pa)),o(this,on)&&clearTimeout(o(this,on)),x(this,on,setTimeout(()=>{x(this,on,null),this.canvas.removeEventListener("contextmenu",Ht)},10)),_(this,sm,O0).call(this,i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()},pl=new WeakSet,td=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},gl=new WeakSet,id=function(){x(this,ga,new ResizeObserver(i=>{const e=i[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),o(this,ga).observe(this.div)},Ws=new WeakSet,ma=function(){if(!o(this,ra))return;const[i,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*e),_(this,Fo,th).call(this)},Xc=new WeakSet,hm=function(i,e){const t=_(this,jo,nh).call(this),n=(i-t)/o(this,sa),s=(e-t)/o(this,na);this.scaleFactor=Math.min(n,s)},Fo=new WeakSet,th=function(){const i=_(this,jo,nh).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)},cm=new WeakSet,r1=function(i){const e=new Path2D;for(let t=0,n=i.length;t<n;t++){const[s,r,a,l]=i[t];t===0&&e.moveTo(...s),e.bezierCurveTo(r[0],r[1],a[0],a[1],l[0],l[1])}return e},ih=new WeakSet,Sf=function(i,e,t){const[n,s,r,a]=e;switch(t){case 0:for(let l=0,h=i.length;l<h;l+=2)i[l]+=n,i[l+1]=a-i[l+1];break;case 90:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=i[l+1]+n,i[l+1]=u+s}break;case 180:for(let l=0,h=i.length;l<h;l+=2)i[l]=r-i[l],i[l+1]+=s;break;case 270:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=r-i[l+1],i[l+1]=a-u}break;default:throw new Error("Invalid rotation")}return i},um=new WeakSet,a1=function(i,e,t){const[n,s,r,a]=e;switch(t){case 0:for(let l=0,h=i.length;l<h;l+=2)i[l]-=n,i[l+1]=a-i[l+1];break;case 90:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=i[l+1]-s,i[l+1]=u-n}break;case 180:for(let l=0,h=i.length;l<h;l+=2)i[l]=r-i[l],i[l+1]-=s;break;case 270:for(let l=0,h=i.length;l<h;l+=2){const u=i[l];i[l]=a-i[l+1],i[l+1]=r-u}break;default:throw new Error("Invalid rotation")}return i},dm=new WeakSet,o1=function(i,e,t,n){var s,r;const a=[],l=this.thickness/2,h=i*e+l,u=i*t+l;for(const c of this.paths){const f=[],g=[];for(let y=0,A=c.length;y<A;y++){const[E,S,k,R]=c[y];if(E[0]===R[0]&&E[1]===R[1]&&A===1){const T=i*E[0]+h,D=i*E[1]+u;f.push(T,D),g.push(T,D);break}const P=i*E[0]+h,N=i*E[1]+u,F=i*S[0]+h,j=i*S[1]+u,L=i*k[0]+h,w=i*k[1]+u,b=i*R[0]+h,C=i*R[1]+u;y===0&&(f.push(P,N),g.push(P,N)),f.push(F,j,L,w,b,C),g.push(F,j),y===A-1&&g.push(b,C)}a.push({bezier:_(s=Ot,ih,Sf).call(s,f,n,this.rotation),points:_(r=Ot,ih,Sf).call(r,g,n,this.rotation)})}return a},nd=new WeakSet,fm=function(){let i=1/0,e=-1/0,t=1/0,n=-1/0;for(const s of this.paths)for(const[r,a,l,h]of s){const u=de.bezierBoundingBox(...r,...a,...l,...h);i=Math.min(i,u[0]),t=Math.min(t,u[1]),e=Math.max(e,u[2]),n=Math.max(n,u[3])}return[i,t,e,n]},jo=new WeakSet,nh=function(){return o(this,di)?Math.ceil(this.thickness*this.parentScale):0},va=new WeakSet,ml=function(i=!1){if(this.isEmpty())return;if(!o(this,di)){_(this,Vn,Ts).call(this);return}const e=_(this,nd,fm).call(this),t=_(this,jo,nh).call(this);x(this,sa,Math.max(Ue.MIN_SIZE,e[2]-e[0])),x(this,na,Math.max(Ue.MIN_SIZE,e[3]-e[1]));const n=Math.ceil(t+o(this,sa)*this.scaleFactor),s=Math.ceil(t+o(this,na)*this.scaleFactor),[r,a]=this.parentDimensions;this.width=n/r,this.height=s/a,this.setAspectRatio(n,s);const l=this.translationX,h=this.translationY;this.translationX=-e[0],this.translationY=-e[1],_(this,Ws,ma).call(this),_(this,Vn,Ts).call(this),x(this,aa,n),x(this,oa,s),this.setDims(n,s);const u=i?t/this.scaleFactor/2:0;this.translate(l-this.translationX-u,h-this.translationY-u)},m(Ot,cm),m(Ot,ih),m(Ot,um),Ae(Ot,"_defaultColor",null),Ae(Ot,"_defaultOpacity",1),Ae(Ot,"_defaultThickness",1),Ae(Ot,"_type","ink"),Ae(Ot,"_editorType",Te.INK);let T2=Ot;var _t,Et,Ps,Kn,Bs,Wo,ln,ya,hn,Ii,Qc,Br,za,Ur,Va,Bo,Zc,sd,pm,gm,W0,mm,B0,Jc,kf,Uo,eu,vm,U0;const tu=class extends Ue{constructor(e){super({...e,name:"stampEditor"}),m(this,Br),m(this,Ur),m(this,Bo),m(this,sd),m(this,gm),m(this,mm),m(this,Jc),m(this,Uo),m(this,vm),m(this,_t,null),m(this,Et,null),m(this,Ps,null),m(this,Kn,null),m(this,Bs,null),m(this,Wo,""),m(this,ln,null),m(this,ya,null),m(this,hn,null),m(this,Ii,!1),m(this,Qc,!1),x(this,Kn,e.bitmapUrl),x(this,Bs,e.bitmapFile)}static initialize(e,t){Ue.initialize(e,t)}static get supportedTypes(){return Pe(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return Pe(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(Te.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;o(this,Et)&&(x(this,_t,null),this._uiManager.imageManager.deleteId(o(this,Et)),(e=o(this,ln))==null||e.remove(),x(this,ln,null),(t=o(this,ya))==null||t.disconnect(),x(this,ya,null),o(this,hn)&&(clearTimeout(o(this,hn)),x(this,hn,null))),super.remove()}rebuild(){if(!this.parent){o(this,Et)&&_(this,Bo,Zc).call(this);return}super.rebuild(),this.div!==null&&(o(this,Et)&&o(this,ln)===null&&_(this,Bo,Zc).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(o(this,Ps)||o(this,_t)||o(this,Kn)||o(this,Bs)||o(this,Et))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),o(this,_t)?_(this,sd,pm).call(this):_(this,Bo,Zc).call(this),this.width){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s)}return this.div}getImageForAltText(){return o(this,ln)}static deserialize(e,t,n){if(e instanceof Pb)return null;const s=super.deserialize(e,t,n),{rect:r,bitmapUrl:a,bitmapId:l,isSvg:h,accessibilityData:u}=e;l&&n.imageManager.isValidId(l)?x(s,Et,l):x(s,Kn,a),x(s,Ii,h);const[c,f]=s.pageDimensions;return s.width=(r[2]-r[0])/c,s.height=(r[3]-r[1])/f,u&&(s.altTextData=u),s}serialize(e=!1,t=null){if(this.isEmpty())return null;const n={annotationType:Te.STAMP,bitmapId:o(this,Et),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,Ii),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=_(this,Uo,eu).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:s,altText:r}=this.altTextData;if(!s&&r&&(n.accessibilityData={type:"Figure",alt:r}),t===null)return n;t.stamps||(t.stamps=new Map);const a=o(this,Ii)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(o(this,Et)))t.stamps.set(o(this,Et),{area:a,serialized:n}),n.bitmap=_(this,Uo,eu).call(this,!1);else if(o(this,Ii)){const l=t.stamps.get(o(this,Et));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=_(this,Uo,eu).call(this,!1))}return n}};_t=new WeakMap,Et=new WeakMap,Ps=new WeakMap,Kn=new WeakMap,Bs=new WeakMap,Wo=new WeakMap,ln=new WeakMap,ya=new WeakMap,hn=new WeakMap,Ii=new WeakMap,Qc=new WeakMap,Br=new WeakSet,za=function(i,e=!1){if(!i){this.remove();return}x(this,_t,i.bitmap),e||(x(this,Et,i.id),x(this,Ii,i.isSvg)),i.file&&x(this,Wo,i.file.name),_(this,sd,pm).call(this)},Ur=new WeakSet,Va=function(){x(this,Ps,null),this._uiManager.enableWaiting(!1),o(this,ln)&&this.div.focus()},Bo=new WeakSet,Zc=function(){if(o(this,Et)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,Et)).then(e=>_(this,Br,za).call(this,e,!0)).finally(()=>_(this,Ur,Va).call(this));return}if(o(this,Kn)){const e=o(this,Kn);x(this,Kn,null),this._uiManager.enableWaiting(!0),x(this,Ps,this._uiManager.imageManager.getFromUrl(e).then(t=>_(this,Br,za).call(this,t)).finally(()=>_(this,Ur,Va).call(this)));return}if(o(this,Bs)){const e=o(this,Bs);x(this,Bs,null),this._uiManager.enableWaiting(!0),x(this,Ps,this._uiManager.imageManager.getFromFile(e).then(t=>_(this,Br,za).call(this,t)).finally(()=>_(this,Ur,Va).call(this)));return}const i=document.createElement("input");i.type="file",i.accept=tu.supportedTypesStr,x(this,Ps,new Promise(e=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(i.files[0]);_(this,Br,za).call(this,t)}e()}),i.addEventListener("cancel",()=>{this.remove(),e()})}).finally(()=>_(this,Ur,Va).call(this))),i.click()},sd=new WeakSet,pm=function(){const{div:i}=this;let{width:e,height:t}=o(this,_t);const[n,s]=this.pageDimensions,r=.75;if(this.width)e=this.width*n,t=this.height*s;else if(e>r*n||t>r*s){const u=Math.min(r*n/e,r*s/t);e*=u,t*=u}const[a,l]=this.parentDimensions;this.setDims(e*a/n,t*l/s),this._uiManager.enableWaiting(!1);const h=x(this,ln,document.createElement("canvas"));i.append(h),i.hidden=!1,_(this,Jc,kf).call(this,e,t),_(this,vm,U0).call(this),o(this,Qc)||(this.parent.addUndoableEditor(this),x(this,Qc,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,Wo)&&h.setAttribute("aria-label",o(this,Wo))},gm=new WeakSet,W0=function(i,e){var t;const[n,s]=this.parentDimensions;this.width=i/n,this.height=e/s,this.setDims(i,e),(t=this._initialOptions)!=null&&t.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,o(this,hn)!==null&&clearTimeout(o(this,hn)),x(this,hn,setTimeout(()=>{x(this,hn,null),_(this,Jc,kf).call(this,i,e)},200))},mm=new WeakSet,B0=function(i,e){const{width:t,height:n}=o(this,_t);let s=t,r=n,a=o(this,_t);for(;s>2*i||r>2*e;){const l=s,h=r;s>2*i&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const u=new OffscreenCanvas(s,r);u.getContext("2d").drawImage(a,0,0,l,h,0,0,s,r),a=u.transferToImageBitmap()}return a},Jc=new WeakSet,kf=function(i,e){i=Math.ceil(i),e=Math.ceil(e);const t=o(this,ln);if(!t||t.width===i&&t.height===e)return;t.width=i,t.height=e;const n=o(this,Ii)?o(this,_t):_(this,mm,B0).call(this,i,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const r=new OffscreenCanvas(i,e).getContext("2d");r.drawImage(n,0,0,n.width,n.height,0,0,i,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:r.getImageData(0,0,i,e).data,width:i,height:e,channels:4}}).then(a=>{const l=(a==null?void 0:a.output)||"";this.parent&&l&&!this.hasAltText()&&(this.altTextData={altText:l,decorative:!1})})}const s=t.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(n,0,0,n.width,n.height,0,0,i,e)},Uo=new WeakSet,eu=function(i){if(i){if(o(this,Ii)){const t=this._uiManager.imageManager.getSvgUrl(o(this,Et));if(t)return t}const e=document.createElement("canvas");return{width:e.width,height:e.height}=o(this,_t),e.getContext("2d").drawImage(o(this,_t),0,0),e.toDataURL()}if(o(this,Ii)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*ka.PDF_TO_CSS_UNITS),s=Math.round(this.height*t*ka.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,s);return r.getContext("2d").drawImage(o(this,_t),0,0,o(this,_t).width,o(this,_t).height,0,0,n,s),r.transferToImageBitmap()}return structuredClone(o(this,_t))},vm=new WeakSet,U0=function(){x(this,ya,new ResizeObserver(i=>{const e=i[0].contentRect;e.width&&e.height&&_(this,gm,W0).call(this,e.width,e.height)})),o(this,ya).observe(this.div)},Ae(tu,"_type","stamp"),Ae(tu,"_editorType",Te.STAMP);let P2=tu;var Hr,Ho,Xi,$r,Mn,Tn,Pn,ei,bs,vl,$o,Wt,ge,Us,ym,l1,rd,wm,iu,bm,nu,Am,zo,su;const ru=class As{constructor({uiManager:e,pageIndex:t,div:n,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:l,viewport:h,l10n:u}){m(this,ym),m(this,rd),m(this,iu),m(this,nu),m(this,zo),m(this,Hr,void 0),m(this,Ho,!1),m(this,Xi,null),m(this,$r,null),m(this,Mn,null),m(this,Tn,null),m(this,Pn,null),m(this,ei,new Map),m(this,bs,!1),m(this,vl,!1),m(this,$o,!1),m(this,Wt,null),m(this,ge,void 0);const c=[...o(As,Us).values()];if(!As._initialized){As._initialized=!0;for(const f of c)f.initialize(u,e)}e.registerEditorTypes(c),x(this,ge,e),this.pageIndex=t,this.div=n,x(this,Hr,s),x(this,Xi,r),this.viewport=h,x(this,Wt,l),this.drawLayer=a,o(this,ge).addLayer(this)}get isEmpty(){return o(this,ei).size===0}get isInvisible(){return this.isEmpty&&o(this,ge).getMode()===Te.NONE}updateToolbar(e){o(this,ge).updateToolbar(e)}updateMode(e=o(this,ge).getMode()){switch(_(this,zo,su).call(this),e){case Te.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Te.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Te.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of o(As,Us).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=o(this,Wt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(o(this,ge).getMode()===Te.INK){if(!e){for(const t of o(this,ei).values())if(t.isEmpty()){t.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){o(this,ge).setEditingState(e)}addCommands(e){o(this,ge).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=o(this,Xi))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of o(this,ei).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(o(this,ge).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!o(this,Xi))return;const t=o(this,Xi).getEditableAnnotations();for(const n of t){if(n.hide(),o(this,ge).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var e;x(this,$o,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,n=new Map;for(const r of o(this,ei).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else n.set(r.annotationElementId,r);(e=this.getEditableAnnotation(r.annotationElementId))==null||e.show(),r.remove()}if(o(this,Xi)){const r=o(this,Xi).getEditableAnnotations();for(const a of r){const{id:l}=a.data;if(o(this,ge).isDeletedAnnotationElement(l))continue;let h=n.get(l);if(h){h.resetAnnotationElement(a),h.show(!1),a.show();continue}h=t.get(l),h&&(o(this,ge).addChangedExistingAnnotation(h),h.renderAnnotationElement(a),h.show(!1)),a.show()}}_(this,zo,su).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of o(As,Us).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,$o,!1)}getEditableAnnotation(e){var t;return((t=o(this,Xi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){o(this,ge).getActive()!==e&&o(this,ge).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=o(this,Wt))!=null&&e.div&&!o(this,Tn)&&(x(this,Tn,_(this,ym,l1).bind(this)),o(this,Wt).div.addEventListener("pointerdown",o(this,Tn)),o(this,Wt).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=o(this,Wt))!=null&&e.div&&o(this,Tn)&&(o(this,Wt).div.removeEventListener("pointerdown",o(this,Tn)),x(this,Tn,null),o(this,Wt).div.classList.remove("highlighting"))}enableClick(){o(this,Mn)||(x(this,Mn,this.pointerdown.bind(this)),x(this,$r,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",o(this,Mn)),this.div.addEventListener("pointerup",o(this,$r)))}disableClick(){o(this,Mn)&&(this.div.removeEventListener("pointerdown",o(this,Mn)),this.div.removeEventListener("pointerup",o(this,$r)),x(this,Mn,null),x(this,$r,null))}attach(e){o(this,ei).set(e.id,e);const{annotationElementId:t}=e;t&&o(this,ge).isDeletedAnnotationElement(t)&&o(this,ge).removeDeletedAnnotationElement(e)}detach(e){var t;o(this,ei).delete(e.id),(t=o(this,Hr))==null||t.removePointerInTextLayer(e.contentDiv),!o(this,$o)&&e.annotationElementId&&o(this,ge).addDeletedAnnotationElement(e)}remove(e){this.detach(e),o(this,ge).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,o(this,vl)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(o(this,ge).addDeletedAnnotationElement(e.annotationElementId),Ue.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),o(this,ge).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),o(this,ge).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!o(this,Pn)&&(e._focusEventsAllowed=!1,x(this,Pn,setTimeout(()=>{x(this,Pn,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),n.focus())},0))),e._structTreeParentId=(t=o(this,Hr))==null?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return o(this,ge).getId()}canCreateNewEmptyEditor(){var e;return(e=o(this,rd,wm))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){o(this,ge).updateToolbar(e),o(this,ge).updateMode(e);const{offsetX:n,offsetY:s}=_(this,nu,Am).call(this),r=this.getNextId(),a=_(this,iu,bm).call(this,{parent:this,id:r,x:n,y:s,uiManager:o(this,ge),isCentered:!0,...t});a&&this.add(a)}deserialize(e){var t;return((t=o(As,Us).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,o(this,ge)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),r=_(this,iu,bm).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:o(this,ge),isCentered:t,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(_(this,nu,Am).call(this),!0)}setSelected(e){o(this,ge).setSelected(e)}toggleSelected(e){o(this,ge).toggleSelected(e)}isSelected(e){return o(this,ge).isSelected(e)}unselect(e){o(this,ge).unselect(e)}pointerup(e){const{isMac:t}=$t.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&o(this,bs)){if(x(this,bs,!1),!o(this,Ho)){x(this,Ho,!0);return}if(o(this,ge).getMode()===Te.STAMP){o(this,ge).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(o(this,ge).getMode()===Te.HIGHLIGHT&&this.enableTextSelection(),o(this,bs)){x(this,bs,!1);return}const{isMac:t}=$t.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;x(this,bs,!0);const n=o(this,ge).getActive();x(this,Ho,!n||n.isEmpty())}findNewParent(e,t,n){const s=o(this,ge).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=o(this,ge).getActive())==null?void 0:e.parent)===this&&(o(this,ge).commitOrRemove(),o(this,ge).setActiveEditor(null)),o(this,Pn)&&(clearTimeout(o(this,Pn)),x(this,Pn,null));for(const n of o(this,ei).values())(t=o(this,Hr))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,o(this,ei).clear(),o(this,ge).removeLayer(this)}render({viewport:e}){this.viewport=e,Ys(this.div,e);for(const t of o(this,ge).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){o(this,ge).commitOrRemove(),_(this,zo,su).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ys(this.div,{rotation:n}),t!==n)for(const s of o(this,ei).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return o(this,ge).viewParameters.realScale}};Hr=new WeakMap,Ho=new WeakMap,Xi=new WeakMap,$r=new WeakMap,Mn=new WeakMap,Tn=new WeakMap,Pn=new WeakMap,ei=new WeakMap,bs=new WeakMap,vl=new WeakMap,$o=new WeakMap,Wt=new WeakMap,ge=new WeakMap,Us=new WeakMap,ym=new WeakSet,l1=function(i){if(o(this,ge).unselectAll(),i.target===o(this,Wt).div){const{isMac:e}=$t.platform;if(i.button!==0||i.ctrlKey&&e)return;o(this,ge).showAllEditors("highlight",!0,!0),o(this,Wt).div.classList.add("free"),I0.startHighlighting(this,o(this,ge).direction==="ltr",i),o(this,Wt).div.addEventListener("pointerup",()=>{o(this,Wt).div.classList.remove("free")},{once:!0}),i.preventDefault()}},rd=new WeakSet,wm=function(){return o(ru,Us).get(o(this,ge).getMode())},iu=new WeakSet,bm=function(i){const e=o(this,rd,wm);return e?new e.prototype.constructor(i):null},nu=new WeakSet,Am=function(){const{x:i,y:e,width:t,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,i),r=Math.max(0,e),a=Math.min(window.innerWidth,i+t),l=Math.min(window.innerHeight,e+n),h=(s+a)/2-i,u=(r+l)/2-e,[c,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:c,offsetY:f}},zo=new WeakSet,su=function(){x(this,vl,!0);for(const i of o(this,ei).values())i.isEmpty()&&i.remove();x(this,vl,!1)},Ae(ru,"_initialized",!1),m(ru,Us,new Map([R2,T2,P2,I0].map(i=>[i._editorType,i])));let L2=ru;var tn,au,rt,_s,ou,_m,lu,xm,Em,h1;const zr=class hi{constructor({pageIndex:e}){m(this,lu),m(this,Em),m(this,tn,null),m(this,au,0),m(this,rt,new Map),m(this,_s,new Map),this.pageIndex=e}setParent(e){if(!o(this,tn)){x(this,tn,e);return}if(o(this,tn)!==e){if(o(this,rt).size>0)for(const t of o(this,rt).values())t.remove(),e.append(t);x(this,tn,e)}}static get _svgFactory(){return Pe(this,"_svgFactory",new Xm)}highlight(e,t,n,s=!1){const r=ai(this,au)._++,a=_(this,lu,xm).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const l=hi._svgFactory.createElement("defs");a.append(l);const h=hi._svgFactory.createElement("path");l.append(h);const u=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",u),h.setAttribute("d",e.toSVGPath()),s&&o(this,_s).set(r,h);const c=_(this,Em,h1).call(this,l,u),f=hi._svgFactory.createElement("use");return a.append(f),a.setAttribute("fill",t),a.setAttribute("fill-opacity",n),f.setAttribute("href",`#${u}`),o(this,rt).set(r,a),{id:r,clipPathId:`url(#${c})`}}highlightOutline(e){const t=ai(this,au)._++,n=_(this,lu,xm).call(this,e.box);n.classList.add("highlightOutline");const s=hi._svgFactory.createElement("defs");n.append(s);const r=hi._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",a),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(e.free){n.classList.add("free");const c=hi._svgFactory.createElement("mask");s.append(c),l=`mask_p${this.pageIndex}_${t}`,c.setAttribute("id",l),c.setAttribute("maskUnits","objectBoundingBox");const f=hi._svgFactory.createElement("rect");c.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=hi._svgFactory.createElement("use");c.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=hi._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${a}`),l&&h.setAttribute("mask",`url(#${l})`);const u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),o(this,rt).set(t,n),t}finalizeLine(e,t){const n=o(this,_s).get(e);o(this,_s).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){o(this,rt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),o(this,_s).delete(e)}updatePath(e,t){o(this,_s).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;_(n=hi,ou,_m).call(n,o(this,rt).get(e),t)}show(e,t){o(this,rt).get(e).classList.toggle("hidden",!t)}rotate(e,t){o(this,rt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){o(this,rt).get(e).setAttribute("fill",t)}changeOpacity(e,t){o(this,rt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){o(this,rt).get(e).classList.add(t)}removeClass(e,t){o(this,rt).get(e).classList.remove(t)}remove(e){o(this,tn)!==null&&(o(this,rt).get(e).remove(),o(this,rt).delete(e))}destroy(){x(this,tn,null);for(const e of o(this,rt).values())e.remove();o(this,rt).clear()}};tn=new WeakMap,au=new WeakMap,rt=new WeakMap,_s=new WeakMap,ou=new WeakSet,_m=function(i,{x:e=0,y:t=0,width:n=1,height:s=1}={}){const{style:r}=i;r.top=`${100*t}%`,r.left=`${100*e}%`,r.width=`${100*n}%`,r.height=`${100*s}%`},lu=new WeakSet,xm=function(i){var e;const t=zr._svgFactory.create(1,1,!0);return o(this,tn).append(t),t.setAttribute("aria-hidden",!0),_(e=zr,ou,_m).call(e,t,i),t},Em=new WeakSet,h1=function(i,e){const t=zr._svgFactory.createElement("clipPath");i.append(t);const n=`clip_${e}`;t.setAttribute("id",n),t.setAttribute("clipPathUnits","objectBoundingBox");const s=zr._svgFactory.createElement("use");return t.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n},m(zr,ou);let I2=zr;var D2=me.AbortException,O2=me.AnnotationEditorLayer,N2=me.AnnotationEditorParamsType,F2=me.AnnotationEditorType,j2=me.AnnotationEditorUIManager,c1=me.AnnotationLayer,u1=me.AnnotationMode,W2=me.CMapCompressionType,B2=me.ColorPicker,U2=me.DOMSVGFactory,H2=me.DrawLayer,$2=me.FeatureTest,sv=me.GlobalWorkerOptions,z2=me.ImageKind,V2=me.InvalidPDFException,G2=me.MissingPDFException,q2=me.OPS,Y2=me.Outliner,K2=me.PDFDataRangeTransport,X2=me.PDFDateString,Q2=me.PDFWorker,Z2=me.PasswordResponses,J2=me.PermissionFlag,eP=me.PixelsPerInch,tP=me.RenderingCancelledException,d1=me.TextLayer,iP=me.UnexpectedResponseException,nP=me.Util,sP=me.VerbosityLevel,rP=me.XfaLayer,aP=me.build,oP=me.createValidAbsoluteUrl,lP=me.fetchData,f1=me.getDocument,hP=me.getFilenameFromUrl,cP=me.getPdfFilenameFromUrl,uP=me.getXfaPageViewport,dP=me.isDataScheme,fP=me.isPdfFile,pP=me.noContextMenu,gP=me.normalizeUnicode,mP=me.renderTextLayer,vP=me.setLayerDimensions,yP=me.shadow,wP=me.updateTextLayer,p1=me.version;const bP=Object.freeze(Object.defineProperty({__proto__:null,AbortException:D2,AnnotationEditorLayer:O2,AnnotationEditorParamsType:N2,AnnotationEditorType:F2,AnnotationEditorUIManager:j2,AnnotationLayer:c1,AnnotationMode:u1,CMapCompressionType:W2,ColorPicker:B2,DOMSVGFactory:U2,DrawLayer:H2,FeatureTest:$2,GlobalWorkerOptions:sv,ImageKind:z2,InvalidPDFException:V2,MissingPDFException:G2,OPS:q2,Outliner:Y2,PDFDataRangeTransport:K2,PDFDateString:X2,PDFWorker:Q2,PasswordResponses:Z2,PermissionFlag:J2,PixelsPerInch:eP,RenderingCancelledException:tP,TextLayer:d1,UnexpectedResponseException:iP,Util:nP,VerbosityLevel:sP,XfaLayer:rP,build:aP,createValidAbsoluteUrl:oP,fetchData:lP,getDocument:f1,getFilenameFromUrl:hP,getPdfFilenameFromUrl:cP,getXfaPageViewport:uP,isDataScheme:dP,isPdfFile:fP,noContextMenu:pP,normalizeUnicode:gP,renderTextLayer:mP,setLayerDimensions:vP,shadow:yP,updateTextLayer:wP,version:p1},Symbol.toStringTag,{value:"Module"}));var st=function(i,e,t){for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))},AP=["onCopy","onCut","onPaste"],_P=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],xP=["onFocus","onBlur"],EP=["onInput","onInvalid","onReset","onSubmit"],SP=["onLoad","onError"],kP=["onKeyDown","onKeyPress","onKeyUp"],CP=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],RP=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],MP=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],TP=["onSelect"],PP=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],LP=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],IP=["onScroll"],DP=["onWheel"],OP=["onAnimationStart","onAnimationEnd","onAnimationIteration"],NP=["onTransitionEnd"],FP=["onToggle"],jP=["onChange"],WP=st(st(st(st(st(st(st(st(st(st(st(st(st(st(st(st(st(st([],AP,!0),_P,!0),xP,!0),EP,!0),SP,!0),kP,!0),CP,!0),RP,!0),MP,!0),TP,!0),PP,!0),LP,!0),IP,!0),DP,!0),OP,!0),NP,!0),jP,!0),FP);function g1(i,e){var t={};return WP.forEach(function(n){var s=i[n];s&&(e?t[n]=function(r){return s(r,e(n))}:t[n]=s)}),t}function Cl(i){var e=!1,t=new Promise(function(n,s){i.then(function(r){return!e&&n(r)}).catch(function(r){return!e&&s(r)})});return{promise:t,cancel:function(){e=!0}}}function m1(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i))for(e=0;e<i.length;e++)i[e]&&(t=m1(i[e]))&&(n&&(n+=" "),n+=t);else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function Pd(){for(var i,e,t=0,n="";t<arguments.length;)(i=arguments[t++])&&(e=m1(i))&&(n&&(n+=" "),n+=e);return n}var BP=be.env.NODE_ENV==="production",Cf="Invariant failed";function Be(i,e){if(!i){if(BP)throw new Error(Cf);var t=typeof e=="function"?e():e,n=t?"".concat(Cf,": ").concat(t):Cf;throw new Error(n)}}var UP=be.env.NODE_ENV!=="production",v1=function(){};if(UP){var HP=function(i,e){var t=arguments.length;e=new Array(t>1?t-1:0);for(var n=1;n<t;n++)e[n-1]=arguments[n];var s=0,r="Warning: "+i.replace(/%s/g,function(){return e[s++]});typeof console<"u"&&console.error(r);try{throw new Error(r)}catch{}};v1=function(i,e,t){var n=arguments.length;t=new Array(n>2?n-2:0);for(var s=2;s<n;s++)t[s-2]=arguments[s];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");i||HP.apply(null,[e].concat(t))}}var $P=v1;const Ct=ty($P);var H0=Object.prototype.hasOwnProperty;function $0(i,e,t){for(t of i.keys())if(wa(t,e))return t}function wa(i,e){var t,n,s;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&wa(i[n],e[n]););return n===-1}if(t===Set){if(i.size!==e.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=$0(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(i.size!==e.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=$0(e,s),!s)||!wa(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(t===DataView){if((n=i.byteLength)===e.byteLength)for(;n--&&i.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===e.byteLength)for(;n--&&i[n]===e[n];);return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(H0.call(i,t)&&++n&&!H0.call(e,t)||!(t in e)||!wa(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}const y1=q.createContext(null);function ba({children:i,type:e}){return W.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const zP="noopener noreferrer nofollow";class VP{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Be(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){Be(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Be(this.pdfDocument,"PDF document not loaded."),Be(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Be(Array.isArray(t),`"${t}" is not a valid destination array.`);const n=t[0];new Promise(s=>{Be(this.pdfDocument,"PDF document not loaded."),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{Be(!1,`"${n}" is not a valid page reference.`)}):typeof n=="number"?s(n):Be(!1,`"${n}" is not a valid destination reference.`)}).then(s=>{const r=s+1;Be(this.pdfViewer,"PDF viewer is not initialized."),Be(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Be(this.pdfViewer,"PDF viewer is not initialized."),Be(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||zP,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const z0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Ld=typeof document<"u",w1=Ld&&window.location.protocol==="file:";function GP(i){return typeof i<"u"}function ss(i){return GP(i)&&i!==null}function qP(i){return typeof i=="string"}function YP(i){return i instanceof ArrayBuffer}function KP(i){return Be(Ld,"isBlob can only be used in a browser environment"),i instanceof Blob}function Sm(i){return qP(i)&&/^data:/.test(i)}function V0(i){Be(Sm(i),"Invalid data URI.");const[e="",t=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function XP(){return Ld&&window.devicePixelRatio||1}const b1="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function G0(){Ct(!w1,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${b1}`)}function QP(){Ct(!w1,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${b1}`)}function Xs(i){i&&i.cancel&&i.cancel()}function km(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function ZP(i){return i.name==="RenderingCancelledException"}function JP(i){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function eL(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function Ca(){return q.useReducer(eL,{value:void 0,error:void 0})}var tL=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function l(c){try{u(n.next(c))}catch(f){a(f)}}function h(c){try{u(n.throw(c))}catch(f){a(f)}}function u(c){c.done?r(c.value):s(c.value).then(l,h)}u((n=n.apply(i,[])).next())})},q0=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const{PDFDataRangeTransport:iL}=bP,nL=(i,e)=>{switch(e){case z0.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");i(t);break}case z0.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");i(t);break}}};function Y0(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const sL=q.forwardRef(function(i,e){var{children:t,className:n,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:a,file:l,inputRef:h,imageResourcesPath:u,loading:c="Loading PDFâ¦",noData:f="No PDF file specified.",onItemClick:g,onLoadError:y,onLoadProgress:A,onLoadSuccess:E,onPassword:S=nL,onSourceError:k,onSourceSuccess:R,options:P,renderMode:N,rotate:F}=i,j=q0(i,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[L,w]=Ca(),{value:b,error:C}=L,[T,D]=Ca(),{value:B,error:K}=T,ie=q.useRef(new VP),V=q.useRef([]),O=q.useRef(void 0),re=q.useRef(void 0);l&&l!==O.current&&Y0(l)&&(Ct(!wa(l,O.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),O.current=l),P&&P!==re.current&&(Ct(!wa(P,re.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),re.current=P);const H=q.useRef({scrollPageIntoView:ne=>{const{dest:Y,pageNumber:ve,pageIndex:oe=ve-1}=ne;if(g){g({dest:Y,pageIndex:oe,pageNumber:ve});return}const ye=V.current[oe];if(ye){ye.scrollIntoView();return}Ct(!1,`An internal link leading to page ${ve} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});q.useImperativeHandle(e,()=>({linkService:ie,pages:V,viewer:H}),[]);function pe(){R&&R()}function J(){C&&(Ct(!1,C.toString()),k&&k(C))}function U(){w({type:"RESET"})}q.useEffect(U,[l,w]);const z=q.useCallback(()=>tL(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return Sm(l)?{data:V0(l)}:(G0(),{url:l});if(l instanceof iL)return{range:l};if(YP(l))return{data:l};if(Ld&&KP(l))return{data:yield JP(l)};if(Be(typeof l=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),Be(Y0(l),"Invalid parameter object: need either .data, .range or .url"),"url"in l&&typeof l.url=="string"){if(Sm(l.url)){const{url:ne}=l,Y=q0(l,["url"]),ve=V0(ne);return Object.assign({data:ve},Y)}G0()}return l}),[l]);q.useEffect(()=>{const ne=Cl(z());return ne.promise.then(Y=>{w({type:"RESOLVE",value:Y})}).catch(Y=>{w({type:"REJECT",error:Y})}),()=>{Xs(ne)}},[z,w]),q.useEffect(()=>{if(!(typeof b>"u")){if(b===!1){J();return}pe()}},[b]);function te(){B&&(E&&E(B),V.current=new Array(B.numPages),ie.current.setDocument(B))}function ee(){K&&(Ct(!1,K.toString()),y&&y(K))}function le(){D({type:"RESET"})}q.useEffect(le,[D,b]);function ae(){if(!b)return;const ne=Object.assign(Object.assign({},b),P),Y=f1(ne);A&&(Y.onProgress=A),S&&(Y.onPassword=S);const ve=Y;return ve.promise.then(oe=>{D({type:"RESOLVE",value:oe})}).catch(oe=>{ve.destroyed||D({type:"REJECT",error:oe})}),()=>{ve.destroy()}}q.useEffect(ae,[P,D,b]),q.useEffect(()=>{if(!(typeof B>"u")){if(B===!1){ee();return}te()}},[B]);function se(){ie.current.setViewer(H.current),ie.current.setExternalLinkRel(r),ie.current.setExternalLinkTarget(a)}q.useEffect(se,[r,a]);function G(ne,Y){V.current[ne]=Y}function Z(ne){delete V.current[ne]}const X=q.useMemo(()=>({imageResourcesPath:u,linkService:ie.current,onItemClick:g,pdf:B,registerPage:G,renderMode:N,rotate:F,unregisterPage:Z}),[u,g,B,N,F]),ce=q.useMemo(()=>g1(j,()=>B),[j,B]);function he(){return W.jsx(y1.Provider,{value:X,children:t})}function ue(){return l?B==null?W.jsx(ba,{type:"loading",children:typeof c=="function"?c():c}):B===!1?W.jsx(ba,{type:"error",children:typeof s=="function"?s():s}):he():W.jsx(ba,{type:"no-data",children:typeof f=="function"?f():f})}return W.jsx("div",Object.assign({className:Pd("react-pdf__Document",n),ref:h,style:{"--scale-factor":"1"}},ce,{children:ue()}))});function A1(){return q.useContext(y1)}function _1(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=i.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(s){t.forEach(function(r){typeof r=="function"?r(s):r&&(r.current=s)})}}const x1=q.createContext(null),E1={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},rL=/^H(\d+)$/;function aL(i){return i in E1}function Id(i){return"children"in i}function S1(i){return Id(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function oL(i){const e={};if(Id(i)){const{role:t}=i,n=t.match(rL);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(aL(t)){const s=E1[t];s&&(e.role=s)}}return e}function k1(i){const e={};if(Id(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),S1(i)){const[t]=i.children;if(t){const n=k1(t);return Object.assign(Object.assign({},e),n)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function lL(i){return i?Object.assign(Object.assign({},oL(i)),k1(i)):null}function C1({className:i,node:e}){const t=q.useMemo(()=>lL(e),[e]),n=q.useMemo(()=>!Id(e)||S1(e)?null:e.children.map((s,r)=>W.jsx(C1,{node:s},r)),[e]);return W.jsx("span",Object.assign({className:i},t,{children:n}))}function Dd(){return q.useContext(x1)}function hL(){const i=Dd();Be(i,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=i,[n,s]=Ca(),{value:r,error:a}=n,{customTextRenderer:l,page:h}=i;function u(){r&&t&&t(r)}function c(){a&&(Ct(!1,a.toString()),e&&e(a))}function f(){s({type:"RESET"})}q.useEffect(f,[s,h]);function g(){if(l||!h)return;const y=Cl(h.getStructTree()),A=y;return y.promise.then(E=>{s({type:"RESOLVE",value:E})}).catch(E=>{s({type:"REJECT",error:E})}),()=>Xs(A)}return q.useEffect(g,[l,h,s]),q.useEffect(()=>{if(r!==void 0){if(r===!1){c();return}u()}},[r]),r?W.jsx(C1,{className:"react-pdf__Page__structTree structTree",node:r}):null}const K0=u1;function cL(i){const e=Dd();Be(e,"Unable to find Page context.");const t=Object.assign(Object.assign({},e),i),{_className:n,canvasBackground:s,devicePixelRatio:r=XP(),onRenderError:a,onRenderSuccess:l,page:h,renderForms:u,renderTextLayer:c,rotate:f,scale:g}=t,{canvasRef:y}=i;Be(h,"Attempted to render page canvas, but no page was specified.");const A=q.useRef(null);function E(){h&&l&&l(km(h,g))}function S(F){ZP(F)||(Ct(!1,F.toString()),a&&a(F))}const k=q.useMemo(()=>h.getViewport({scale:g*r,rotation:f}),[r,h,f,g]),R=q.useMemo(()=>h.getViewport({scale:g,rotation:f}),[h,f,g]);function P(){if(!h)return;h.cleanup();const{current:F}=A;if(!F)return;F.width=k.width,F.height=k.height,F.style.width=`${Math.floor(R.width)}px`,F.style.height=`${Math.floor(R.height)}px`,F.style.visibility="hidden";const j={annotationMode:u?K0.ENABLE_FORMS:K0.ENABLE,canvasContext:F.getContext("2d",{alpha:!1}),viewport:k};s&&(j.background=s);const L=h.render(j),w=L;return L.promise.then(()=>{F.style.visibility="",E()}).catch(S),()=>Xs(w)}q.useEffect(P,[s,A,r,h,u,k,R]);const N=q.useCallback(()=>{const{current:F}=A;F&&(F.width=0,F.height=0)},[A]);return q.useEffect(()=>N,[N]),W.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:_1(y,A),style:{display:"block",userSelect:"none"},children:c?W.jsx(hL,{}):null})}function uL(i){return"str"in i}function dL(){const i=Dd();Be(i,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:l,pageNumber:h,rotate:u,scale:c}=i;Be(a,"Attempted to load page text content, but no page was specified.");const[f,g]=Ca(),{value:y,error:A}=f,E=q.useRef(null),S=q.useRef(void 0);Ct(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function k(){y&&n&&n(y)}function R(){A&&(Ct(!1,A.toString()),t&&t(A))}function P(){g({type:"RESET"})}q.useEffect(P,[a,g]);function N(){if(!a)return;const T=Cl(a.getTextContent()),D=T;return T.promise.then(B=>{g({type:"RESOLVE",value:B})}).catch(B=>{g({type:"REJECT",error:B})}),()=>Xs(D)}q.useEffect(N,[a,g]),q.useEffect(()=>{if(y!==void 0){if(y===!1){R();return}k()}},[y]);const F=q.useCallback(()=>{r&&r()},[r]),j=q.useCallback(T=>{Ct(!1,T.toString()),s&&s(T)},[s]);function L(){const T=S.current;T&&T.classList.add("active")}function w(){const T=S.current;T&&T.classList.remove("active")}const b=q.useMemo(()=>a.getViewport({scale:c,rotation:u}),[a,u,c]);function C(){if(!a||!y)return;const{current:T}=E;if(!T)return;T.innerHTML="";const D=a.streamTextContent({includeMarkedContent:!0}),B={container:T,textContentSource:D,viewport:b},K=new d1(B),ie=K;return K.render().then(()=>{const V=document.createElement("div");V.className="endOfContent",T.append(V),S.current=V;const O=T.querySelectorAll('[role="presentation"]');if(e){let re=0;y.items.forEach((H,pe)=>{if(!uL(H))return;const J=O[re];if(!J)return;const U=e(Object.assign({pageIndex:l,pageNumber:h,itemIndex:pe},H));J.innerHTML=U,re+=H.str&&H.hasEOL?2:1})}F()}).catch(j),()=>Xs(ie)}return q.useLayoutEffect(C,[e,j,F,a,l,h,y,b]),W.jsx("div",{className:Pd("react-pdf__Page__textContent","textLayer"),onMouseUp:w,onMouseDown:L,ref:E})}function fL(){const i=A1(),e=Dd();Be(e,"Unable to find Page context.");const t=Object.assign(Object.assign({},i),e),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:h,page:u,pdf:c,renderForms:f,rotate:g,scale:y=1}=t;Be(c,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),Be(u,"Attempted to load page annotations, but no page was specified."),Be(s,"Attempted to load page annotations, but no linkService was specified.");const[A,E]=Ca(),{value:S,error:k}=A,R=q.useRef(null);Ct(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function P(){S&&a&&a(S)}function N(){k&&(Ct(!1,k.toString()),r&&r(k))}function F(){E({type:"RESET"})}q.useEffect(F,[E,u]);function j(){if(!u)return;const T=Cl(u.getAnnotations()),D=T;return T.promise.then(B=>{E({type:"RESOLVE",value:B})}).catch(B=>{E({type:"REJECT",error:B})}),()=>{Xs(D)}}q.useEffect(j,[E,u,f]),q.useEffect(()=>{if(S!==void 0){if(S===!1){N();return}P()}},[S]);function L(){h&&h()}function w(T){Ct(!1,`${T}`),l&&l(T)}const b=q.useMemo(()=>u.getViewport({scale:y,rotation:g}),[u,g,y]);function C(){if(!c||!u||!s||!S)return;const{current:T}=R;if(!T)return;const D=b.clone({dontFlip:!0}),B={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:T,l10n:null,page:u,viewport:D},K={annotations:S,annotationStorage:c.annotationStorage,div:T,imageResourcesPath:n,linkService:s,page:u,renderForms:f,viewport:D};T.innerHTML="";try{new c1(B).render(K),L()}catch(ie){w(ie)}return()=>{}}return q.useEffect(C,[S,n,s,u,f,b]),W.jsx("div",{className:Pd("react-pdf__Page__annotations","annotationLayer"),ref:R})}var pL=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const X0=1;function gL(i){const e=A1(),t=Object.assign(Object.assign({},e),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:a,children:l,className:h,customRenderer:u,customTextRenderer:c,devicePixelRatio:f,error:g="Failed to load the page.",height:y,inputRef:A,loading:E="Loading pageâ¦",noData:S="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:R,onGetStructTreeError:P,onGetStructTreeSuccess:N,onGetTextError:F,onGetTextSuccess:j,onLoadError:L,onLoadSuccess:w,onRenderAnnotationLayerError:b,onRenderAnnotationLayerSuccess:C,onRenderError:T,onRenderSuccess:D,onRenderTextLayerError:B,onRenderTextLayerSuccess:K,pageIndex:ie,pageNumber:V,pdf:O,registerPage:re,renderAnnotationLayer:H=!0,renderForms:pe=!1,renderMode:J="canvas",renderTextLayer:U=!0,rotate:z,scale:te=X0,unregisterPage:ee,width:le}=t,ae=pL(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[se,G]=Ca(),{value:Z,error:X}=se,ce=q.useRef(null);Be(O,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const he=ss(V)?V-1:ie??null,ue=V??(ss(ie)?ie+1:null),ne=z??(Z?Z.rotate:null),Y=q.useMemo(()=>{if(!Z)return null;let d=1;const p=te??X0;if(le||y){const v=Z.getViewport({scale:1,rotation:ne});le?d=le/v.width:y&&(d=y/v.height)}return p*d},[y,Z,ne,te,le]);function ve(){return()=>{ss(he)&&s&&ee&&ee(he)}}q.useEffect(ve,[s,O,he,ee]);function oe(){if(w){if(!Z||!Y)return;w(km(Z,Y))}if(s&&re){if(!ss(he)||!ce.current)return;re(he,ce.current)}}function ye(){X&&(Ct(!1,X.toString()),L&&L(X))}function je(){G({type:"RESET"})}q.useEffect(je,[G,O,he]);function De(){if(!O||!ue)return;const d=Cl(O.getPage(ue)),p=d;return d.promise.then(v=>{G({type:"RESOLVE",value:v})}).catch(v=>{G({type:"REJECT",error:v})}),()=>Xs(p)}q.useEffect(De,[G,O,he,ue,re]),q.useEffect(()=>{if(Z!==void 0){if(Z===!1){ye();return}oe()}},[Z,Y]);const _e=q.useMemo(()=>Z&&ss(he)&&ue&&ss(ne)&&ss(Y)?{_className:n,canvasBackground:r,customTextRenderer:c,devicePixelRatio:f,onGetAnnotationsError:k,onGetAnnotationsSuccess:R,onGetStructTreeError:P,onGetStructTreeSuccess:N,onGetTextError:F,onGetTextSuccess:j,onRenderAnnotationLayerError:b,onRenderAnnotationLayerSuccess:C,onRenderError:T,onRenderSuccess:D,onRenderTextLayerError:B,onRenderTextLayerSuccess:K,page:Z,pageIndex:he,pageNumber:ue,renderForms:pe,renderTextLayer:U,rotate:ne,scale:Y}:null,[n,r,c,f,k,R,P,N,F,j,b,C,T,D,B,K,Z,he,ue,pe,U,ne,Y]),Ce=q.useMemo(()=>g1(ae,()=>Z&&(Y?km(Z,Y):void 0)),[ae,Z,Y]),Ee=`${he}@${Y}/${ne}`;function fe(){switch(J){case"custom":return Be(u,'renderMode was set to "custom", but no customRenderer was passed.'),W.jsx(u,{},`${Ee}_custom`);case"none":return null;case"canvas":default:return W.jsx(cL,{canvasRef:a},`${Ee}_canvas`)}}function Re(){return U?W.jsx(dL,{},`${Ee}_text`):null}function Le(){return H?W.jsx(fL,{},`${Ee}_annotations`):null}function Oe(){return W.jsxs(x1.Provider,{value:_e,children:[fe(),Re(),Le(),l]})}function gt(){return ue?O===null||Z===void 0||Z===null?W.jsx(ba,{type:"loading",children:typeof E=="function"?E():E}):O===!1||Z===!1?W.jsx(ba,{type:"error",children:typeof g=="function"?g():g}):Oe():W.jsx(ba,{type:"no-data",children:typeof S=="function"?S():S})}return W.jsx("div",Object.assign({className:Pd(n,h),"data-page-number":ue,ref:_1(A,ce),style:{"--scale-factor":`${Y}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Ce,{children:gt()}))}QP();sv.workerSrc="pdf.worker.mjs";const R1="SET_ZOOM_LEVEL",Rf=i=>({type:R1,value:i}),M1="SET_PDF_PAGINATED",mL=i=>({type:M1,value:i}),T1="SET_NUM_PAGES",Q0=i=>({type:T1,value:i}),P1="SET_CURRENT_PAGE",L1="SET_CURRENT_MAIN_STATE",Z0=i=>({type:P1,value:i}),Gn={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1},vL=(i=Gn,e)=>{switch(e.type){case R1:{const{value:t}=e;return{...i,zoomLevel:t}}case M1:{const{value:t}=e;return{...i,paginated:t}}case T1:{const{value:t}=e;return{...i,numPages:t}}case P1:{const{value:t}=e;return{...i,currentPage:t}}case L1:{const{value:t}=e;return{...i,mainState:t}}default:return i}},Ta=q.createContext({state:Gn,dispatch:()=>null}),yL=({children:i,mainState:e})=>{var t,n,s,r,a,l,h;const[u,c]=q.useReducer(vL,{...Gn,defaultZoomLevel:((n=(t=e.config)==null?void 0:t.pdfZoom)==null?void 0:n.defaultZoom)??Gn.defaultZoomLevel,zoomLevel:((r=(s=e.config)==null?void 0:s.pdfZoom)==null?void 0:r.defaultZoom)??Gn.zoomLevel,zoomJump:((l=(a=e.config)==null?void 0:a.pdfZoom)==null?void 0:l.zoomJump)??Gn.zoomJump,paginated:(h=e.config)!=null&&h.pdfVerticalScrollByDefault?!1:Gn.paginated,mainState:e});return q.useEffect(()=>{c({type:L1,value:e})},[e]),W.jsx(Ta.Provider,{value:{state:u,dispatch:c},children:i})},I1=({pageNum:i})=>{const{state:{mainState:e,paginated:t,zoomLevel:n,numPages:s,currentPage:r}}=q.useContext(Ta),{t:a}=Js(),l=(e==null?void 0:e.rendererRect)||null,h=i??r;return W.jsxs(wL,{id:"pdf-page-wrapper",$lastPage:h>=s,children:[!t&&W.jsx(bL,{id:"pdf-page-info",children:a("pdfPluginPageNumber",{currentPage:h,allPagesCount:s})}),W.jsx(gL,{pageNumber:h||r,scale:n,height:((l==null?void 0:l.height)??100)-100,width:((l==null?void 0:l.width)??100)-100,loading:a("pdfPluginLoading")})]})},wL=ke.div`
  margin: ${i=>i.$lastPage?"20px 0":void 0};
`,bL=ke.div`
  padding: 0 0 10px 10px;
  color: ${i=>i.theme.textTertiary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,AL=()=>{const{state:{numPages:i}}=q.useContext(Ta),e=[];for(let t=0;t<i;t++)e.push(W.jsx(I1,{pageNum:t+1},t+1));return W.jsx(W.Fragment,{children:e})},_L=()=>{const{state:{mainState:i,paginated:e},dispatch:t}=q.useContext(Ta),{t:n}=Js(),s=(i==null?void 0:i.currentDocument)||null;return q.useEffect(()=>{t(Q0(Gn.numPages))},[s]),!s||s.fileData===void 0?null:W.jsx(xL,{file:s.fileData,onLoadSuccess:({numPages:r})=>t(Q0(r)),loading:W.jsx("span",{children:n("pdfPluginLoading")}),children:e?W.jsx(I1,{}):W.jsx(AL,{})})},xL=ke(sL)`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`,EL=i=>W.jsx(D1,{...i,reverse:!0}),SL=i=>W.jsx(D1,{...i}),D1=i=>{const{color:e,size:t,reverse:n}=i;return W.jsx("svg",{width:t||"100%",height:t||"100%",style:{transform:`${n?"rotate(180deg)":""}`},viewBox:"0 0 12 12",version:"1.1",children:W.jsx("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:W.jsx("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)",children:W.jsx("g",{id:"AV",transform:"translate(100.000000, 852.000000)",children:W.jsx("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)",children:W.jsxs("g",{children:[W.jsx("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),W.jsx("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:e||"#aaa"})]})})})})})})},kL=i=>{const{color:e,size:t,reverse:n}=i;return W.jsxs("svg",{width:t||"100%",height:t||"100%",style:{transform:`${n?"rotate(180deg)":""}`},id:"Layer_1",viewBox:"0 0 24 24",children:[W.jsx("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:e||"#aaa"}),W.jsx("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:e||"#aaa"})]})},CL=i=>W.jsx(O1,{...i}),RL=i=>W.jsx(O1,{...i,reverse:!0}),O1=i=>{const{color:e,size:t,reverse:n}=i;return W.jsx("svg",{width:t||"100%",height:t||"100%",viewBox:"0 0 32 32",version:"1.1",children:W.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:W.jsx("g",{id:"search-plus-icon",fill:e||"#aaa",children:W.jsx("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"})})})})},ML=i=>{const{color:e,size:t}=i;return W.jsx("svg",{width:t||"100%",height:t||"100%",viewBox:"0 0 24 24",children:W.jsx("path",{fill:e||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"})})},TL=i=>{const{color:e,size:t,reverse:n}=i;return W.jsx("svg",{width:t||"100%",height:t||"100%",style:{transform:`${n?"rotate(90deg)":""}`},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve",children:W.jsx("path",{fill:e||"#aaa",d:`M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574
  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98
  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28
  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852
  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z`})})},PL=()=>{const{state:{currentPage:i,numPages:e},dispatch:t}=q.useContext(Ta),{t:n}=Js();return W.jsxs(LL,{id:"pdf-pagination",children:[W.jsx(N1,{id:"pdf-pagination-prev",onClick:()=>t(Z0(i-1)),disabled:i===1,children:W.jsx(EL,{color:"#000",size:"50%"})}),W.jsx(DL,{id:"pdf-pagination-info",children:n("pdfPluginPageNumber",{currentPage:i,allPagesCount:e})}),W.jsx(IL,{id:"pdf-pagination-next",onClick:()=>t(Z0(i+1)),disabled:i>=e,children:W.jsx(SL,{color:"#000",size:"50%"})})]})},LL=ke.div`
  display: flex;
  align-items: center;
`,N1=ke(md)`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,IL=ke(N1)`
  margin: 0 20px 0 5px;
`,DL=ke.div`
  color: ${i=>i.theme.textPrimary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,OL=()=>{const{t:i}=Js(),{state:{mainState:e,paginated:t,zoomLevel:n,numPages:s,zoomJump:r,defaultZoomLevel:a},dispatch:l}=q.useContext(Ta),h=(e==null?void 0:e.currentDocument)||null;return W.jsxs(NL,{id:"pdf-controls",children:[t&&s>1&&W.jsx(PL,{}),(h==null?void 0:h.fileData)&&W.jsx(FL,{id:"pdf-download",href:h==null?void 0:h.fileData,download:(h==null?void 0:h.fileName)||(h==null?void 0:h.uri),title:i("downloadButtonLabel"),children:W.jsx(kL,{color:"#000",size:"75%"})}),W.jsx(sh,{id:"pdf-zoom-out",onMouseDown:()=>l(Rf(n-r)),children:W.jsx(RL,{color:"#000",size:"80%"})}),W.jsx(sh,{id:"pdf-zoom-in",onMouseDown:()=>l(Rf(n+r)),children:W.jsx(CL,{color:"#000",size:"80%"})}),W.jsx(sh,{id:"pdf-zoom-reset",onMouseDown:()=>l(Rf(a)),disabled:n===a,children:W.jsx(ML,{color:"#000",size:"70%"})}),s>1&&W.jsx(sh,{id:"pdf-toggle-pagination",onMouseDown:()=>l(mL(!t)),children:W.jsx(TL,{color:"#000",size:"70%",reverse:t})})]})},NL=ke.div`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: ${i=>i.theme.tertiary};
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`,sh=ke(md)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,FL=ke(gw)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`;sv.workerSrc=new URL(`https://unpkg.com/pdfjs-dist@${p1}/build/pdf.worker.min.mjs`).toString();const rv=({mainState:i})=>W.jsx(yL,{mainState:i,children:W.jsxs(jL,{id:"pdf-renderer","data-testid":"pdf-renderer",children:[W.jsx(OL,{}),W.jsx(_L,{})]})});rv.fileTypes=["pdf","application/pdf"];rv.weight=0;const jL=ke.div`
  display: flex;
  flex-direction: column;
  flex: 1;

  /* width */
  &::-webkit-scrollbar {
    ${i=>i.theme.disableThemeScrollbar?"":"width: 10px"};
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: ${i=>i.theme.secondary}; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: ${i=>i.theme.tertiary};
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: ${i=>i.theme.primary};
  }
`,WL=ke(fn)`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position:
    0 0,
    0 10px,
    10px -10px,
    -10px 0px;
`,av=i=>W.jsx(WL,{...i});av.fileTypes=["png","image/png"];av.weight=0;let un,qt,ad=[];const BL=()=>{var i=Ut(2,0);if(i===18761)qt=!0;else if(i===19789)qt=!1;else throw TypeError("Invalid byte order value.");return qt},UL=()=>{if(Ut(2,2)!==42)throw RangeError("You forgot your towel!");return!0},HL=i=>{var e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},t;return i in e?t=e[i]:t="Tag"+i,t},$L=i=>{var e={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"},t;return i in e&&(t=e[i]),t},zL=i=>{var e;return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(i)!==-1?e=1:["SHORT","SSHORT"].indexOf(i)!==-1?e=2:["LONG","SLONG","FLOAT"].indexOf(i)!==-1?e=4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(i)!==-1&&(e=8),e},VL=(i,e,t)=>{t=t||0;var n=Math.floor(t/8),s=e+n,r=t+i,a=32-i;if(r<=0)throw RangeError("No bits requested");if(r<=8)var l=24+t,h=un.getUint8(s,qt);else if(r<=16)var l=16+t,h=un.getUint16(s,qt);else if(r<=32)var l=t,h=un.getUint32(s,qt);else throw RangeError("Too many bits requested");var u={bits:h<<l>>>a,byteOffset:s+Math.floor(r/8),bitOffset:r%8};return u},Ut=(i,e)=>{if(i<=0)throw RangeError("No bytes requested");if(i<=1)return un.getUint8(e,qt);if(i<=2)return un.getUint16(e,qt);if(i<=3)return un.getUint32(e,qt)>>>8;if(i<=4)return un.getUint32(e,qt);throw RangeError("Too many bytes requested")},GL=(i,e,t,n)=>{var s=[],r=zL(e),a=r*t;if(a<=4){if(qt===!1)var l=n>>>(4-r)*8;else var l=n;s.push(l)}else for(var h=0;h<t;h++){var u=r*h;if(r>=8)if(["RATIONAL","SRATIONAL"].indexOf(e)!==-1)s.push(Ut(4,n+u)),s.push(Ut(4,n+u+4));else throw TypeError("Can't handle this field type or size");else s.push(Ut(r,n+u))}return e==="ASCII"&&s.forEach(function(c,f,g){g[f]=String.fromCharCode(c)}),s},rs=(i,e)=>{var t=Math.pow(2,8-e);return Math.floor(i*t+(t-1))},J0=(i,e,t,n)=>(typeof n>"u"&&(n=1),"rgba("+i+", "+e+", "+t+", "+n+")"),F1=i=>{for(var e=Ut(2,i),t=[],n=i+2,s=0;s<e;n+=12,s++){var r=Ut(2,n),a=Ut(2,n+2),l=Ut(4,n+4),h=Ut(4,n+8),u=HL(r),c=$L(a),f=GL(u,c,l,h);t[u]={type:c,values:f}}ad.push(t);var g=Ut(4,n);return g===0?ad:F1(g)},qL=(i,e)=>{let t=e||document.createElement("canvas");if(i&&(un=new DataView(i),qt=BL(),!!UL())){var n=Ut(4,4);ad=F1(n);var s=ad[0],r=s.ImageWidth.values[0],a=s.ImageLength.values[0];t.width=r,t.height=a;var l=[],h=s.Compression?s.Compression.values[0]:1,u=s.SamplesPerPixel.values[0],c=[],f=0,g=!1;if(s.BitsPerSample.values.forEach(function(Ee,fe,Re){c[fe]={bitsPerSample:Ee,hasBytesPerSample:!1,bytesPerSample:void 0},Ee%8===0&&(c[fe].hasBytesPerSample=!0,c[fe].bytesPerSample=Ee/8),f+=Ee},void 0),f%8===0){g=!0;var y=f/8}var A=s.StripOffsets.values,E=A.length;if(s.StripByteCounts)var S=s.StripByteCounts.values;else if(E===1)var S=[Math.ceil(r*a*f/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var k=0;k<E;k++){var R=A[k];l[k]=[];for(var P=S[k],N=0,F=0,j=1,L=!0,w=[],b=0,C=0,T=0;N<P;N+=j)switch(h){case 1:for(var D=0,w=[];D<u;D++)if(c[D].hasBytesPerSample){var B=c[D].bytesPerSample*D;w.push(Ut(c[D].bytesPerSample,R+N+B))}else{var K=VL(c[D].bitsPerSample,R+N,F);throw w.push(K.bits),N=K.byteOffset-R,F=K.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(l[k].push(w),g)j=y;else throw j=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(L){L=!1;var ie=1,V=1,O=un.getInt8(R+N,qt);O>=0&&O<=127?ie=O+1:O>=-127&&O<=-1?V=-O+1:L=!0}else{for(var re=Ut(1,R+N),D=0;D<V;D++){if(c[C].hasBytesPerSample)T=T<<8*b|re,b++,b===c[C].bytesPerSample&&(w.push(T),T=b=0,C++);else throw RangeError("Cannot handle sub-byte bits per sample");C===u&&(l[k].push(w),w=[],C=0)}ie--,ie===0&&(L=!0)}j=1;break}}if(t.getContext){var H=t.getContext("2d");if(H.fillStyle=J0(255,255,255,0),s.RowsPerStrip)var pe=s.RowsPerStrip.values[0];else var pe=a;var J=l.length,U=a%pe,z=U===0?pe:U,te=pe,ee=0,le=s.PhotometricInterpretation.values[0],ae=[],se=0;if(s.ExtraSamples&&(ae=s.ExtraSamples.values,se=ae.length),s.ColorMap)var G=s.ColorMap.values,Z=Math.pow(2,c[0].bitsPerSample);for(var k=0;k<J;k++){k+1===J&&(te=z);for(var X=l[k].length,ce=ee*k,he=0,ue=0;ue<X;he++)for(var ne=0;ne<r;ne++,ue++){var Y=l[k][ue],ve=0,oe=0,ye=0,je=1;if(se>0){for(var De=0;De<se;De++)if(ae[De]===1||ae[De]===2){je=Y[3+De]/256;break}}switch(le){case 0:if(c[0].hasBytesPerSample)var _e=Math.pow(16,c[0].bytesPerSample*2);Y.forEach(function(fe,Re,Le){Le[Re]=_e-fe});case 1:ve=oe=ye=rs(Y[0],c[0].bitsPerSample);break;case 2:ve=rs(Y[0],c[0].bitsPerSample),oe=rs(Y[1],c[1].bitsPerSample),ye=rs(Y[2],c[2].bitsPerSample);break;case 3:if(G===void 0)throw Error("Palette image missing color map");var Ce=Y[0];ve=rs(G[Ce],16),oe=rs(G[Z+Ce],16),ye=rs(G[2*Z+Ce],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",le)}H.fillStyle=J0(ve,oe,ye,je),H.fillRect(ne,ce+he,1,1)}ee=te}}return t}},Od=i=>{const{mainState:{currentDocument:e}}=i,{t}=Js(),[n,s]=q.useState(!1),[r,a]=q.useState(!1);return q.useEffect(()=>{if(!e||n)return;const l=document.getElementById("tiff-img");try{l&&qL(e.fileData,l),s(!0)}catch{a(!0)}},[e,n]),r?W.jsx(fn,{...i,children:W.jsx("div",{children:t("brokenFile")})}):W.jsx(fn,{...i,children:W.jsx(YL,{id:"tiff-img"})})};Od.fileTypes=["tif","tiff","image/tif","image/tiff"];Od.weight=0;Od.fileLoader=DR;const YL=ke.canvas`
  max-width: 95%;
  max-height: 95%;
`,Nd=({mainState:{currentDocument:i}})=>W.jsx(KL,{id:"txt-renderer",children:i==null?void 0:i.fileData});Nd.fileTypes=["txt","text/plain"];Nd.weight=0;Nd.fileLoader=bw;const KL=ke.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`;var j1={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,e){(function(t,n){i.exports=n()})(Ga,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s=!n.document&&!!n.postMessage,r=n.IS_PAPA_WORKER||!1,a={},l=0,h={parse:function(w,b){var C=(b=b||{}).dynamicTyping||!1;if(L(C)&&(b.dynamicTypingFunction=C,C={}),b.dynamicTyping=C,b.transform=!!L(b.transform)&&b.transform,b.worker&&h.WORKERS_SUPPORTED){var T=function(){if(!h.WORKERS_SUPPORTED)return!1;var B=(ie=n.URL||n.webkitURL||null,V=t.toString(),h.BLOB_URL||(h.BLOB_URL=ie.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",V,")();"],{type:"text/javascript"})))),K=new n.Worker(B),ie,V;return K.onmessage=R,K.id=l++,a[K.id]=K}();return T.userStep=b.step,T.userChunk=b.chunk,T.userComplete=b.complete,T.userError=b.error,b.step=L(b.step),b.chunk=L(b.chunk),b.complete=L(b.complete),b.error=L(b.error),delete b.worker,void T.postMessage({input:w,config:b,workerId:T.id})}var D=null;return h.NODE_STREAM_INPUT,typeof w=="string"?(w=function(B){return B.charCodeAt(0)===65279?B.slice(1):B}(w),D=b.download?new f(b):new y(b)):w.readable===!0&&L(w.read)&&L(w.on)?D=new A(b):(n.File&&w instanceof File||w instanceof Object)&&(D=new g(b)),D.stream(w)},unparse:function(w,b){var C=!1,T=!0,D=",",B=`\r
`,K='"',ie=K+K,V=!1,O=null,re=!1;(function(){if(typeof b=="object"){if(typeof b.delimiter!="string"||h.BAD_DELIMITERS.filter(function(U){return b.delimiter.indexOf(U)!==-1}).length||(D=b.delimiter),(typeof b.quotes=="boolean"||typeof b.quotes=="function"||Array.isArray(b.quotes))&&(C=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(V=b.skipEmptyLines),typeof b.newline=="string"&&(B=b.newline),typeof b.quoteChar=="string"&&(K=b.quoteChar),typeof b.header=="boolean"&&(T=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");O=b.columns}b.escapeChar!==void 0&&(ie=b.escapeChar+K),(typeof b.escapeFormulae=="boolean"||b.escapeFormulae instanceof RegExp)&&(re=b.escapeFormulae instanceof RegExp?b.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var H=new RegExp(S(K),"g");if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return pe(null,w,V);if(typeof w[0]=="object")return pe(O||Object.keys(w[0]),w,V)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||O),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),pe(w.fields||[],w.data||[],V);throw new Error("Unable to serialize unrecognized input");function pe(U,z,te){var ee="";typeof U=="string"&&(U=JSON.parse(U)),typeof z=="string"&&(z=JSON.parse(z));var le=Array.isArray(U)&&0<U.length,ae=!Array.isArray(z[0]);if(le&&T){for(var se=0;se<U.length;se++)0<se&&(ee+=D),ee+=J(U[se],se);0<z.length&&(ee+=B)}for(var G=0;G<z.length;G++){var Z=le?U.length:z[G].length,X=!1,ce=le?Object.keys(z[G]).length===0:z[G].length===0;if(te&&!le&&(X=te==="greedy"?z[G].join("").trim()==="":z[G].length===1&&z[G][0].length===0),te==="greedy"&&le){for(var he=[],ue=0;ue<Z;ue++){var ne=ae?U[ue]:ue;he.push(z[G][ne])}X=he.join("").trim()===""}if(!X){for(var Y=0;Y<Z;Y++){0<Y&&!ce&&(ee+=D);var ve=le&&ae?U[Y]:Y;ee+=J(z[G][ve],Y)}G<z.length-1&&(!te||0<Z&&!ce)&&(ee+=B)}}return ee}function J(U,z){if(U==null)return"";if(U.constructor===Date)return JSON.stringify(U).slice(1,25);var te=!1;re&&typeof U=="string"&&re.test(U)&&(U="'"+U,te=!0);var ee=U.toString().replace(H,ie);return(te=te||C===!0||typeof C=="function"&&C(U,z)||Array.isArray(C)&&C[z]||function(le,ae){for(var se=0;se<ae.length;se++)if(-1<le.indexOf(ae[se]))return!0;return!1}(ee,h.BAD_DELIMITERS)||-1<ee.indexOf(D)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?K+ee+K:ee}}};if(h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!s&&!!n.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=k,h.ParserHandle=E,h.NetworkStreamer=f,h.FileStreamer=g,h.StringStreamer=y,h.ReadableStreamStreamer=A,n.jQuery){var u=n.jQuery;u.fn.parse=function(w){var b=w.config||{},C=[];return this.each(function(B){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)C.push({file:this.files[K],inputElem:this,instanceConfig:u.extend({},b)})}),T(),this;function T(){if(C.length!==0){var B,K,ie,V,O=C[0];if(L(w.before)){var re=w.before(O.file,O.inputElem);if(typeof re=="object"){if(re.action==="abort")return B="AbortError",K=O.file,ie=O.inputElem,V=re.reason,void(L(w.error)&&w.error({name:B},K,ie,V));if(re.action==="skip")return void D();typeof re.config=="object"&&(O.instanceConfig=u.extend(O.instanceConfig,re.config))}else if(re==="skip")return void D()}var H=O.instanceConfig.complete;O.instanceConfig.complete=function(pe){L(H)&&H(pe,O.file,O.inputElem),D()},h.parse(O.file,O.instanceConfig)}else L(w.complete)&&w.complete()}function D(){C.splice(0,1),T()}}}function c(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var C=F(b);C.chunkSize=parseInt(C.chunkSize),b.step||b.chunk||(C.chunkSize=null),this._handle=new E(C),(this._handle.streamer=this)._config=C}).call(this,w),this.parseChunk=function(b,C){if(this.isFirstChunk&&L(this._config.beforeFirstChunk)){var T=this._config.beforeFirstChunk(b);T!==void 0&&(b=T)}this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+b;this._partialLine="";var B=this._handle.parse(D,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var K=B.meta.cursor;this._finished||(this._partialLine=D.substring(K-this._baseIndex),this._baseIndex=K),B&&B.data&&(this._rowCount+=B.data.length);var ie=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)n.postMessage({results:B,workerId:h.WORKER_ID,finished:ie});else if(L(this._config.chunk)&&!C){if(this._config.chunk(B,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);B=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(B.data),this._completeResults.errors=this._completeResults.errors.concat(B.errors),this._completeResults.meta=B.meta),this._completed||!ie||!L(this._config.complete)||B&&B.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ie||B&&B.meta.paused||this._nextChunk(),B}this._halted=!0},this._sendError=function(b){L(this._config.error)?this._config.error(b):r&&this._config.error&&n.postMessage({workerId:h.WORKER_ID,error:b,finished:!1})}}function f(w){var b;(w=w||{}).chunkSize||(w.chunkSize=h.RemoteChunkSize),c.call(this,w),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(C){this._input=C,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),s||(b.onload=j(this._chunkLoaded,this),b.onerror=j(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var C=this._config.downloadRequestHeaders;for(var T in C)b.setRequestHeader(T,C[T])}if(this._config.chunkSize){var D=this._start+this._config.chunkSize-1;b.setRequestHeader("Range","bytes="+this._start+"-"+D)}try{b.send(this._config.downloadRequestBody)}catch(B){this._chunkError(B.message)}s&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:b.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(C){var T=C.getResponseHeader("Content-Range");return T===null?-1:parseInt(T.substring(T.lastIndexOf("/")+1))}(b),this.parseChunk(b.responseText)))},this._chunkError=function(C){var T=b.statusText||C;this._sendError(new Error(T))}}function g(w){var b,C;(w=w||{}).chunkSize||(w.chunkSize=h.LocalChunkSize),c.call(this,w);var T=typeof FileReader<"u";this.stream=function(D){this._input=D,C=D.slice||D.webkitSlice||D.mozSlice,T?((b=new FileReader).onload=j(this._chunkLoaded,this),b.onerror=j(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input;if(this._config.chunkSize){var B=Math.min(this._start+this._config.chunkSize,this._input.size);D=C.call(D,this._start,B)}var K=b.readAsText(D,this._config.encoding);T||this._chunkLoaded({target:{result:K}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(b.error)}}function y(w){var b;c.call(this,w=w||{}),this.stream=function(C){return b=C,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var C,T=this._config.chunkSize;return T?(C=b.substring(0,T),b=b.substring(T)):(C=b,b=""),this._finished=!b,this.parseChunk(C)}}}function A(w){c.call(this,w=w||{});var b=[],C=!0,T=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):C=!0},this._streamData=j(function(D){try{b.push(typeof D=="string"?D:D.toString(this._config.encoding)),C&&(C=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(B){this._streamError(B)}},this),this._streamError=j(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=j(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=j(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(w){var b,C,T,D=Math.pow(2,53),B=-D,K=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,V=this,O=0,re=0,H=!1,pe=!1,J=[],U={data:[],errors:[],meta:{}};if(L(w.step)){var z=w.step;w.step=function(G){if(U=G,le())ee();else{if(ee(),U.data.length===0)return;O+=G.data.length,w.preview&&O>w.preview?C.abort():(U.data=U.data[0],z(U,V))}}}function te(G){return w.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function ee(){return U&&T&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),T=!1),w.skipEmptyLines&&(U.data=U.data.filter(function(G){return!te(G)})),le()&&function(){if(!U)return;function G(X,ce){L(w.transformHeader)&&(X=w.transformHeader(X,ce)),J.push(X)}if(Array.isArray(U.data[0])){for(var Z=0;le()&&Z<U.data.length;Z++)U.data[Z].forEach(G);U.data.splice(0,1)}else U.data.forEach(G)}(),function(){if(!U||!w.header&&!w.dynamicTyping&&!w.transform)return U;function G(X,ce){var he,ue=w.header?{}:[];for(he=0;he<X.length;he++){var ne=he,Y=X[he];w.header&&(ne=he>=J.length?"__parsed_extra":J[he]),w.transform&&(Y=w.transform(Y,ne)),Y=ae(ne,Y),ne==="__parsed_extra"?(ue[ne]=ue[ne]||[],ue[ne].push(Y)):ue[ne]=Y}return w.header&&(he>J.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+he,re+ce):he<J.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+he,re+ce)),ue}var Z=1;return!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(G),Z=U.data.length):U.data=G(U.data,0),w.header&&U.meta&&(U.meta.fields=J),re+=Z,U}()}function le(){return w.header&&J.length===0}function ae(G,Z){return X=G,w.dynamicTypingFunction&&w.dynamicTyping[X]===void 0&&(w.dynamicTyping[X]=w.dynamicTypingFunction(X)),(w.dynamicTyping[X]||w.dynamicTyping)===!0?Z==="true"||Z==="TRUE"||Z!=="false"&&Z!=="FALSE"&&(function(ce){if(K.test(ce)){var he=parseFloat(ce);if(B<he&&he<D)return!0}return!1}(Z)?parseFloat(Z):ie.test(Z)?new Date(Z):Z===""?null:Z):Z;var X}function se(G,Z,X,ce){var he={type:G,code:Z,message:X};ce!==void 0&&(he.row=ce),U.errors.push(he)}this.parse=function(G,Z,X){var ce=w.quoteChar||'"';if(w.newline||(w.newline=function(ne,Y){ne=ne.substring(0,1048576);var ve=new RegExp(S(Y)+"([^]*?)"+S(Y),"gm"),oe=(ne=ne.replace(ve,"")).split("\r"),ye=ne.split(`
`),je=1<ye.length&&ye[0].length<oe[0].length;if(oe.length===1||je)return`
`;for(var De=0,_e=0;_e<oe.length;_e++)oe[_e][0]===`
`&&De++;return De>=oe.length/2?`\r
`:"\r"}(G,ce)),T=!1,w.delimiter)L(w.delimiter)&&(w.delimiter=w.delimiter(G),U.meta.delimiter=w.delimiter);else{var he=function(ne,Y,ve,oe,ye){var je,De,_e,Ce;ye=ye||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Ee=0;Ee<ye.length;Ee++){var fe=ye[Ee],Re=0,Le=0,Oe=0;_e=void 0;for(var gt=new k({comments:oe,delimiter:fe,newline:Y,preview:10}).parse(ne),d=0;d<gt.data.length;d++)if(ve&&te(gt.data[d]))Oe++;else{var p=gt.data[d].length;Le+=p,_e!==void 0?0<p&&(Re+=Math.abs(p-_e),_e=p):_e=p}0<gt.data.length&&(Le/=gt.data.length-Oe),(De===void 0||Re<=De)&&(Ce===void 0||Ce<Le)&&1.99<Le&&(De=Re,je=fe,Ce=Le)}return{successful:!!(w.delimiter=je),bestDelimiter:je}}(G,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess);he.successful?w.delimiter=he.bestDelimiter:(T=!0,w.delimiter=h.DefaultDelimiter),U.meta.delimiter=w.delimiter}var ue=F(w);return w.preview&&w.header&&ue.preview++,b=G,C=new k(ue),U=C.parse(b,Z,X),ee(),H?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return H},this.pause=function(){H=!0,C.abort(),b=L(w.chunk)?"":b.substring(C.getCharIndex())},this.resume=function(){V.streamer._halted?(H=!1,V.streamer.parseChunk(b,!0)):setTimeout(V.resume,3)},this.aborted=function(){return pe},this.abort=function(){pe=!0,C.abort(),U.meta.aborted=!0,L(w.complete)&&w.complete(U),b=""}}function S(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(w){var b,C=(w=w||{}).delimiter,T=w.newline,D=w.comments,B=w.step,K=w.preview,ie=w.fastMode,V=b=w.quoteChar===void 0||w.quoteChar===null?'"':w.quoteChar;if(w.escapeChar!==void 0&&(V=w.escapeChar),(typeof C!="string"||-1<h.BAD_DELIMITERS.indexOf(C))&&(C=","),D===C)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<h.BAD_DELIMITERS.indexOf(D))&&(D=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var O=0,re=!1;this.parse=function(H,pe,J){if(typeof H!="string")throw new Error("Input must be a string");var U=H.length,z=C.length,te=T.length,ee=D.length,le=L(B),ae=[],se=[],G=[],Z=O=0;if(!H)return v();if(w.header&&!pe){var X=H.split(T)[0].split(C),ce=[],he={},ue=!1;for(var ne in X){var Y=X[ne];L(w.transformHeader)&&(Y=w.transformHeader(Y,ne));var ve=Y,oe=he[Y]||0;for(0<oe&&(ue=!0,ve=Y+"_"+oe),he[Y]=oe+1;ce.includes(ve);)ve=ve+"_"+oe;ce.push(ve)}if(ue){var ye=H.split(T);ye[0]=ce.join(C),H=ye.join(T)}}if(ie||ie!==!1&&H.indexOf(b)===-1){for(var je=H.split(T),De=0;De<je.length;De++){if(G=je[De],O+=G.length,De!==je.length-1)O+=T.length;else if(J)return v();if(!D||G.substring(0,ee)!==D){if(le){if(ae=[],Oe(G.split(C)),M(),re)return v()}else Oe(G.split(C));if(K&&K<=De)return ae=ae.slice(0,K),v(!0)}}return v()}for(var _e=H.indexOf(C,O),Ce=H.indexOf(T,O),Ee=new RegExp(S(V)+S(b),"g"),fe=H.indexOf(b,O);;)if(H[O]!==b)if(D&&G.length===0&&H.substring(O,O+ee)===D){if(Ce===-1)return v();O=Ce+te,Ce=H.indexOf(T,O),_e=H.indexOf(C,O)}else if(_e!==-1&&(_e<Ce||Ce===-1))G.push(H.substring(O,_e)),O=_e+z,_e=H.indexOf(C,O);else{if(Ce===-1)break;if(G.push(H.substring(O,Ce)),p(Ce+te),le&&(M(),re))return v();if(K&&ae.length>=K)return v(!0)}else for(fe=O,O++;;){if((fe=H.indexOf(b,fe+1))===-1)return J||se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ae.length,index:O}),d();if(fe===U-1)return d(H.substring(O,fe).replace(Ee,b));if(b!==V||H[fe+1]!==V){if(b===V||fe===0||H[fe-1]!==V){_e!==-1&&_e<fe+1&&(_e=H.indexOf(C,fe+1)),Ce!==-1&&Ce<fe+1&&(Ce=H.indexOf(T,fe+1));var Re=gt(Ce===-1?_e:Math.min(_e,Ce));if(H.substr(fe+1+Re,z)===C){G.push(H.substring(O,fe).replace(Ee,b)),H[O=fe+1+Re+z]!==b&&(fe=H.indexOf(b,O)),_e=H.indexOf(C,O),Ce=H.indexOf(T,O);break}var Le=gt(Ce);if(H.substring(fe+1+Le,fe+1+Le+te)===T){if(G.push(H.substring(O,fe).replace(Ee,b)),p(fe+1+Le+te),_e=H.indexOf(C,O),fe=H.indexOf(b,O),le&&(M(),re))return v();if(K&&ae.length>=K)return v(!0);break}se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ae.length,index:O}),fe++}}else fe++}return d();function Oe(I){ae.push(I),Z=O}function gt(I){var $=0;if(I!==-1){var Q=H.substring(fe+1,I);Q&&Q.trim()===""&&($=Q.length)}return $}function d(I){return J||(I===void 0&&(I=H.substring(O)),G.push(I),O=U,Oe(G),le&&M()),v()}function p(I){O=I,Oe(G),G=[],Ce=H.indexOf(T,O)}function v(I){return{data:ae,errors:se,meta:{delimiter:C,linebreak:T,aborted:re,truncated:!!I,cursor:Z+(pe||0)}}}function M(){B(v()),ae=[],se=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return O}}function R(w){var b=w.data,C=a[b.workerId],T=!1;if(b.error)C.userError(b.error,b.file);else if(b.results&&b.results.data){var D={abort:function(){T=!0,P(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:N,resume:N};if(L(C.userStep)){for(var B=0;B<b.results.data.length&&(C.userStep({data:b.results.data[B],errors:b.results.errors,meta:b.results.meta},D),!T);B++);delete b.results}else L(C.userChunk)&&(C.userChunk(b.results,D,b.file),delete b.results)}b.finished&&!T&&P(b.workerId,b.results)}function P(w,b){var C=a[w];L(C.userComplete)&&C.userComplete(b),C.terminate(),delete a[w]}function N(){throw new Error("Not implemented.")}function F(w){if(typeof w!="object"||w===null)return w;var b=Array.isArray(w)?[]:{};for(var C in w)b[C]=F(w[C]);return b}function j(w,b){return function(){w.apply(b,arguments)}}function L(w){return typeof w=="function"}return r&&(n.onmessage=function(w){var b=w.data;if(h.WORKER_ID===void 0&&b&&(h.WORKER_ID=b.workerId),typeof b.input=="string")n.postMessage({workerId:h.WORKER_ID,results:h.parse(b.input,b.config),finished:!0});else if(n.File&&b.input instanceof File||b.input instanceof Object){var C=h.parse(b.input,b.config);C&&n.postMessage({workerId:h.WORKER_ID,results:C,finished:!0})}}),(f.prototype=Object.create(c.prototype)).constructor=f,(g.prototype=Object.create(c.prototype)).constructor=g,(y.prototype=Object.create(y.prototype)).constructor=y,(A.prototype=Object.create(c.prototype)).constructor=A,h})})(j1);var XL=j1.exports;const QL=ty(XL),Fd=({mainState:{currentDocument:i,config:e}})=>{const[t,n]=q.useState([]);return q.useEffect(()=>{var s;if(i!=null&&i.fileData){const r=QL.parse(i.fileData,{delimiter:(e==null?void 0:e.csvDelimiter)??","});!((s=r.errors)!=null&&s.length)&&r.data&&n(r.data)}},[i,e==null?void 0:e.csvDelimiter]),t.length?W.jsx(ZL,{children:W.jsxs(JL,{children:[W.jsx("thead",{children:W.jsx("tr",{children:t[0].map(s=>W.jsx("th",{children:s},s))})}),W.jsx("tbody",{children:t.slice(1,t.length).map(s=>W.jsx("tr",{children:s.map(r=>W.jsx("td",{children:r},r))},s.join("")))})]})}):null};Fd.fileTypes=["csv","text/csv"];Fd.weight=0;Fd.fileLoader=bw;const ZL=ke.div`
  width: 100%;
`,JL=ke.table`
  width: 100%;
  text-align: left;

  th,
  td {
    padding: 5px 10px;

    &:empty {
      display: none;
    }
  }
`,ov=i=>W.jsx(fn,{...i});ov.fileTypes=["gif","image/gif"];ov.weight=0;const lv=({mainState:{currentDocument:i}})=>i?W.jsx(eI,{id:"video-renderer",children:W.jsx(tI,{controls:!0,src:i.uri})}):null;lv.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"];lv.weight=0;const eI=ke.div`
  width: 100%;
`,tI=ke.video`
  width: 100%;
  height: 100%;
  border: 0;
`,hv=i=>W.jsx(fn,{...i});hv.fileTypes=["webp","image/webp"];hv.weight=0;const W1=[Vm,vd,Gm,yd,rv,av,Od,Nd,Fd,ov,lv,hv],iI=q.forwardRef((i,e)=>{const{documents:t,theme:n}=i;if(!t)throw new Error("Please provide an array of documents to DocViewer!");return W.jsx(sR,{ref:e,pluginRenderers:W1,...i,children:W.jsx(HS,{theme:n?{...e0,...n}:e0,children:W.jsxs(sI,{id:"react-doc-viewer","data-testid":"react-doc-viewer",className:i.className,style:i.style,children:[W.jsx(LR,{}),W.jsx(BR,{})]})})})}),nI=q.memo(iI),sI=ke.div`
  display: flex;
  flex-direction: column;
  background: #ffffff;
  width: 100%;
  height: 100%;
`,ey=z1.div`
  display: flex;
  flex-direction: column;
  height: calc(100vh - 200px);
  min-height: 500px;
  width: 100%;
  background: ${({theme:i})=>i.background.secondary};

  #react-doc-viewer #header-bar {
    display: none;
  }

  #react-doc-viewer #pdf-controls {
    display: none !important;
  }

  #react-doc-viewer,
  #proxy-renderer,
  #msdoc-renderer {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
    overflow: auto;
    background: none;
  }
`,rI={bmp:"image/bmp",csv:"text/csv",odt:"application/vnd.oasis.opendocument.text",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",gif:"image/gif",htm:"text/html",html:"text/html",jpg:"image/jpeg",jpeg:"image/jpeg",pdf:"application/pdf",png:"image/png",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",tiff:"image/tiff",txt:"text/plain",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",mp4:"video/mp4",webp:"image/webp"},aI=({documentName:i,documentUrl:e})=>{const t=U1(),[n,s]=q.useState(void 0),{extension:r}=H1(i),a=(r==null?void 0:r.toLowerCase().replace(".",""))??"",l=V1.includes(a)?rI[a]:void 0;return q.useEffect(()=>{a==="csv"&&X1(e).then(h=>{s(h)})},[e,a]),a==="csv"&&!cv(n)?Ml(ey,{children:Ml($1,{id:"Nx262D"})}):Ml(ey,{children:Ml(nI,{documents:[{uri:a==="csv"&&cv(n)?window.URL.createObjectURL(new Blob([n],{type:"text/csv"})):e,fileName:i,fileType:l}],pluginRenderers:W1,style:{height:"100%",color:t.font.color.primary,backgroundColor:t.background.primary},config:{header:{disableHeader:!0,disableFileName:!0,retainURLParams:!1},pdfVerticalScrollByDefault:!0,pdfZoom:{defaultZoom:1,zoomJump:.1}},theme:{primary:t.background.primary,secondary:t.background.secondary,tertiary:t.background.tertiary,textPrimary:t.font.color.primary,textSecondary:t.font.color.secondary,textTertiary:t.font.color.tertiary,disableThemeScrollbar:!0}})})},fI=Object.freeze(Object.defineProperty({__proto__:null,DocumentViewer:aI},Symbol.toStringTag,{value:"Module"}));export{Xf as A,fI as D,ty as J,be as c,hI as q,Ga as r,lI as z};
